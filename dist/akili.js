/*!
 * Akili is a javascript framework
 *
 * const Akili = makeItEasy(js + html);
 *
 * @version 1.2.13
 * @author Alexandr Balasyan <mywebstreet@gmail.com>
 * {@link http://akilijs.com}
 * {@link https://github.com/ortexx/akili}
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Akili=e():t.Akili=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.d(e,{default:()=>Ir});var a=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.node=n,this.el=r,this.component=o}var e,n,o;return e=t,(n=[{key:"trigger",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.__removed||!n&&this.inEvaluating()||(t=h.copy(t,{plain:!0}),this.el.dispatchEvent(new CustomEvent(this.name,this.prepareOptions(r({detail:t},e)))))}},{key:"dispatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.__removed||!n&&this.inEvaluating()||this.el.dispatchEvent(new t(this.name,this.prepareOptions(e)))}},{key:"prepareOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=r({bubbles:!0},t),this.node.__component.__prepareAttributeOut(this.node,t.detail),t}},{key:"inEvaluating",value:function(){var t=this.component.__evaluatingEvent;return!!t&&t.el===this.el&&t.event.type===this.name&&t.component===this.component}},{key:"bind",value:function(t){this.el.addEventListener(this.name,this.fn=t)}},{key:"unbind",value:function(){this.fn&&this.el.removeEventListener(this.name,this.fn)}},{key:"remove",value:function(){this.unbind(),delete this.name,delete this.node,delete this.component,delete this.el,this.__removed=!0}}])&&i(e.prototype,n),o&&i(e,o),t}();function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var f={class:function(t){if(!t||"object"!==l(t))return"";for(var e=[],n=Object.keys(t),r=0,o=n.length;r<o;r++){var i=n[r];t[i]&&e.push(i)}return e.join(" ")},style:function(t){if(!t||"object"!==l(t))return"";for(var e=[],n=Object.keys(t),r=0,o=n.length;r<o;r++){var i=n[r],a=t[i];a&&e.push("".concat(this.toDashCase(i),":").concat(a))}return e.join(";")},split:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[],o="";if(!e)return t.split("");if(e instanceof RegExp)return t.split(e);if(-1==t.indexOf(e))o=t;else for(var i=t.split(""),a="",s=0,u=i.length;s<u;s++){var c=i[s],l=n.indexOf(c);l>-1&&(!a||a==c)&&(a=a?"":n[l]),c!=e||a?o+=c:(r.push(o),o="")}return o&&r.push(o),r},filter:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=[];if(r&&!Array.isArray(r)&&(r=[r]),"function"!=typeof e){var i=e?(e+"").toLowerCase():"";e=function(t){return(t?(t+"").toLowerCase():"").match(n.escapeForRegExp(i))}}for(var a=0,s=t.length;a<s;a++){var u=t[a],c=!1;if(!r&&e(u))c=!0;else if(r)for(var l=0,f=r.length;l<f;l++){var h=r[l],p=(h=Array.isArray(h)?h:[h])?this.getPropertyByKeys(h,u):u;e(p)&&(c=!0)}c&&o.push(u)}return o},sort:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t=t.slice(),!0===n?(n=[],r=[!0]):!1===n&&(n=[],r=[!1]),Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);var o=n.length;return t.sort((function(t,i){var a=0,s=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t instanceof Date&&(t=t.getTime()),e instanceof Date&&(e=e.getTime()),t>e?n?-1:1:t<e?n?1:-1:0};return o?function u(){if(a>=o)return 0;var c=n[a];Array.isArray(c)||(c=[c]);var l=e.getPropertyByKeys(c,t),f=e.getPropertyByKeys(c,i),h=s(l,f,!1===r[a]);return 0!==h?h:(a++,u())}():s(t,i,!1===r[a])})),t},includeKeys:function(t,e){for(var n={},r=Object.keys(t),o=0,i=r.length;o<i;o++){var a=r[o];-1!=e.indexOf(a)&&(n[a]=t[a])}return n},excludeKeys:function(t,e){for(var n={},r=Object.keys(t),o=0,i=r.length;o<i;o++){var a=r[o];-1==e.indexOf(a)&&(n[a]=t[a])}return n},isScopeProxy:function(t){return!(!t||"object"!=l(t)||!t.__isProxy)},isStoreProxy:function(t){return!(!t||"object"!=l(t)||!t.__isProxy||t.__component)},isPlainObject:function(t){return!(!t||"object"!=l(t)||t.constructor!=Object&&t.constructor!=Array)},copy:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!=l(t)||!t)return t;n=u({nested:!0,enumerable:!0,plain:!1},n);var r=function t(r){if(r=e.isScopeProxy(r)||e.isStoreProxy(r)?r.__target:r,n.plain&&!e.isPlainObject(r))return r;for(var o=n.enumerable?Object.keys(r):Object.getOwnPropertyNames(r),i=Array.isArray(r)?[]:{},a=0,s=o.length;a<s;a++){var c=o[a],f=r[c];f=f&&"object"==l(f)&&n.nested?t(f):f,Object.prototype.propertyIsEnumerable.call(r,c)?i[c]=f:Object.defineProperty(i,c,u(u({},Object.getOwnPropertyDescriptor(r,c)),{},{value:f}))}return i};return r(t)},makeAttributeValue:function(t){return!1===t||null==t?"":t instanceof a?"[object Event]":"function"==typeof t?"[object Function]":"object"==l(t)?Object.prototype.toString.call(t):t+""},compare:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if("function"==typeof t&&"function"==typeof e)return t.toString()===e.toString();if("object"==l(t)&&"object"==l(e)){if(null===t||null===e)return t===e;var r=function(t){for(var e=Array.isArray(t)?[]:{},r=n.enumerable?Object.keys(t):Object.getOwnPropertyNames(),o=0,i=r.length;o<i;o++){var a=r[o];void 0!==t[a]&&(e[a]=t[a])}return e};(n=u({enumerable:!0,ignoreUndefined:!0},n)).ignoreUndefined&&(t=r(t),e=r(e));var o=n.enumerable?Object.keys(t):Object.getOwnPropertyNames(),i=n.enumerable?Object.keys(e):Object.getOwnPropertyNames();if(o.length!=i.length)return!1;t=this.isScopeProxy(t)?t.__target:t,e=this.isScopeProxy(e)?e.__target:e;for(var a=0,s=o.length;a<s;a++){var c=o[a];if(!this.compare(t[c],e[c]))return!1}return!0}return t===e},escapeForRegExp:function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},createHash:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n.ignoreScopeHash&&this.isScopeProxy(t)&&t.__hash)return t.__hash;var r=function n(r){if(!r||"object"!=l(r))return String(r);if(e.isScopeProxy(r)){if(r!==t&&r.__hash)return r.__hash;r=r.__target}for(var o=Object.keys(r),i=o.length,a="",s=0;s<i;s++){var u=o[s];a+='"'.concat(u,'"::"').concat(n(r[u]),'";;')}return a};t=r(t);for(var o=0,i=0;i<t.length;i++){var a=t.charCodeAt(i);o=(o<<5)-o+a,o&=o}return o+""},encodeHtmlEntities:function(t){var e,n=document.createElement("div");return n.textContent=t,e=n.innerHTML,n.remove(),n=null,e},decodeHtmlEntities:function(t){var e,n=document.createElement("textarea");return n.innerHTML=t,e=n.value,n.remove(),n=null,e},toCamelCase:function(t){return t.replace(/\W+(.)/g,(function(t,e){return e.toUpperCase()}))},capitalize:function(t){return t[0].toUpperCase()+t.slice(1)},toDashCase:function(t){return t.replace(/([A-Z])/g,(function(t,e){return"-".concat(e.toLowerCase())}))},getPropertyByKeys:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="ERR_ARRAY_REDUCE_BREAK",i=t.length,a=0,s=Array.isArray(r.closest)?r.closest:[],u=function(){var t=new Error("Break the reducer");throw t.code=o,t},c=function(t,e){return a++,t&&"object"==l(t)||u(),void 0===t[e]&&r.closest&&(n=s.length?t:void 0,u()),s.push(e),void 0===t[e]?{}:(a==i&&(n=t[e]),t[e])};try{t.reduce(c,e)}catch(t){if(t.code!=o)throw t}return n},hasPropertyByKeys:function(t,e){var n=!1,r=t.length,o=0;return t.reduce((function(t,e){return o++,t&&"object"==l(t)?Object.prototype.hasOwnProperty.call(t,e)?(o==r&&(n=Object.prototype.hasOwnProperty.call(t,e)),t[e]):{}:!!t}),e),n},hasEnumerablePropertyByKeys:function(t,e){var n=!1,r=t.length,o=0;return t.reduce((function(t,e){return o++,t&&"object"==l(t)?Object.prototype.propertyIsEnumerable.call(t,e)?(o==r&&(n=Object.prototype.hasOwnProperty.call(t,e)),t[e]):{}:!!t}),e),n},setPropertyByKeys:function(t,e,n){var r=void 0,o=t.length,i=0;return t.reduce((function(t,e){if(i++,t&&"object"==l(t))return Object.prototype.hasOwnProperty.call(t,e)||(t[e]=void 0),t[e]=n(i==o,t[e]),r=t,t[e]}),e),r},deletePropertyByKeys:function(t,e,n){var r,o=t.length,i=0;return t.reduce((function(t,e){if(i++,t&&"object"==l(t))return Object.prototype.hasOwnProperty.call(t,e)?i==o?(r=t[e],(!n||n(r))&&delete t[e],r):t[e]:{}}),e),r},getEnumerablePropertyTarget:function(t,e){var n=this;return function t(r){if(n.hasEnumerablePropertyByKeys(e,r))return r;var o=Object.getPrototypeOf(r);return o?t(o):null}(t)},getOwnPropertyTarget:function(t,e){var n=this;return function t(r){if(n.hasPropertyByKeys(e,r))return r;var o=Object.getPrototypeOf(r);return o?t(o):null}(t)},createRandomString:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Math.random().toString(36).substring(2,t+2),r=Date.now(),o="",i=0,a=n.length;i<a;i++)o+=r%i?n[i]:n[i].toUpperCase();return e&&e(o)?this.createRandomString(t,e):o},debounce:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=function n(){clearTimeout(t.__debounceTimeout),t.__debounceTimeout=setTimeout((function(){t(),n.removeDebounce()}),e)};return n.removeDebounce=function(){clearTimeout(t.__debounceTimeout),delete t.__debounceTimeout},n}};const h=f;function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.__name=e,this.__el=n,this.__component=r,n.setAttribute("scope",e)}var e,n,r;return e=t,(n=[{key:"__set",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]),Ir.unisolate((function(){r.saveProxy&&(n.__component.__disableProxyRedefining=!0),r.silent&&n.__component.__disableKeys(),h.setPropertyByKeys(t,r.target?n.__target:n,(function(t,n){return t?e:n||{}})),r.silent&&n.__component.__enableKeys(),r.saveProxy&&(n.__component.__disableProxyRedefining=!1)}))}},{key:"__remove",value:function(){for(var t in Ir.removeScope(this.__name),this)Object.prototype.hasOwnProperty.call(this,t)&&delete this[t]}}])&&p(e.prototype,n),r&&p(e,r),t}();function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var g=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.__cache={},this.getHeaders=function(t){for(var e={},n=t.getAllResponseHeaders().split("\r\n"),r=0,o=n.length;r<o;r++){var i=n[r],a=i.indexOf(": ");if(a>0){var s=i.substring(0,a),u=i.substring(a+2);e[s]=u}}return e},this.baseUrl=e?e.replace(/\/$/,"")+"/":"",this.defaults=d({statusErrorPattern:/^[^23]/,cache:!1},n||{})}var e,n,r;return e=t,(n=[{key:"query",value:function(t){var e=this;return new Promise((function(n,r){(t=d(d({},e.defaults),t||{})).url=e.baseUrl?"".concat(e.baseUrl).concat(t.url.replace(/^\//,"")):t.url,t.method=t.method||"GET";var o=new XMLHttpRequest,i=e.transformBefore(o,t);if(o=i.xhr,"function"==typeof(t=i.options).onStart&&t.onStart(o),t.headers=t.headers||{},t.json?(!0!==t.json&&(t.body=JSON.stringify(t.json)),t.headers["content-type"]="application/json",t.responseType=t.responseType||"json"):t.form&&(t.body=e.createFormData(t.form),t.headers["content-type"]="multipart/form-data"),t.params){var a=e.paramsToQuery(t.params);a&&(t.url+="?"+a)}var s=null,u="function"==typeof t.cache?t.cache(t):t.cache;if(!window.AKILI_SSR&&!Ir.__init&&(u=!0),"GET"!=t.method.toUpperCase()||t.body&&"string"!=typeof t.body||(s=e.createCacheHash({url:t.url,method:t.method,user:t.user,password:t.password,body:t.body})),u&&s){var c=e.getCache(s),l=(new Date).getTime();if(c&&(!0===u||l-c.createdAt<=u))return n(e.transformAfter(c.result))}o.open(t.method,t.url,!0,t.user,t.password),Object.prototype.hasOwnProperty.call(t,"timeout")&&(o.timeout=t.timeout),t.responseType&&(o.responseType=t.responseType),t.withCredentials&&(o.withCredentials=t.withCredentials);for(var f=Object.keys(t.headers),h=0,p=f.length;h<p;h++){var _=f[h];o.setRequestHeader(_,t.headers[_])}"function"==typeof t.onProgress&&(o.onprogress=function(e){return t.onProgress(e,o)}),o.onload=function(){var i={response:o.response,status:o.status,readyState:o.readyState,statusText:o.statusText,withCredentials:o.withCredentials,responseType:o.responseType,responseText:"text"==o.responseType?o.responseText:"",responseXML:"document"==o.responseType?o.responseXML:"",responseURL:o.responseURL,timeout:o.timeout,headers:e.getHeaders(o)},a=e.transformAfter(i);if(t.statusErrorPattern&&(o.status+"").match(t.statusErrorPattern)){var c=new Error('Request to "'.concat(t.url,'" returns failure status code ').concat(o.status));return c.response=a,r(c)}(u||window.AKILI_SSR)&&s&&e.createCache(s,i),n(a)},o.ontimeout=function(){return r(new Error('Request to "'.concat(t.url,'" timed out')))},o.onerror=r,o.send(t.body)}))}},{key:"getCache",value:function(t){return this.__cache[t]||null}},{key:"createCache",value:function(t,e){this.__cache[t]={result:e,createdAt:(new Date).getTime()}}},{key:"removeCache",value:function(t){delete this.__cache[t]}},{key:"createCacheHash",value:function(t){return h.createHash(t)}},{key:"paramsToQuery",value:function(t){return t&&"object"===y(t)?Object.keys(t).map((function(e){var n=encodeURIComponent(e);if(Array.isArray(t[e]))return n=encodeURIComponent(e),t[e].map((function(t,e){return n+"[".concat(e,"]")+"="+encodeURIComponent(t)})).join("&");if(t[e]&&"object"===y(t[e])){var r=[];return Object.keys(t[e]).map((function(o){return r.push(n+"[".concat(o,"]")+"="+encodeURIComponent(t[e][o]))})),r.join("&")}return n+"="+encodeURIComponent(t[e])})).join("&"):""}},{key:"paramsFromQuery",value:function(t){for(var e={},n=t.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("="),a=decodeURIComponent(i[0]),s=decodeURIComponent(i[1]);a&&(Array.isArray(e[a])?e[a].push(s):e[a]?e[a]=[e[a],s]:e[a]=s)}return e}},{key:"createFormData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=e||new FormData;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&t[o]){var i=n?n+"["+o+"]":o;t[o]instanceof Date?r.append(i,t[o].toISOString()):h.isPlainObject(t[o])?this.createFormData(t[o],r,i):r.append(i,t[o])}return r}},{key:"transformBefore",value:function(t,e){return{xhr:t,options:e}}},{key:"transformAfter",value:function(t){return d(d({},t),{},{data:t.response})}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.url=t,e.method="GET",this.query(e)}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.url=t,e.method="DELETE",this.query(e)}},{key:"post",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.url=t,e.method="POST",this.query(e)}},{key:"put",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.url=t,e.method="PUT",this.query(e)}},{key:"patch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.url=t,e.method="PATCH",this.query(e)}},{key:"head",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.url=t,e.method="HEAD",this.query(e)}}])&&m(e.prototype,n),r&&m(e,r),t}(),w=new g;w.__instances={},w.__cache={},w.addInstance=function(t,e){this.__instances[t]=e},w.removeInstance=function(t){delete this.__instances[t]},Object.defineProperty(w,"use",{get:function(){return w.__instances}}),w.Request=g;const O=w;function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var j=A({},[]);function E(t,e){var n=t.length?[t[0]]:[e],r=n[0],o=[].concat(S(t),[e]),i="store.".concat(r);Ir.__isolation[i]={updatedAt:Date.now(),rootKey:r,rootKeys:n,keys:o}}function A(t,e){if("object"!=k(t)||null===t)return t;if(!h.isPlainObject(t)&&!h.isStoreProxy(t)&&t!==j)return t;var n=t;t.__isProxy&&(n=t.__target,h.isStoreProxy(t)&&Ir.joinBindingKeys(e)==Ir.joinBindingKeys(t.__keys)||(t=n=h.copy(n,{nested:!1})));for(var r=Object.keys(t),o=0,i=r.length;o<i;o++){var a=r[o],s=n[a];n[a]=A(s,[].concat(S(e),[a]))}return t.__isProxy?t:function(t,e){return new Proxy(t,{get:function(n,r){return"__target"==r?t:"__keys"==r?e:"__isProxy"==r||n[r]},set:function(t,n,r){var o=[].concat(S(e),[n]),i=o[0];if(t[n]=A(r,o),Ir.__disableStoreProxy)return!0;if(Ir.__isolation)return E(e,n),!0;var a=h.copy(j[i],{plain:!0});return Ir.root&&Ir.root.__storeTriggerByName(i,a),!0},deleteProperty:function(t,n){if(Ir.__disableStoreProxy)return delete t[n],!0;var r=[].concat(S(e),[n])[0],o=r===n?void 0:j[r];if(Ir.__isolation)return E(e,n),delete t[n],!0;var i=h.copy(o,{plain:!0});return Ir.root&&Ir.root.__storeTriggerByName(r,i),delete t[n],!0}})}(t,e)}const R=j;var C={};const T=new Proxy(C,{get:function(t,e){return"__target"==e?C:t[e]},set:function(t,e,n){return t[e]=Ir.wrap(n,{tag:e}),!0},deleteProperty:function(t,e){return Ir.removeTag(e),delete t[e],!0}});function x(t,e,n){return(x=L()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&B(o,n.prototype),o}).apply(null,arguments)}function L(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function B(t,e){return(B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function K(t){return function(t){if(Array.isArray(t))return N(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){U(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var q=/\${(((?!\${).)*)}/,F=new RegExp(q.source,"g"),z=["component","scope","no-ssr"],$=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(M(this,t),!(e instanceof Element))throw new Error("You must pass an html element to the component constructor");this.__isCreated=!1,this.__isMounted=!1,this.__isCompiled=!1,this.__isResolved=!1,this.__isRemoved=!1,this.__cancelled=!1,this.__prevent=!1,this.__bindings={},this.__evaluatingEvent=null,this.__recompiling=null,this.__compiling=null,this.__disableProxy={},this.__disableStoreKeys={},this.__disableAttrKeys={},this.__children=[],this.__parent=null,this.__parents=[],this.__content="",this.__attrs={},this.__attrLinks={},this.__storeLinks={},this.__attributeOf=null,this.__evaluationComponent=this,this.scope=n,this.el=e,!this.constructor.ssr&&window.AKILI_SSR&&this.cancel()}var e,n,r;return e=t,r=[{key:"define",value:function(){Ir.component("component",t)}},{key:"parse",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],o=[],i=h.split(e,";",['"',"'","`"]);for(var a in i[i.length-1]="return ".concat(i[i.length-1]),n)r.push(a),o.push(n[a]);return x(Function,r.concat(["".concat(i.join("; "))])).apply(t,o)}}],(n=[{key:"__createCompilationOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D({checkChanges:!1,setEvents:!0,setParents:!0,setBooleanAttributes:!0,defineAttributes:!0},t)}},{key:"__createRecompilationOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(D({},this.__createCompilationOptions()),{},{setEvents:!1,setParents:!1,defineAttributes:!1},t)}},{key:"__recompile",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__isMounted=!1,this.__recompiling=!0,this.__evaluationComponent.__disableProxy={},this.__compiling=this.__createRecompilationOptions(t),this.__compiling.setEvents&&this.__setEvents(),this.__compiling.setParents&&this.__setParents(),this.__compiling.setBooleanAttributes&&this.__setBooleanAttributes(),this.__compiling.defineAttributes&&this.__defineAttributes()}},{key:"__create",value:function(){var t=this;this.__compiling=this.__createCompilationOptions(),this.__initialize(),this.__setEvents(),this.__setParents(),this.__setBooleanAttributes(),this.__defineAttributes(),Ir.isolate((function(){return t.created(t.attrs)})),this.__isCreated=!0}},{key:"__compile",value:function(){var t,e=this,n=this.__controlAttributes||!this.__evaluationParent,r=Promise.resolve();return this.__attributeOf=n?this:this.__evaluationParent.__akili,(!this.__recompiling||this.__compiling.newParent||this.__controlAttributes)&&this.__interpolateAttributes(this.el,this.__attributeOf),function t(n,r){for(var o=0,i=n.length;o<i;o++){var a=n[o];3==a.nodeType&&e.__initializeNode(a,r)?e.__evaluateNode(a,!!e.__compiling&&e.__compiling.checkChanges):1!=a.nodeType||a.__akili||(e.__interpolateAttributes(a),t(a.childNodes,a))}}(this.el.childNodes,this.el),this.__isMounted=!0,this.__recompiling?t=Ir.isolate((function(){e.attrs.onRecompiled&&e.attrs.onRecompiled.trigger(void 0,{bubbles:!1}),e.recompiled()})):(t=Ir.isolate((function(){return e.attrs.onCompiled&&e.attrs.onCompiled.trigger(void 0,{bubbles:!1}),e.compiled()})),this.constructor.templateUrl&&(r=O.get(this.constructor.templateUrl,{cache:this.constructor.templateCache}).then((function(t){return e.el.innerHTML=e.__content,Ir.setTemplate(e.el,t.data),delete e.__content,Ir.compile(e.el,{recompile:!0})})))),this.__recompiling=null,this.__compiling=null,r.then((function(){return e.__isCompiled=!0,t}))}},{key:"__resolve",value:function(){var t=this;return this.__isResolved||this.__isRemoved?Promise.resolve():(this.attrs.onResolved&&this.attrs.onResolved.trigger(void 0,{bubbles:!1}),Promise.resolve(Ir.isolate((function(){return t.resolved()}))).then((function(e){return t.__isResolved=!0,e})))}},{key:"__initialize",value:function(){var t,e=Ir.getAkiliParents(this.el,!1),n=this.constructor.scope||Ir.Scope,r=Ir.__root===this.el;this.el.__akili=this,e?t=new n(this.el.getAttribute("scope")||Ir.createScopeName(),this.el,this):(t=new n(r?"root":Ir.createScopeName(),this.el,this),r&&(Ir.root=this));var o=t,i=Object.assign(t,this.scope),a=this.constructor.controlAttributes,s=this.constructor.events;return this.constructor.template&&Ir.setTemplate(this.el,this.constructor.template),this.constructor.templateUrl&&(this.__content=this.el.innerHTML,this.el.innerHTML=""),this.__scope=o,this.__events=s,this.__controlAttributes=a,Ir.addScope(t),this.scope=this.__nestedObserve(i,[]),!0}},{key:"__setBooleanAttributes",value:function(){var t=this;this.booleanAttributes=[].concat(Ir.htmlBooleanAttributes,this.constructor.booleanAttributes),function e(n){for(var r=0,o=n.attributes,i=o.length;r<i;r++){var a=o[r];if(-1!=t.booleanAttributes.indexOf(a.nodeName)){if(n.hasAttribute("boolean-".concat(a.nodeName)))continue;n.setAttribute("boolean-".concat(a.nodeName),n.getAttribute(a.nodeName)||a.nodeName),n.removeAttribute(a.nodeName)}}for(var s=0,u=n.children.length;s<u;s++){var c=n.children[s];c.__akili||e(c)}}(this.el)}},{key:"__setEvents",value:function(){for(var t=0,e=this.__events.length;t<e;t++){var n=this.__events[t];!/^on-/i.test(n)&&(n="on-"+n),this.el.hasAttribute(n)||this.el.setAttribute(n,"")}}},{key:"__setParents",value:function(){var t=Ir.getAkiliParents(this.el);if(t.length){for(var e=this.__parent!==t[0],n=null,r=0,o=t.length;r<o;r++){var i=t[r];if(!i.__akili.constructor.transparent){n=i;break}}this.__compiling.newParent=e,e&&this.__detach(),this.constructor.transparent&&(this.__evaluationComponent=n.__akili),this.__evaluationParent=n,this.__parent=t[0],this.__parents=t,this.scope.__parent=this.__evaluationParent.__akili.scope,!this.__recompiling&&this.__parent.__akili.__addChild(this.el),Object.setPrototypeOf(this.scope,this.__parent.__akili.__scope)}}},{key:"__addChild",value:function(t){this.__children.push(t)}},{key:"__spliceChild",value:function(t){for(var e=0,n=this.__children.length;e<n;e++)this.__children[e]===t&&(this.__children.splice(e,1),e--,n--)}},{key:"__getParsedExpression",value:function(t){return t}},{key:"__checkEvaluation",value:function(t){if(!Object.keys(t.__properties).length)return!0;for(var e in t.__properties)if(Object.prototype.hasOwnProperty.call(t.__properties,e)){var n=t.__properties[e],r=h.getPropertyByKeys(n.keys,n.component.__scope);if(!t.__component.__compareNodePropertyValue(n,r))return!0}return!1}},{key:"__checkNodePropertyChange",value:function(t,e,n){var r=this.__getNodeProperty(t,e);return!r||!t.__component.__compareNodePropertyValue(r,n)}},{key:"__compareNodePropertyValue",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h.compare(h.createHash(e),t.hash,n)}},{key:"__createExceptionMessage",value:function(t,e){var n=t.__component.el.tagName,r=(t.__component.el.getAttribute("component")||n).toLowerCase(),o=t.__element.tagName.toLowerCase(),i=t instanceof window.Attr?t.name.toLowerCase():"",a=[e.message,t.__expression.trim()];return i&&a.push("[attribute ".concat(i,"]")),"Expression error: "+(a=a.concat(["[element ".concat(o,"]"),"[component ".concat(r,"]")])).join("\n\tat ")}},{key:"__evaluate",value:function(t){var e,n,r=this,o=0,i=t.__attributeOf||t.__component;return t.__component.parents((function(t){return t.__prevent})).length?{res:t.__expression}:t instanceof window.Attr||!t.__component.__prevent?{res:t.__expression.replace(F,(function(a,s){var u;o++;var c=t.__component.__getParsedExpression(s);r.__finishEvaluationCycle(),Ir.__evaluation={node:t,list:[],component:i};try{u=r.constructor.parse(i.__evaluationComponent.scope,c,D({},T))}catch(e){throw r.__createExceptionMessage(t,e)}if(r.__finishEvaluationCycle(),t instanceof window.Attr)return n=a,e=u,h.makeAttributeValue(u);if("object"==H(u))try{return JSON.stringify(u)}catch(t){return u}return u})),counter:o,expression:n,attributeValue:e}:{res:t.__expression}}},{key:"__finishEvaluationCycle",value:function(){var t,e,n=[],r={};Ir.__evaluation&&(t=Ir.__evaluation.node,e=Ir.__evaluation.component,n=Ir.__evaluation.list,Ir.__evaluation.list=null,Ir.__evaluation=null);for(var o=n.length-1;o>=0;o--){var i=n[o];if(!i.component.__isRemoved){var a=i.component.__createKeysHash(i.keys);if(!i.notBinding&&!r[a]){var s=h.getPropertyByKeys(i.parents,i.component.__scope);h.isScopeProxy(s)&&i.component!==e.__evaluationComponent&&i.component===i.bindComponent||(i.bindComponent.__bindAndSetProperty(t,i.keys,i.evaluated),r[a]=!0)}}}}},{key:"__bindAndSetProperty",value:function(t,e,n){var r=this.__getBoundNode(e,t),o=h.getPropertyByKeys(e,this.__scope);r||this.__bind(e,{node:t,keys:e}),this.__setNodeProperty(t,e,o,n)}},{key:"__getEvaluationComponents",value:function(t){var e=[];return function n(r){r.__getBind(t)&&e.push(r);for(var o=0;o<r.__children.length;o++)n(r.__children[o].__akili)}(this),e.length?e:[this]}},{key:"__evaluateOwnKeys",value:function(t){for(var e=this.__getAllBinds(t),n=0;n<e.length;n++){var r=e[n];if(r){var o=r.node;if(r.node&&o.__initialized){var i=h.getPropertyByKeys(r.keys,this.__scope);if(this.__checkNodePropertyChange(o,r.keys,i)){for(var a in this.__disableKeys(t),this.__evaluateNode(o),o.__properties)o.__properties[a].component.__setNodeProperty(o,r.keys,i);this.__enableKeys(t)}}}}}},{key:"__evaluateByKeys",value:function(t){var e=this;t=K(t),function n(){for(var r=e.__getEvaluationComponents(t),o=0;o<r.length;o++)r[o].__evaluateOwnKeys(t);t.pop(),t.length&&n()}()}},{key:"__evaluateEvent",value:function(t,e,n){var r,o=q.exec(t.__expression);if(o){this.__evaluatingEvent={el:e,component:this,event:n,node:t},this.__disableProxy={};try{r=this.constructor.parse(this.__evaluationComponent.scope,o[1],D(D({},T),{},{event:n}))}catch(e){throw this.__createExceptionMessage(t,e)}return this.__evaluatingEvent=null,r}}},{key:"__evaluateNode",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t instanceof window.Attr?"value":"nodeValue";if(!e||this.__checkEvaluation(t)){var r=this.__evaluate(t),o=r.res,i=r.attributeValue,a=r.expression,s=r.counter;if(t[n]!=o&&(t[n]=o),t instanceof window.Attr){var u=o,c=!1;1==s&&a&&t.__expression==a&&(u=i);var l=t.nodeName.replace(/^boolean-(.+)/i,"$1"),f=h.toCamelCase(l);if(l!=t.nodeName&&(c=!0,u=!!u),t.__attributeOn){var p=t.__attributeOn;u=p.__prepareAttributeIn(t,u),p.__disableAttributeSetter=!0,p.attrs[f]=u,p.__disableAttributeSetter=!1,p.__isMounted&&p.__attrTriggerByName(f,u)}else if(c){var _=t.__element;u?_.setAttribute(f,"true"):_.removeAttribute(f)}}}return t[n]}},{key:"__prepareAttributeIn",value:function(t,e){return h.copy(e,{plain:!0})}},{key:"__prepareAttributeOut",value:function(t,e){return h.copy(e,{plain:!0})}},{key:"__initializeAttribute",value:function(t,e,n){if(t&&-1==z.indexOf(t.nodeName)&&this.__initializeNode(t,e)){var r=t.nodeName.replace(/^on-(.+)/i,"$1"),o=n||this;if(t.__isEvent){if(t.__event)return;var i=new Ir.EventEmitter(r,t,e,o);return t.__hasBindings&&i.bind((function(n){return o.__evaluateEvent(t,e,n)})),t.__event=i,e.setAttribute(t.nodeName,h.makeAttributeValue(i)),void(n&&(this.__disableAttributeSetter=!0,this.attrs[h.toCamelCase(t.nodeName)]=i,this.__disableAttributeSetter=!1))}n&&(t.__attributeOn=this,t.__attributeOf=o);var a=!!this.__compiling&&this.__compiling.checkChanges;o.__evaluateNode(t,a)}}},{key:"__initializeNode",value:function(t,e){if(t.__initialized)return!0;var n=t instanceof window.Attr,r=t[n?"value":"nodeValue"],o=q.test(r.trim()),i=!!n&&/^boolean-/i.test(t.nodeName),a=!!n&&/^on-(.+)/i.test(t.nodeName);return!!(e.__akili||o||i||a)&&(t.__name=this.__scope.__name+h.createRandomString(16),t.__isEvent=a,t.__hasBindings=o,t.__isBoolean=i,t.__expression=r,t.__properties={},t.__attributeOf=null,t.__attributeOn=null,t.__event=null,t.__initialized=!0,t.__component=this,t.__element=e,!0)}},{key:"__deinitializeNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.__initialized&&(t.__event&&t.__event.remove(),t.__hasBindings&&!e.saveBindings&&(this.__unbindByNodes(t),this.__unbindParentsByNodes(t)),Ir.removeTag(t),delete t.__name,delete t.__hasBindings,delete t.__isBoolean,delete t.__isEvent,delete t.__expression,delete t.__properties,delete t.__attributeOf,delete t.__attributeOn,delete t.__event,delete t.__initialized,delete t.__component,delete t.__element)}},{key:"__interpolateAttributes",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=0,r=t.attributes,o=r.length;n<o;n++)this.__initializeAttribute(r[n],t,e)}},{key:"__defineAttributes",value:function(){var t=this,e=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t.__disableAttributeSetter){var o=t.el.getAttributeNode(e);if(r)return o&&t.__deinitializeNode(o),void t.el.removeAttribute(e);o?(o.value=n,t.__deinitializeNode(o)):(t.el.setAttribute(e,n),o=t.el.getAttributeNode(e)),t.__initializeAttribute(o,t.el,t.__attributeOf)}};this.attrs=new Proxy(this.__attrs,{get:function(t,e){return"__isProxy"==e||t[e]},set:function(n,r,o){var i=h.toDashCase(r);return-1!=t.booleanAttributes.indexOf(i)&&(o?t.el.setAttribute(i,o):t.el.removeAttribute(i),i="boolean-".concat(i)),n[r]=o,e(i,h.makeAttributeValue(o)),!0},deleteProperty:function(t,n,r){var o=h.toDashCase(n);return e(o,h.makeAttributeValue(r),!0),delete t[n],!0}})}},{key:"__observe",value:function(t,e){var n=this;return new Proxy(t,{get:function(r,o){if("__isProxy"==o)return!0;if("__target"==o)return t;if("__component"==o)return n;if("__keys"==o)return e;if(n.__isSystemKey(o))return r[o];if(Ir.__evaluation&&!n.__isRemoved){var i=[].concat(e,[o]),a=!1,s=!h.getOwnPropertyTarget(n.__scope,i),u=n;if(r instanceof _){var c=h.getOwnPropertyTarget(r,[o]);c&&c instanceof _&&(u=c.__component)}return Ir.__wrapping&&i.length>1||(o in r&&!h.getEnumerablePropertyTarget(r,[o])&&(a=!0),n.__bindNode(Ir.__evaluation.list,u,i,e,r[o],a,s)),r[o]}return r[o]},set:function(t,r,o){var i=[].concat(K(e),[r]);return n.__isRemoved||n.__isSystemKey(r)||n.__checkDisablement(i)?(t[r]=o,n.__setScopeObjectHash(t,i),!0):n.__isCreated&&void 0!==o&&!Object.prototype.hasOwnProperty.call(t,r)&&r in t?(h.getEnumerablePropertyTarget(t,[r]).__component.scope[r]=o,!1):("function"==typeof o&&(o=Ir.wrapFunction(o)),t[r]=n.__nestedObserve(o,i),n.__isResolved||n.__triggerStoreAndAttr(i),Ir.__isolation?(n.__createIsolationObject(e,r),!0):(n.__setScopeObjectHash(t,i),n.__isResolved&&n.__triggerStoreAndAttr(i),n.__isMounted&&n.__evaluateByKeys(i),!0))},deleteProperty:function(t,r){var o=[].concat(e,[r]);return n.__isRemoved||n.__isSystemKey(r)||n.__checkDisablement(o)?(delete t[r],n.__setScopeObjectHash(t,o),!0):(delete t[r],n.__isResolved||n.__triggerStoreAndAttr(o),Ir.__isolation?(n.__createIsolationObject(e,r),!0):(n.__isResolved&&n.__triggerStoreAndAttr(o),n.__setScopeObjectHash(t,o),n.__evaluateByKeys(o),!0))}})}},{key:"__triggerStoreAndAttr",value:function(t){for(var e=0,n=t.length;e<n;e++){var r=t.slice(0,n-e),o=Ir.joinBindingKeys(r),i=h.getPropertyByKeys(r,this.__scope);this.__storeLinks[o]&&this.__storeTriggerByKeys(r,i),this.__attrLinks[o]&&this.__attrTriggerByKeys(r,i)}}},{key:"__createKeysHash",value:function(t){return"scope.".concat(this.__scope.__name,".").concat(Ir.joinBindingKeys(t))}},{key:"__getDisablementTypeStore",value:function(t){return{proxy:"__disableProxy",store:"__disableStoreKeys",attr:"__disableAttrKeys"}[t]}},{key:"__disableKeys",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"proxy";this[this.__getDisablementTypeStore(e)][t?this.__createKeysHash(t):"__all"]=!0}},{key:"__enableKeys",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"proxy";delete this[this.__getDisablementTypeStore(e)][t?this.__createKeysHash(t):"__all"]}},{key:"__checkDisablement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"proxy",n=this.__getDisablementTypeStore(e);return!!this[n].__all||this[n][this.__createKeysHash(t)]}},{key:"__storeTriggerByKeys",value:function(t,e){if(!this.__checkDisablement(t,"store")){var n=this.__storeLinks[Ir.joinBindingKeys(t)];if(n&&n.length){e=h.copy(e,{plain:!0});for(var r=[],o=0,i=n.length;o<i;o++){var a=n[o];a.set&&r.push(this.__storeTriggerByName(a.name,e))}return Promise.all(r)}}}},{key:"__storeTriggerByName",value:function(t,e){var n=this;Ir.__disableStoreProxy=!0,R[t]=e,Ir.__disableStoreProxy=!1;var r=(Ir.__storeLinks[t]||[]).concat(Ir.__storeLinks["*"]||[]);if(r&&r.length)for(var o=function(o,i){var a=r[o],s=a.component;if(s===n)return"continue";if(a.fn)return Ir.isolate((function(){return a.fn.call(s,e,t)})),"continue";if(!a.get)return"continue";s.__disableKeys(a.keys,"store");var u=h.getPropertyByKeys(a.keys,s.__scope);!h.compare(u,e)&&s.scope.__set(a.keys,e),s.__enableKeys(a.keys,"store")},i=0,a=(r=h.sort(r,["date"],!0)).length;i<a;i++)o(i)}},{key:"__storeByKeys",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n=D({get:!0,set:!0},n),!e)throw new Error('Store link "'.concat(t,'" must have the scope property name'));if(!n.get&&!n.set)throw new Error('Store link "'.concat(t,'" must have at least "get" or "set" option as true'));Array.isArray(e)||(e=[e]),this.__disableKeys(e,"store"),(Object.prototype.hasOwnProperty.call(R,t)||!h.hasPropertyByKeys(e,this.__scope))&&this.scope.__set(e,R[t]),this.__enableKeys(e,"store");var r,o=Ir.joinBindingKeys(e);this.__storeLinks[o]||(this.__storeLinks[o]=[]);for(var i=this.__storeLinks[o],a=i.length-1;a>=0;a--){var s=i[a];if(s.component===this&&s.name==t&&s.keyString==o)return void(i[a]=D(D(D({},s),n),{},{date:Date.now()}))}Ir.__storeLinks[t]||(Ir.__storeLinks[t]=[]),r=D(D({},n),{},{component:this,name:t,keys:e,keyString:o,date:Date.now()}),this.__storeLinks[o].push(r),Ir.__storeLinks[t].push(r)}},{key:"__storeByFunction",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0===n.callOnStart?Object.prototype.hasOwnProperty.call(R.__target,t):n.callOnStart;Ir.__storeLinks[t]||(Ir.__storeLinks[t]=[]);for(var o=Ir.__storeLinks[t],i=o.length-1;i>=0;i--){var a=o[i];if(a.component===this&&a.name==t&&a.fn===e)return void(o[i]=D(D(D({},a),n),{},{date:Date.now()}))}if(Ir.__storeLinks[t].push(D(D({},n),{},{component:this,name:t,fn:e,date:Date.now()})),"*"==t&&!1!==n.callOnStart){for(var s=Object.keys(R.__target),u=[],c=0,l=s.length;c<l;c++){var f=s[c],p=h.copy(R.__target[f],{plain:!0});u.push(e.call(this,p,f))}return Promise.all(u)}if(r)return e.call(this,h.copy(R.__target[t],{plain:!0}))}},{key:"__unstoreByKeys",value:function(t,e){if(!e)throw new Error('You have to pass the scope property name for store link "'.concat(t,'"'));Array.isArray(e)||(e=[e]);var n=Ir.joinBindingKeys(e),r=this.__storeLinks[n];if(r.length){for(var o=r.length-1;o>=0;o--){var i=r[o],a=Ir.__storeLinks[i.name];if(i.component===this&&i.name==t&&i.keyString==n&&(r.splice(o,1),a&&a.length)){for(var s=a.length-1;s>=0;s--){var u=a[s];u.component===this&&u.keyString==n&&a.splice(s,1)}a.length||delete Ir.__storeLinks[t]}}r.length||delete this.__storeLinks[n]}}},{key:"__unstoreByFunction",value:function(t,e){if(Ir.__storeLinks[t]){for(var n=Ir.__storeLinks[t],r=n.length-1;r>=0;r--){var o=n[r];if(o.component===this&&o.name==t&&o.fn===e){n.splice(r,1);break}}n.length||delete Ir.__storeLinks[t]}}},{key:"__attrTriggerByKeys",value:function(t,e){var n=this;if(!this.__checkDisablement(t,"attr")){var r=this.__attrLinks[Ir.joinBindingKeys(t)];if(r&&r.length)return Ir.isolate((function(){for(var t=0,o=r.length;t<o;t++){var i=r[t];if(!i.fn&&i.set){var a="on"+h.capitalize(i.name);n.attrs[a]&&n.attrs[a].trigger(e,{bubbles:!0})}}}))}}},{key:"__attrTriggerByName",value:function(t,e){var n=this,r=(this.__attrLinks[t]||[]).concat(this.__attrLinks["*"]||[]);if(r&&r.length)for(var o=function(o,i){var a=r[o];if(a.fn)return Ir.isolate((function(){return a.fn.call(n,e,h.toDashCase(t))})),"continue";if(!a.get)return"continue";n.__disableKeys(a.keys,"attr");var s=h.getPropertyByKeys(a.keys,n.__scope);!h.compare(s,e)&&n.scope.__set(a.keys,e),n.__enableKeys(a.keys,"attr")},i=0,a=(r=h.sort(r,["date"],!0)).length;i<a;i++)o(i)}},{key:"__attrByKeys",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n=D({get:!0,set:!0},n),t=h.toCamelCase(t),!e)throw new Error('Attribute link "'.concat(t,'" must have the scope property name'));Array.isArray(e)||(e=[e]),this.__disableKeys(e,"attr"),(Object.prototype.hasOwnProperty.call(this.attrs,t)||!h.hasPropertyByKeys(e,this.__scope))&&this.scope.__set(e,this.attrs[t]),this.__enableKeys(e,"attr");var r=Ir.joinBindingKeys(e);this.__attrLinks[r]||(this.__attrLinks[r]=[]);for(var o=this.__attrLinks[r],i=o.length-1;i>=0;i--){var a=o[i];if(a.name==t&&a.keyString==r)return void(o[i]=D(D(D({},a),n),{},{date:Date.now()}))}this.__attrLinks[r].push(D(D({},n),{},{name:t,keys:e,keyString:r,date:Date.now(),component:this}))}},{key:"__attrByFunction",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=h.toCamelCase(t);var o=void 0===r.callOnStart?Object.prototype.hasOwnProperty.call(this.attrs,t):r.callOnStart;this.__attrLinks[t]||(this.__attrLinks[t]=[]);for(var i=this.__attrLinks[t],a=i.length-1;a>=0;a--){var s=i[a];if(s.name==t&&s.fn===e)return void(i[a]=D(D(D({},s),r),{},{date:Date.now()}))}if(this.__attrLinks[t].push(D(D({},r),{},{name:t,fn:e,date:Date.now(),component:this})),"*"==t&&!1!==r.callOnStart){for(var u=Object.keys(this.__attrs).filter((function(t){return!(n.__attrs[t]instanceof Ir.EventEmitter)})),c=[],l=0,f=u.length;l<f;l++){var p=u[l],_=this.__attrs[p];c.push(e.call(this,_,h.toDashCase(p)))}return Promise.all(c)}if(o)return e.call(this,this.attrs[t])}},{key:"__unattrByKeys",value:function(t,e){if(!e)throw new Error('You have to pass the scope property name for attribute link "'.concat(t,'"'));Array.isArray(e)||(e=[e]);var n=Ir.joinBindingKeys(e),r=this.__attrLinks[n];if(r.length){for(var o=r.length-1;o>=0;o--){var i=r[o];i.name==t&&i.keyString==n&&r.splice(o,1)}r.length||delete this.__attrLinks[n]}}},{key:"__unattrByFunction",value:function(t,e){if(this.__attrLinks[t]){for(var n=this.__attrLinks[t],r=n.length-1;r>=0;r--){var o=n[r];if(o.name==t&&o.fn===e){n.splice(r,1);break}}n.length||delete this.__attrLinks[t]}}},{key:"__isSystemKey",value:function(t){return t.match&&t.match("^_|#")||"constructor"==t}},{key:"__setScopeObjectHash",value:function(t,e){!t||"object"!=H(t)||t instanceof _||(Object.defineProperty(t,"__hash",{configurable:!0,enumerable:!1,value:h.createHash(t,{ignoreScopeHash:!0})}),e&&(e=e.slice(0,-1),this.__setScopeObjectHash(h.getPropertyByKeys(e,this.__scope),e)))}},{key:"__nestedObserve",value:function(t,e){var n=this;return function t(e,r){if("object"!=H(e)||null===e)return e;if(!(h.isPlainObject(e)||h.isScopeProxy(e)||e instanceof _))return e;var o=e;t:if(e.__isProxy){if(o=e.__target,n.__disableProxyRedefining)break t;e.__component===n&&Ir.joinBindingKeys(r)==Ir.joinBindingKeys(e.__keys)||(e=o=h.copy(o,{nested:!1}))}else n.__disableProxyRedefining||e instanceof _||(e=o=h.copy(o,{nested:!1}));for(var i=Object.keys(o),a=0,s=i.length;a<s;a++){var u=i[a],c=o[u];o[u]=t(c,[].concat(K(r),[u]))}return n.__setScopeObjectHash(o),e.__isProxy?e:n.__observe(e,r)}(t,e||[])}},{key:"__createIsolationObject",value:function(t,e){var n=t.length?[t[0]]:[e],r=n[0],o=[].concat(K(t),[e]),i=this.__createKeysHash(n);return Ir.__isolation[i]||(Ir.__isolation[i]={updatedAt:Date.now(),component:this,rootKeys:n,rootKey:r,keys:o}),Ir.__isolation[i]}},{key:"__bindNode",value:function(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=Ir.joinBindingKeys(r),u=this;if(t.length&&!i){var c=t.length-1,l=t[c];l.bindComponent===this&&l.keysString==s&&(u=l.component),l.keysString==s&&l.component===u&&t.splice(c,1)}t.push({component:u,bindComponent:e,keysString:Ir.joinBindingKeys(n),parents:r,keys:n,value:o,evaluated:a,notBinding:i})}},{key:"__isSystemBindingKey",value:function(t){return"__data"==t}},{key:"__getBind",value:function(t){return h.getPropertyByKeys(t,this.__bindings)||null}},{key:"__getAllBinds",value:function(t){var e=this.__getBind(t);if(!e)return[];var n=[];return function t(e){for(var r in n=n.concat(e.__data||[]),e)Object.prototype.hasOwnProperty.call(e,r)&&"__data"!=r&&t(e[r])}(e),n}},{key:"__getBoundNode",value:function(t,e){var n=h.getPropertyByKeys(t,this.__bindings);if(!n||!n.__data||!n.__data.length)return null;for(var r=0,o=n.__data.length;r<o;r++){var i=n.__data[r];if(i.node===e)return i}return null}},{key:"__setNodeProperty",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.__getNodeProperty(t,e),i=h.createHash(n);if(o){var a=t.__component.__compareNodePropertyValue(o,n);return o.value=n,o.hash=i,!a}return t.__properties[this.__createKeysHash(e)]={component:this,value:n,hash:i,node:t,keys:e,evaluated:r},!0}},{key:"__getNodeProperty",value:function(t,e){return t.__properties[this.__createKeysHash(e)]||null}},{key:"__deleteNodeProperty",value:function(t,e){var n="scope.".concat(this.__scope.__name,".").concat(Ir.joinBindingKeys(e));delete t.__properties[n]}},{key:"__mapNodes",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=D({rootAttrs:!0,attrs:!0,node:!0,el:!0},n);var r=function r(o){if(o){if(n.attrs&&(o!==e.el||n.rootAttrs))for(var i=0,a=o.attributes,s=a.length;i<s;i++)t(a[i]);for(var u=o.childNodes.length-1;u>=0;u--){var c=o.childNodes[u];3==c.nodeType?n.node&&t(c):1!=c.nodeType||c.__akili||(r(c),n.el&&t(c))}}};r(this.el)}},{key:"__getAllNodes",value:function(){var t=[];return this.__mapNodes((function(e){return t.push(e)})),t}},{key:"__bind",value:function(t,e){h.setPropertyByKeys(t,this.__bindings,(function(t,n){var r={__data:[]};return t?("object"==H(n)&&(r=n),r.__data||(r.__data=[]),r.__data.push(e),r):n||r}))}},{key:"__unbindByNodes",value:function(t){var e=this;t instanceof Node&&(t=[t]),function n(r,o,i){for(var a=Object.keys(r),s=0,u=a.length;s<u;s++){var c=a[s];if("__data"==c){for(var l=r[c]||[],f=l.length,h=0;h<f;h++){var p=l[h];-1!=t.indexOf(p.node)&&(delete p.node,l.splice(h,1),h--,f--)}f||delete r[c]}else e.__isSystemBindingKey(c)||n(r[c],r,c);o&&!Object.keys(r).length&&delete o[i]}}(this.__bindings)}},{key:"__unbindParentsByNodes",value:function(t){for(var e=0,n=this.__parents.length;e<n;e++){var r=this.__parents[e];r&&r.__akili&&r.__akili.__unbindByNodes(t)}}},{key:"__clearStoreLinks",value:function(){var t=Ir.__storeLinks;for(var e in t){for(var n=t[e],r=n.length-1;r>=0;r--)n[r].component===this&&n.splice(r,1);n.length||delete t[e]}}},{key:"__remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.attrs.onRemoved&&this.attrs.onRemoved.trigger(void 0,{bubbles:!1}),this.removed();var e=this.__detach({saveBindings:!0,deinitializeNodes:!0}),n=[].concat(e,this.__empty({saveBindings:!0}));return this.__unbindByNodes(e),!t.saveBindings&&this.__unbindParentsByNodes(n),this.__clearStoreLinks(),this.__scope.__remove(),delete this.__scope,delete this.scope,this.el.remove(),delete this.el.__akili,delete this.el,delete this.__parent,delete this.__attributeOf,delete this.__evaluationComponent,delete this.__evaluationParent,delete this.__parents,delete this.__bindings,delete this.__attrLinks,delete this.__storeLinks,delete this.__attrs,delete this.attrs,this.__isRemoved=!0,n}},{key:"__removeChildren",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[],n=0;n<this.__children.length;n++){var r=this.__children[n];e=e.concat(r.__akili.__remove(t)),n--}return e}},{key:"__detach",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__parent&&this.__parent.__akili.__spliceChild(this.el);for(var e=[],n=0,r=this.el.attributes.length;n<r;n++){var o=this.el.attributes[n];o.__initialized&&(e.push(o),t.deinitializeNodes&&this.__deinitializeNode(o,{saveBindings:!0}))}return!t.saveBindings&&this.__unbindParentsByNodes(e),e}},{key:"__empty",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.__removeChildren({saveBindings:!0});return this.__mapNodes((function(e){1!=e.nodeType?e.__initialized&&(t.__deinitializeNode(e,{saveBindings:!0}),n.push(e)):e.remove()}),{rootAttrs:!1}),this.__unbindByNodes(n),!e.saveBindings&&this.__unbindParentsByNodes(n),this.el.innerHTML="",n}},{key:"__getParent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[],o=0;"object"!=H(n)&&(n=[n]);var i=function i(a){if(a){if((!n||-1!=n.indexOf(o))&&(!t||a.__akili.matches(t))){if(!e)return void r.push(a.__akili);r.push(a.__akili)}o++,i(a.__akili.__parent)}};return i(this.__parent),e?r:r[0]||null}},{key:"__getChildren",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[],o=0;"object"!=H(n)&&(n=[n]);var i=function i(a){for(var s=0,u=a.length;s<u;s++){var c=a[s];if((!n||-1!=n.indexOf(o))&&(!t||c.__akili.matches(t))){if(!e)return void r.push(c.__akili);r.push(c.__akili)}}o++;for(var l=0,f=a.length;l<f;l++)i(a[l].__akili.__children)};return i(this.__children),e?r:r[0]||null}},{key:"__getNear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.__parent)return null;var r=this.__parent.__akili.__children.slice(),o=[];n&&r.reverse();for(var i=0,a=r.length;i<a;i++){var s=r[i];if(s===this.el)break;t&&!s.__akili.matches(t)||o.push(s.__akili)}return o.reverse(),e?o:o.length?o[0]:null}},{key:"store",value:function(t,e){if(!this.__isMounted)throw new Error('Method "store" must be called after the compilation. For example, in "compiled" method.');var n=[].slice.call(arguments);return"function"==typeof t&&(n.unshift("*"),e=t),"function"==typeof e?this.__storeByFunction.apply(this,K(n)):this.__storeByKeys.apply(this,K(n))}},{key:"attr",value:function(t,e){if(!this.__isMounted)throw new Error('Method "attr" must be called after the compilation. For example, in "compiled" method.');var n=[].slice.call(arguments);return"function"==typeof t&&(n.unshift("*"),e=t),"function"==typeof e?this.__attrByFunction.apply(this,K(n)):this.__attrByKeys.apply(this,K(n))}},{key:"unstore",value:function(t,e){if(!this.__isMounted)throw new Error('Method "unstore" must be called after the compilation. For example, in "compiled" method.');var n=[].slice.call(arguments);return"function"==typeof t&&(n.unshift("*"),e=t),"function"==typeof e?this.__unstoreByFunction.apply(this,arguments):this.__unstoreByKeys.apply(this,arguments)}},{key:"unattr",value:function(t,e){if(!this.__isMounted)throw new Error('Method "unattr" must be called after the compilation. For example, in "compiled" method.');var n=[].slice.call(arguments);return"function"==typeof t&&(n.unshift("*"),e=t),"function"==typeof e?this.__unattrByFunction.apply(this,arguments):this.__unattrByKeys.apply(this,arguments)}},{key:"matches",value:function(t){return"function"==typeof t?t(this):this.el.matches(t)}},{key:"parent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.__getParent(t,!1,e)}},{key:"parents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.__getParent(t,!0,e)}},{key:"child",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.__getChildren(t,!1,e)}},{key:"children",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.__getChildren(t,!0,e)}},{key:"before",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.__getNear(t,!0,!1)}},{key:"after",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.__getNear(t,!0,!0)}},{key:"prev",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.__getNear(t,!1,!1)}},{key:"next",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.__getNear(t,!1,!0)}},{key:"appendTo",value:function(t){return t.appendChild(this.el),Ir.compile(this.el,{recompile:{setParents:!0,checkChanges:!1}})}},{key:"cancel",value:function(){this.__cancelled=!0}},{key:"prevent",value:function(){this.__prevent=!0}},{key:"empty",value:function(){return this.__empty.apply(this,arguments)}},{key:"remove",value:function(){return this.__remove.apply(this,arguments)}},{key:"created",value:function(){}},{key:"compiled",value:function(){}},{key:"recompiled",value:function(){}},{key:"resolved",value:function(){}},{key:"removed",value:function(){}},{key:"transition",get:function(){return this.__scope&&this.__scope.__transition||null}},{key:"isCreated",get:function(){return this.__isCreated}},{key:"isCompiled",get:function(){return this.__isCompiled}},{key:"isResolved",get:function(){return this.__isResolved}},{key:"isRemoved",get:function(){return this.__isRemoved}}])&&V(e.prototype,n),r&&V(e,r),t}();function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tt(t);if(e){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(t,e){return!e||"object"!==Q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}$.matches="",$.booleanAttributes=[],$.events=[],$.controlAttributes=!1,$.transparent=!1,$.template="",$.templateUrl="",$.scope=null,$.ssr=!0;var et=function(t){Y(i,t);var e,n,r,o=J(i);function i(){var t;W(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).html=t.el.innerHTML,t.el.innerHTML="",t.state=!1,t.active=!1,t.recreate=!1,t.rendered=!1,t.display=getComputedStyle(t.el).display,t}return e=i,r=[{key:"define",value:function(){Ir.component("if",this),Ir.component("else-if",this.ElseIf),Ir.component("else",this.Else)}}],(n=[{key:"compiled",value:function(){return this.attr("recreate",this.setRecreation),this.attr("is",this.setIs)}},{key:"setIs",value:function(t){return this.state=!!t,this.setState()}},{key:"setActivity",value:function(t){this.active=t}},{key:"setRecreation",value:function(t){this.recreate=t}},{key:"setState",value:function(){var t,e=this.rendering(),n=this.el.nextElementSibling;if(n&&n.matches("else-if,else"))return n.__akili.setActivity(this.active||this.state),n.__akili.setRecreation(this.recreate),t=n.__akili.setState(),Promise.resolve(e).then((function(){return t}))}},{key:"rendering",value:function(){var t=Promise.resolve();return this.state&&!this.active?(this.el.style.setProperty("display",this.display,"important"),!this.recreate&&this.rendered||(t=this.render())):(this.recreate?this.empty():this.rendered||(t=this.render()),this.el.style.setProperty("display","none","important")),t}},{key:"render",value:function(){var t;return this.empty(),this.el.innerHTML=this.html,t=Ir.compile(this.el,{recompile:!0}),this.rendered=!0,t}}])&&G(e.prototype,n),r&&G(e,r),i}($);et.transparent=!0,et.matches="[is]",et.booleanAttributes=["recreate"];var nt=function(t){Y(n,t);var e=J(n);function n(){var t;W(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).active=!0,t}return n}(et),rt=function(t){Y(n,t);var e=J(n);function n(){var t;W(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).el.setAttribute("is","true"),t}return n}(nt);function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function st(t,e,n){return e&&at(t.prototype,e),n&&at(t,n),t}function ut(t,e,n){return(ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ct(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=pt(t);if(e){var o=pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ht(this,n)}}function ht(t,e){return!e||"object"!==ot(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pt(t){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}rt.matches="",et.ElseIf=nt,et.Else=rt;var _t=function(t){ct(n,t);var e=ft(n);function n(){var t;it(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).iterators=[],t.iteratorEl=null,t.reset(),t}return st(n,[{key:"__prepareAttributeIn",value:function(t,e){return t instanceof window.Attr&&"in"==t.name?e:ut(pt(n.prototype),"__prepareAttributeIn",this).apply(this,arguments)}},{key:"__compareNodePropertyValue",value:function(t,e){var r=t.node;return!(r instanceof window.Attr&&"in"==r.name&&t.value!==e)&&ut(pt(n.prototype),"__compareNodePropertyValue",this).apply(this,arguments)}},{key:"__stepIterationChunk",value:function(t){var e=this;return new Promise((function(n,r){setTimeout((function(){e.drawChunk(t).then(n).catch(r)}))}))}},{key:"__removeExcessIterators",value:function(){for(var t=Object.keys(this.data).length,e=this.iterators.length;t<e;t++){this.iterators[t].__remove(),this.iterators.splice(t,1),e--,t--}}},{key:"__completeDrawing",value:function(){this.__isRemoved||(this.reset(),this.attrs.onOut.trigger(this.data,{bubbles:!0}))}},{key:"__createIterator",value:function(){for(var t,e=0,r=this.el.children.length;e<r;e++){var o=this.el.children[e];if("loop"==o.getAttribute("component")){t=o;break}t=o}t||((t=document.createElement("loop")).innerHTML=this.el.innerHTML,this.el.innerHTML="",this.el.appendChild(t));var i=t.getAttribute("component");if("loop"!=i){var a=Ir.component(i||t.tagName);if(a){if(!(a.prototype instanceof n)){var s=document.createElement("loop");s.appendChild(t),t=s}}else t.setAttribute("component","loop")}this.html=t.innerHTML,this.iteratorEl=this.__createIteratorElement(t.outerHTML),t.remove()}},{key:"__createIteratorElement",value:function(t){var e=document.createElement("template");return e.innerHTML=t,e.content.firstChild}},{key:"created",value:function(){this.__createIterator()}},{key:"compiled",value:function(){return this.attr("in",this.draw)}},{key:"removed",value:function(){ut(pt(n.prototype),"removed",this).apply(this,arguments),this.iteratorEl&&this.iteratorEl.remove(),delete this.html,delete this.iterators,delete this.iteratorEl,delete this.__iterator,delete this.__value}},{key:"loop",value:function(t,e,n){var r=Promise.resolve();if(this.__index=n,this.__key=t,this.__value=e,this.__hash=h.createHash(e),this.iterators.length>n){var o=this.iterators[n];return o.setIndex(this.__index===o.index),o.setKey(this.__key===o.key),o.setValue(h.compare(this.__hash,o.hash)),{promise:r,iterator:o}}var i=this.iteratorEl.cloneNode();return i.innerHTML=this.html,this.el.appendChild(i),r=Ir.compile(i),this.iterators.push(i.__akili),{promise:r,iterator:i.__akili}}},{key:"drawChunk",value:function(t){var e=this,n=Object.keys(this.data),r=n.length;if(t==r)return this.__removeExcessIterators(),Promise.resolve(this.__completeDrawing());var o=[],i=t+ +(this.attrs.chunks||r);i>r&&(i=r);for(var a=this.__stepIterationChunk.bind(this),s=function(t){var s=n[t],u=t+1,c=e.loop(s,e.data[s],t);return c.iterator.iterate(t),o.push(c.promise),u!=i?"continue":(u==r&&(e.__removeExcessIterators(),a=e.__completeDrawing.bind(e)),{v:Promise.all(o).then((function(){return a(u)}))})},u=t;u<i;u++){var c=s(u);if("continue"!==c&&"object"===ot(c))return c.v}}},{key:"draw",value:function(t){"object"==ot(t)&&null!==t||(Ir.options.debug&&console.warn('"For" component "in" attribute value type must be an object/array'),t=[]),this.data=t;var e=[].slice.call(this.el.children);return this.iterators.sort((function(t,n){return e.indexOf(t.el)-e.indexOf(n.el)})),this.__children.sort((function(t,n){return e.indexOf(t)-e.indexOf(n)})),this.drawChunk(0)}},{key:"reset",value:function(){this.__iterator=null,this.__index=0,this.__key="",this.__value=null,this.__hash=""}}],[{key:"define",value:function(){Ir.component("for",this),Ir.component("ol",this),Ir.component("ul",this),Ir.component("thead",this),Ir.component("tbody",this),Ir.component("tfoot",this),Ir.component("tr",this.Loop),Ir.component("loop",this.Loop)}}]),n}($);_t.matches="[in]",_t.events=["out"];var yt=function(t){ct(n,t);var e=ft(n);function n(){var t;it(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).for=null,t.html=t.el.innerHTML,t.isFor=t.el.hasAttribute("in"),t.isFor||t.el.parentNode.__akili instanceof _t||t.cancel(),t}return st(n,[{key:"created",value:function(){if(this.__parent.__akili.__iterator=this,this.for=this.__parent.__akili,this.setIndex(!0),this.setKey(!0),this.setValue(!0),this.isFor)return ut(pt(n.prototype),"created",this).apply(this,arguments)}},{key:"compiled",value:function(){if(this.isFor)return ut(pt(n.prototype),"compiled",this).apply(this,arguments)}},{key:"removed",value:function(){ut(pt(n.prototype),"removed",this).apply(this,arguments),delete this.for,delete this.value}},{key:"setIndex",value:function(t){this.index=this.for.__index,this.scope.__set("loopIndex",this.index,{target:t})}},{key:"setKey",value:function(t){this.key=this.for.__key,this.scope.__set("loopKey",this.key,{target:t})}},{key:"setValue",value:function(t){this.value=this.for.__value,this.scope.__set("loopValue",this.value,{target:t,saveProxy:!0}),this.hash=this.for.__hash}},{key:"iterate",value:function(){}}]),n}(_t);function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mt(t,e,n){return e&&bt(t.prototype,e),n&&bt(t,n),t}function gt(t,e,n){return(gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function wt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ot(t,e)}function Ot(t,e){return(Ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pt(t);if(e){var o=Pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return St(this,n)}}function St(t,e){return!e||"object"!==vt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pt(t){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}yt.matches="",yt.controlAttributes=!0,_t.Loop=yt;var jt=function(t){wt(n,t);var e=kt(n);function n(){var t;dt(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).iteratorTagName="option",t.iterable=t.el.hasAttribute("in"),t}return mt(n,[{key:"created",value:function(){var t=this;if(this.el.addEventListener("change",(function(){return t.el.content=t.getContent()})),this.iterable)return gt(Pt(n.prototype),"created",this).apply(this,arguments)}},{key:"compiled",value:function(){return this.iterable&&gt(Pt(n.prototype),"compiled",this).apply(this,arguments),this.attr("multiple",this.setMultiple,{callOnStart:!1}),this.attr("value",this.setValue),this.unattr("in",this.draw),this.attr("in",this.setIn)}},{key:"setIn",value:function(t){return this.draw(t).then(this.redrawSelect.bind(this))}},{key:"redrawSelect",value:function(){for(var t=this.removeUnproperValues(this.el.content),e=t.length?t:null,n=[],r=this.el.options.length-1;r>=0;r--){var o=this.el.options[r],i=!!o.getAttribute("selected");!e||e.includes(o.value)?e?(o.selected=!0,n.push(o.value)):(o.selected=i,i&&n.push(o.value)):o.selected=!1}this.changeValue(this.formatValue(n))}},{key:"setMultiple",value:function(){this.changeValue(this.formatValue(h.copy(this.el.content)))}},{key:"setValue",value:function(t){if(void 0!==t||this.__isCompiled){var e=this.formatValue(t);this.changeValue(e,!h.compare(e,t))}}},{key:"createIteratorElement",value:function(){var t=gt(Pt(n.prototype),"createIteratorElement",this).apply(this,arguments);return t.hasAttribute("value")||t.setAttribute("value",this.html.trim()),t}},{key:"getContent",value:function(){if(!this.attrs.multiple)return this.el.value;for(var t=[],e=0,n=this.el.options.length;e<n;e++){var r=this.el.options[e];r.selected&&t.push(r.value)}return t}},{key:"formatValue",value:function(t){return this.attrs.multiple?(!Array.isArray(t)&&(t=[t]),t=this.removeUnproperValues(t)):(Array.isArray(t)&&(t=t[0]),this.removeUnproperValues(t).length?t:this.getDefaultValue())}},{key:"removeUnproperValues",value:function(t){Array.isArray(t)?t.slice():t=[t];for(var e={},n=0,r=this.el.options.length;n<r;n++)e[this.el.options[n].value]=!0;for(var o=t.length-1;o>=0;o--)e[t[o]]||t.splice(o,1);return t}},{key:"redefine",value:function(){this.el.querySelector("[selected]")||(this.el.value=this.getDefaultValue()),this.changeValue(this.getContent())}},{key:"getDefaultValue",value:function(){var t=this.el.options[0];return this.attrs.multiple?[]:t?t.value:void 0}},{key:"changeValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(h.compare(this.el.content,t)){if(!e)return}else{if(Array.isArray(t)){this.el.value=t[t.length-1];for(var n=0,r=this.el.options.length;n<r;n++){var o=this.el.options[n];o.selected=-1!=t.indexOf(o.value)}}else{this.el.value=t;for(var i=0,a=this.el.options.length;i<a;i++){var s=this.el.options[i];s.selected=s.value==t}}this.el.content=t}this.attrs.onChange.dispatch(Event,{bubbles:!0})}}],[{key:"define",value:function(){Ir.component("select",this),Ir.component("option",this.Option)}}]),n}(_t);jt.matches="",jt.booleanAttributes=["multiple"].concat(_t.booleanAttributes),jt.events=["change"].concat(_t.events);var Et=function(t){wt(n,t);var e=kt(n);function n(){var t;dt(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).iterable=t.el.parentNode.__akili.iterable,t.iterable||(t.__cancelled=!1),t}return mt(n,[{key:"__getParsedExpression",value:function(t){return h.decodeHtmlEntities(t)}},{key:"compiled",value:function(){this.attr("selected",this.setSelected,{callOnStart:!1}),this.iterable&&gt(Pt(n.prototype),"compiled",this).apply(this,arguments)}},{key:"setSelected",value:function(t){this.el.selected=t,this.for.redefine()}}]),n}(yt);function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tt(t,e){return(Tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Bt(t);if(e){var o=Bt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lt(this,n)}}function Lt(t,e){return!e||"object"!==At(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bt(t){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Et.booleanAttributes=["selected"],jt.Option=Et;var Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tt(t,e)}(i,t);var e,n,r,o=xt(i);function i(){var t;Rt(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).valueKey="value",t.debounceInterval=500,t}return e=i,(n=[{key:"created",value:function(){var t=this;this.el.hasAttribute("on-debounce")&&this.el.addEventListener("input",h.debounce((function(){t.attrs.onDebounce.trigger(void 0,{bubbles:!0})}),this.debounceInterval))}},{key:"compiled",value:function(){this.attr("focus",this.setFocus),this.attr("value",this.setValue),this.attr("debounce",this.setDebounce)}},{key:"setDebounce",value:function(t){this.debounceInterval=+t}},{key:"setFocus",value:function(t){t?this.setElementFocus():this.setElementBlur()}},{key:"setValue",value:function(t){this.el[this.valueKey]!==t&&(this.el[this.valueKey]=0===t?"0":t||"")}},{key:"setElementFocus",value:function(){return this.setElementFocusOn(this.getElementTextLength())}},{key:"setElementFocusOn",value:function(t){document.activeElement!==this.el&&this.el.focus(),this.el.selectionStart=this.el.selectionEnd=t}},{key:"setElementBlur",value:function(){this.el.blur()}},{key:"getElementTextLength",value:function(){return this.el.value.length}}])&&Ct(e.prototype,n),r&&Ct(e,r),i}($);function Nt(t){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function It(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dt(t,e,n){return(Dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ut(t,e){return(Ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qt(t);if(e){var o=qt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vt(this,n)}}function Vt(t,e){return!e||"object"!==Nt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qt(t){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ut(t,e)}(i,t);var e,n,r,o=Mt(i);function i(){var t;Ht(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).isCheckbox="checkbox"==t.el.type,t.isRadio="radio"==t.el.type,t}return e=i,r=[{key:"define",value:function(){Ir.component("input",this)}}],(n=[{key:"compiled",value:function(){return(this.isCheckbox||this.isRadio)&&this.attr("checked",this.setChecked),Dt(qt(i.prototype),"compiled",this).apply(this,arguments)}},{key:"setChecked",value:function(t){t=!!t,this.el.checked!==t&&(this.el.checked=t,this.__isCompiled&&this.attrs.onChange.dispatch(Event,{bubbles:!0}),this.isRadio&&this.changeRadio())}},{key:"setValue",value:function(t){Dt(qt(i.prototype),"setValue",this).apply(this,arguments),this.isRadio&&this.el[this.valueKey]!=t&&this.attrs.onChange.dispatch(Event,{bubbles:!0})}},{key:"changeRadio",value:function(){for(var t=this.el.getAttribute("name"),e="input[type=radio][name='".concat(t,"']:not([scope='").concat(this.scope.__name,"'])"),n=this.parent().children(e),r=0,o=n.length;r<o;r++){var i=n[r];i.setChecked(i.el.checked)}}}])&&It(e.prototype,n),r&&It(e,r),i}(Kt);function zt(t){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wt(t,e,n){return e&&Qt(t.prototype,e),n&&Qt(t,n),t}function Gt(t,e,n){return(Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=te(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Yt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=te(t);if(e){var o=te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zt(this,n)}}function Zt(t,e){return!e||"object"!==zt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function te(t){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Ft.booleanAttributes=["checked","multiple"].concat(Kt.booleanAttributes),Ft.events=["change"].concat(Kt.events);var ee=function(t){Yt(n,t);var e=Jt(n);function n(){var t;$t(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).iterable=t.el.hasAttribute("in"),t}return Wt(n,[{key:"created",value:function(){var t=this;if(this.el.addEventListener("change",(function(){if(!t._disableInternalEvents){var e=t.getRadioValue();e!==t.prevValue&&(t.prevValue=e,(void 0===t.attrs.value||t.__isResolved)&&t.attrs.onRadio.trigger(e,{bubbles:!0}))}})),this.iterable)return Gt(te(n.prototype),"created",this).apply(this,arguments)}},{key:"compiled",value:function(){if(this.iterable){var t=Gt(te(n.prototype),"compiled",this).apply(this,arguments);return this.unattr("in",this.draw),t}}},{key:"resolved",value:function(){return this.attr("value",this.setValue),this.attr("name",this.setNames),this.attr("in",this.setIn,{callOnStart:!1})}},{key:"setIn",value:function(t){return this.draw(t).then(this.redrawRadio.bind(this))}},{key:"redrawRadio",value:function(){this.setNames();for(var t=this.isProperValue(this.prevValue)?this.prevValue:null,e=this.children("input[type=radio]"),n=t,r=0,o=e.length;r<o;r++){var i=e[r].el,a=!!i.getAttribute("checked");t&&i.value!==t?i.checked=!1:t?(i.checked=!0,n=i.value):(i.checked=a,a&&(n=i.value))}null===n&&e.length&&(n=e[0].el.value),this.setValue(n)}},{key:"isProperValue",value:function(t){for(var e=this.children("input[type=radio]"),n=0,r=e.length;n<r;n++)if(e[n].el.value===t)return!0;return!1}},{key:"setNames",value:function(t){for(var e=this.children("input[type=radio]"),n=0,r=e.length;n<r;n++)e[n].el.setAttribute("name",t||this.attrs.name)}},{key:"setValue",value:function(t){if(t!==this.prevValue){var e=this.children("input[type=radio]");this._disableInternalEvents=!0;for(var n=0,r=e.length;n<r;n++){var o=e[n];o.setChecked(o.el.value===t)}this._disableInternalEvents=!1,this.prevValue=t,this.attrs.onRadio.trigger(t,{bubbles:!0})}}},{key:"getRadioValue",value:function(){for(var t=this.children("input[type=radio]"),e=0,n=t.length;e<n;e++){var r=t[e];if(r.el.checked)return r.el.value}return null}}],[{key:"define",value:function(){Ir.component("radio",this),Ir.component("radio-button",this.RadioButton)}}]),n}(_t);ee.matches="[name]",ee.events=["radio"].concat(_t.events);var ne=function(t){Yt(n,t);var e=Jt(n);function n(){$t(this,n);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e.call.apply(e,[this].concat(r))}return Wt(n,[{key:"compiled",value:function(){return this.attr("value","value"),Gt(te(n.prototype),"compiled",this).apply(this,arguments)}}]),n}(yt);function re(t){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ae(t,e){return(ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function se(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ce(t);if(e){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(t,e){return!e||"object"!==re(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ce(t){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}ne.template='<label><input type="radio" value="${this.value}"/>${this.__content}</label>',ee.RadioButton=ne;var le=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ae(t,e)}(i,t);var e,n,r,o=se(i);function i(){return oe(this,i),o.apply(this,arguments)}return e=i,r=[{key:"define",value:function(){Ir.component("textarea",this)}}],(n=null)&&ie(e.prototype,n),r&&ie(e,r),i}(Kt);function fe(t){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function he(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ye(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=de(t);if(e){var o=de(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ve(this,n)}}function ve(t,e){return!e||"object"!==fe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function de(t){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(i,t);var e,n,r,o=ye(i);function i(){var t;he(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).el.hasAttribute("editable")&&(t.el.setAttribute("contenteditable",t.el.getAttribute("editable")),t.el.removeAttribute("editable")),"inline"==getComputedStyle(t.el).display&&(t.el.style.display="block"),t.valueKey="innerHTML",t}return e=i,r=[{key:"define",value:function(){Ir.component("content",this),Ir.alias("[contenteditable]","content")}}],(n=[{key:"walkTextNodes",value:function(t,e){for(var n=t.childNodes,r=0,o=n.length;r<o;r++){var i=n[r];3==i.nodeType?e(i):this.walkTextNodes(i,e)}}},{key:"getElementTextLength",value:function(){var t=0;return this.walkTextNodes(this.el,(function(e){return t+=e.nodeValue.length})),t}},{key:"setElementFocusOn",value:function(t){var e,n=[],r=this.getElementTextLength();if(t>r&&(t=r),t<=0)return this.el.focus();this.walkTextNodes(this.el,(function(t){return n.push(t)}));for(var o=0;o<n.length;o++){if(e=n[o],!(t>n[o].nodeValue.length&&n[o+1])){e=n[o];break}t-=n[o].nodeValue.length}var i=document.createRange(),a=window.getSelection();i.setStart(e,t),i.setEnd(e,t),a.removeAllRanges(),a.addRange(i),this.el.focus()}}])&&pe(e.prototype,n),r&&pe(e,r),i}(Kt);function me(t){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oe(t,e){return(Oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ke(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pe(t);if(e){var o=Pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Se(this,n)}}function Se(t,e){return!e||"object"!==me(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pe(t){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var je=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oe(t,e)}(i,t);var e,n,r,o=ke(i);function i(){var t;ge(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).html=t.el.innerHTML,t.el.innerHTML="",t.connection=null,t}return e=i,r=[{key:"define",value:function(){Ir.component("include",this)}}],(n=[{key:"compiled",value:function(){return this.attr("cache",this.setCache),this.attr("url",this.setTemplate)}},{key:"setCache",value:function(t){this.cache=t}},{key:"setTemplate",value:function(t){var e=this;return this.connection&&this.connection.abort(),O.get(t,{cache:this.cache,onStart:function(t){e.connection=t}}).then((function(t){return e.connection=null,e.empty(),e.el.innerHTML=e.html,Ir.setTemplate(e.el,t.data),Ir.compile(e.el,{recompile:!0}).then((function(){e.attrs.onLoad.trigger(void 0,{bubbles:!1})}))})).catch((function(t){throw e.attrs.onError.trigger(t,{bubbles:!1}),t}))}}])&&we(e.prototype,n),r&&we(e,r),i}($);function Ee(t){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ce(t,e){return(Ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Te(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Le(t);if(e){var o=Le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xe(this,n)}}function xe(t,e){return!e||"object"!==Ee(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Le(t){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}je.transparent=!0,je.matches="[url]",je.events=["load","error"];var Be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ce(t,e)}(i,t);var e,n,r,o=Te(i);function i(){var t;Ae(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).urlAttribute="src",t.handlerAttribute=t.el.hasAttribute("urlset")?"urlset":"url",t.elOpacity=getComputedStyle(t.el).opacity,t}return e=i,(n=[{key:"created",value:function(){this.viewport=!1,this.cancelable=!1,this.observer=null,this.finished=!1,this.cancelling=!1,this.onLoadListener=this.onLoad.bind(this),this.onErrorListener=this.onError.bind(this),this.el.addEventListener("load",this.onLoadListener),this.el.addEventListener("error",this.onErrorListener),this.createUrlAttribute()}},{key:"compiled",value:function(){this.attr("loading",this.setLoading),this.attr(this.handlerAttribute,this.setUrl)}},{key:"removed",value:function(){this.observer&&this.observer.disconnect()}},{key:"createUrlAttribute",value:function(){"urlset"==this.handlerAttribute&&this.urlAttribute}},{key:"onLoad",value:function(){this.isRemoved||(this.attrs.hiddenError&&(this.el.style.opacity=this.elOpacity),this.finished=!0,this.cancelling=!1)}},{key:"onError",value:function(){this.isRemoved||(this.attrs.hiddenError&&(this.el.style.opacity=0),!this.cancelling&&(this.finished=!0))}},{key:"intersectionHandler",value:function(t){var e=t[0];if(this.isIntersecting=e.isIntersecting,!e.isIntersecting&&!this.finished)return this.cancelling=!0,void(this.attrs[this.urlAttribute]="");this.finished||(this.cancelling=!1,this.attrs[this.urlAttribute]=this.attrs[this.handlerAttribute])}},{key:"setLoading",value:function(t){if(this.viewport="viewport"==t,!this.viewport)return this.observer&&this.observer.disconnect(),void delete this.isIntersecting;this.observer=new IntersectionObserver(this.intersectionHandler.bind(this)),this.observer.observe(this.el)}},{key:"setUrl",value:function(t){this.finished=!1,this.cancelling=!1,this.viewport&&!this.isIntersecting||(this.attrs[this.urlAttribute]=t)}}])&&Re(e.prototype,n),r&&Re(e,r),i}($);function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function He(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ie(t,e){return(Ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function De(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Me(t);if(e){var o=Me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(t,e){return!e||"object"!==Ke(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Me(t){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Be.matches="[url],[urlset]",Be.booleanAttributes=["hidden-error"];var Ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ie(t,e)}(i,t);var e,n,r,o=De(i);function i(){return Ne(this,i),o.apply(this,arguments)}return e=i,r=[{key:"define",value:function(){Ir.component("iframe",this)}}],(n=null)&&He(e.prototype,n),r&&He(e,r),i}(Be);function qe(t){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $e(t,e){return($e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ge(t);if(e){var o=Ge(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return We(this,n)}}function We(t,e){return!e||"object"!==qe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ge(t){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ye=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$e(t,e)}(i,t);var e,n,r,o=Qe(i);function i(){return Fe(this,i),o.apply(this,arguments)}return e=i,r=[{key:"define",value:function(){Ir.component("img",this)}}],(n=null)&&ze(e.prototype,n),r&&ze(e,r),i}(Be);function Xe(t){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tn(t,e){return(tn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function en(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rn(t);if(e){var o=rn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nn(this,n)}}function nn(t,e){return!e||"object"!==Xe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rn(t){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var on=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tn(t,e)}(i,t);var e,n,r,o=en(i);function i(){return Je(this,i),o.apply(this,arguments)}return e=i,r=[{key:"define",value:function(){Ir.component("embed",this)}}],(n=null)&&Ze(e.prototype,n),r&&Ze(e,r),i}(Be);function an(t){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cn(t,e){return(cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ln(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hn(t);if(e){var o=hn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fn(this,n)}}function fn(t,e){return!e||"object"!==an(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hn(t){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cn(t,e)}(i,t);var e,n,r,o=ln(i);function i(){return sn(this,i),o.apply(this,arguments)}return e=i,r=[{key:"define",value:function(){Ir.component("audio",this)}}],(n=null)&&un(e.prototype,n),r&&un(e,r),i}(Be);function _n(t){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dn(t,e){return(dn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gn(t);if(e){var o=gn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mn(this,n)}}function mn(t,e){return!e||"object"!==_n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gn(t){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dn(t,e)}(i,t);var e,n,r,o=bn(i);function i(){return yn(this,i),o.apply(this,arguments)}return e=i,r=[{key:"define",value:function(){Ir.component("video",this)}}],(n=null)&&vn(e.prototype,n),r&&vn(e,r),i}(Be);function On(t){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pn(t,e){return(Pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=An(t);if(e){var o=An(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return En(this,n)}}function En(t,e){return!e||"object"!==On(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function An(t){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pn(t,e)}(i,t);var e,n,r,o=jn(i);function i(){return kn(this,i),o.apply(this,arguments)}return e=i,r=[{key:"define",value:function(){Ir.component("track",this)}}],(n=null)&&Sn(e.prototype,n),r&&Sn(e,r),i}(Be);function Cn(t){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ln(t,e){return(Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nn(t);if(e){var o=Nn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Kn(this,n)}}function Kn(t,e){return!e||"object"!==Cn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nn(t){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Hn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ln(t,e)}(i,t);var e,n,r,o=Bn(i);function i(){return Tn(this,i),o.apply(this,arguments)}return e=i,r=[{key:"define",value:function(){Ir.component("source",this)}}],(n=null)&&xn(e.prototype,n),r&&xn(e,r),i}(Be);function In(t){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mn(t,e){return(Mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fn(t);if(e){var o=Fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qn(this,n)}}function qn(t,e){return!e||"object"!==In(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fn(t){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mn(t,e)}(i,t);var e,n,r,o=Vn(i);function i(){var t;Dn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).urlAttribute="data",t}return e=i,r=[{key:"define",value:function(){Ir.component("object",this)}}],(n=null)&&Un(e.prototype,n),r&&Un(e,r),i}(Be);function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gn(t,e){return(Gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jn(t);if(e){var o=Jn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xn(this,n)}}function Xn(t,e){return!e||"object"!==$n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jn(t){return(Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gn(t,e)}(i,t);var e,n,r,o=Yn(i);function i(){var t;Qn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).el.innerHTML="",t}return e=i,r=[{key:"define",value:function(){Ir.component("route",this)}}],(n=[{key:"setTransition",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.path.state,o=function t(e){return e.parent?e.parent.component?e.parent.component.__scope.__transition.path:t(e.parent):null},i=function(t){e.empty();var n="component";if(r.component){var o=!1;for(var i in Ir.__components)if(Ir.__components[i]===r.component){n=i,o=!0;break}if(!o)throw new Error('Router state "'.concat(r.name,'" has no defined component'))}return e.el.innerHTML="<".concat(n,">").concat(t,"</").concat(n,">"),Ir.compile(e.el,{recompile:!0})};return this.__scope.__transition={parent:o(t.path),state:t.path.state,data:t.path.data,url:t.path.url,params:t.path.params,query:t.path.query,hash:t.path.hash},n?Promise.resolve().then((function(){return r.template?r.template:r.templateUrl?O.get(r.templateUrl).then((function(t){return t.data})):void 0})).then((function(t){return i(t)})):Ir.compile(this.el,{recompile:{checkChanges:!0}})}}])&&Wn(e.prototype,n),r&&Wn(e,r),i}($);function tr(t){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function er(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?er(Object(n),!0).forEach((function(e){rr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function or(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ir(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ar=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;or(this,t),this.url=e,this.previous=n,this.path=null,this.routes=[],this.states={},this.__cancelled=!1,this.__finished=!1}var e,n,r;return e=t,(n=[{key:"redirect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return o=nr(nr({},this.path.options),o),this.cancel(),sr.state.call(sr,t,e,n,r,o)}},{key:"reload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r=nr(nr({},this.path.options),r),t=nr(nr({},this.path.params),t),e=nr(nr({},this.path.query),e),n=void 0===n?this.path.hash:n,this.redirect(this.path.state.name,t,e,n,r)}},{key:"setPath",value:function(t){t.parent=this.path||null,this.path=nr({params:{},query:{}},t),this.routes.push(this.path),this.states[this.path.state.name]=this.path}},{key:"getRoute",value:function(t){for(var e=0,n=this.routes.length;e<n;e++){var r=this.routes[e];if(r.state===t)return r}return null}},{key:"hasState",value:function(t){return!!this.states[t.name]}},{key:"isRouteChanged",value:function(t){if(!this.previous)return!0;var e=t.state;if(!this.previous.hasState(e))return!0;var n=[];for(var r in e.fullPattern.replace(sr.__paramRegex,(function(t,e,r){return n.push(r)})),e.params)-1==n.indexOf(r)&&n.push(r);var o=Object.keys(e.query),i=void 0!==e.hash,a=this.previous.getRoute(e),s={params:h.includeKeys(a.params,n),query:h.includeKeys(a.query,o)},u={params:h.includeKeys(t.params,n),query:h.includeKeys(t.query,o)};return i&&(s.hash=a.hash,u.hash=t.hash),!h.compare(s,u)}},{key:"cancel",value:function(){this.__cancelled=!0,this.finish()}},{key:"finish",value:function(){this.__finished=!0,delete this.previous;var t=sr.__queue.indexOf(this);t>=0&&sr.__queue.splice(t,1)}}])&&ir(e.prototype,n),r&&ir(e,r),t}(),sr={baseUrl:"/",states:[],hashMode:!0,transition:null,__info:{},__queue:[],__redirects:0,__init:!1,__paramRegex:/(\/?:([\w\d-]+))/g,__routeSelector:function(t){return t instanceof Zn},add:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"==tr(t)&&(e=(n=t).pattern,t=n.state,delete n.pattern,delete n.state),!t)throw new Error("Router state must have a name");var r={template:"",templateUrl:"",abstract:!1,component:null,params:{},query:{},handler:function(){},options:{}};if(Ir.options.debug&&n.component&&(n.template||n.templateUrl)&&console.warn('Router state "'.concat(t,'" must only have a component or template option')),n.template||n.templateUrl||n.component||(n.abstract=!0),this.has(t))throw new Error('Router state "'.concat(t,'" is already exists'));return this.setState(t,e,nr(nr({},r),n)),this},remove:function(t){for(var e=0,n=this.states.length;e<n;e++)if(this.states[e].name==t)return void this.states.splice(e,1)},has:function(t){for(var e=0,n=this.states.length;e<n;e++)if(this.states[e].name==t)return!0;return!1},state:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if("object"!==tr(t)&&(t=this.getState(t)),!t)throw new Error("Not found route state with name ".concat(t));(i=nr({},i)).manual=!0;var a=this.prepareStateArgs(t,n,r,o,i,!1);n=a.params,r=a.query,o=a.hash,i=a.options;var s=this.createStateUrl(t,n,r,o,i);return this.isolate((function(){return e.setUrl(s)})),this.changeState(i)},back:function(){return window.history.back.apply(window.history,arguments)},go:function(){return window.history.go.apply(window.history,arguments)},forward:function(){return window.history.forward.apply(window.history,arguments)},location:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(n=nr({},n)).manual=!0,this.isolate((function(){return e.setUrl(t)})),this.changeState(n)},init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=window.history.pushState;window.history.pushState=function(){var t=r.apply(this,arguments);return sr.changeState().catch((function(t){return console.error(t)})),t},this.__onStateChangeHandler=function(){t.changeState().catch((function(t){return console.error(t)}))},this.defaultUrl=e,this.hashMode=n,this.states.sort((function(t,e){return(t=t.name.split(".").length)-(e=e.name.split(".").length)}));for(var o=0,i=this.states.length;o<i;o++)this.initState(this.states[o]);!this.states.length&&Ir.options.debug&&console.warn("You didn't add any routes to the router"),window.addEventListener("popstate",this.__onStateChangeHandler),this.__init=!0},initState:function(t){var e=[];if(t.children=[],(e=t.name.split(".")).pop(),t.level=t.abstract?null:e.length,e.length){var n=e.join("."),r=this.getState(n);if(!r)throw new Error('Not found parent route state "'.concat(n,'" for "').concat(t.name,'"'));null!==t.level&&r.abstract&&t.level--,t.fullPattern=this.splitSlashes(r.fullPattern+"/"+t.pattern),r.children.push(t)}else t.fullPattern=t.pattern},getState:function(t){for(var e=0,n=this.states.length;e<n;e++){var r=this.states[e];if(r.name==t)return r}return null},setState:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=nr(nr({},n),{},{name:t,pattern:e});return this.states.push(r),this.__init&&this.initState(r),r},removeState:function(t){for(var e=0,n=this.states.length;e<n;e++){if(this.states[e].name==t)return void this.states.splice(e,1)}},setUrl:function(t){this.hashMode?this.setHashUrl(t):this.setHistoryUrl(t)},setHistoryUrl:function(t){window.history.pushState(void 0,void 0,t)},setHashUrl:function(t){window.location.hash="#"+(t||"/")},replaceUrl:function(t){this.hashMode?this.replaceHashUrl(t):this.replaceHistoryUrl(t)},replaceHistoryUrl:function(t){window.history.replaceState(void 0,void 0,t)},replaceHashUrl:function(t){window.history.replaceState(void 0,void 0,"#"+(t||"/"))},getUrl:function(){return this.hashMode?this.getHashUrl():this.getHistoryUrl()},getHistoryUrl:function(){return window.location.pathname+window.location.search+window.location.hash},getHashUrl:function(){return window.location.hash.replace(/^#/,"")},getUrlQuery:function(){return this.hashMode?this.getHashUrlQuery():this.getHistoryUrlQuery()},getHistoryUrlQuery:function(){return O.paramsFromQuery(window.location.search.replace(/^\?/,""))},getHashUrlQuery:function(){return O.paramsFromQuery(window.location.hash.split("?")[1]||"")},createStateUrl:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if("object"!==tr(t)&&(t=this.getState(t)),o=nr({},o),i){var a=this.prepareStateArgs(t,e,n,r,o);e=a.params,n=a.query,r=a.hash,o=a.options}var s=t.fullPattern.replace(this.__paramRegex,(function(t,n,r){return"/"+(e[r]||"")}));return s=s.replace(/^\^/,""),s=this.splitSlashes(s),Object.keys(n).length&&(s+="?"+O.paramsToQuery(n)),!this.hashMode&&r&&(s+="#"+r.replace("#","")),s},prepareStateArgs:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i={params:e,query:n,hash:r,options:o},a=0;a<4^4;a++){var s=this.prepareStateParams(t,e,i),u=this.prepareStateQuery(t,n,i),c=this.prepareStateHash(t,r,i),l=this.prepareStateOptions(t,o,i);null===c?l.emptyHash=null:""===c&&(l.emptyHash="");var f={params:s,query:u,hash:c,options:l};if(h.compare(f,i))break;i=f}return i},prepareStateParams:function(t,e,n){"object"!==tr(t)&&(t=this.getState(t));var r=t.name.split(".");e=Object.assign({},e);for(var o=r.length-1;o>=0;o--){var i=r.slice(0,r.length-o).join(".");e=this.createStateObjectArgs(e,this.getState(i).params,n)}return e},prepareStateQuery:function(t,e,n){"object"!==tr(t)&&(t=this.getState(t));var r=t.name.split(".");e=Object.assign({},e);for(var o=r.length-1;o>=0;o--){var i=r.slice(0,r.length-o).join(".");e=this.createStateObjectArgs(e,this.getState(i).query,n)}return e},prepareStateOptions:function(t,e,n){"object"!==tr(t)&&(t=this.getState(t));var r=t.name.split(".");e=Object.assign({},e);for(var o=r.length-1;o>=0;o--){var i=r.slice(0,r.length-o).join(".");e=this.createStateObjectArgs(e,this.getState(i).options,n)}return e},createStateObjectArgs:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{params:{},query:{},options:{}},r=Object.assign({},t);for(var o in e){var i=e[o];null!==r[o]&&("function"==typeof i&&(r[o]=i(n)),void 0===r[o]&&(r[o]=i))}for(var a in r)null===r[a]&&delete r[a];return r},prepareStateHash:function(t,e,n){if(null===e)return e;"object"!==tr(t)&&(t=this.getState(t));for(var r=t.name.split("."),o=r.length-1;o>=0;o--){var i=r.slice(0,r.length-o).join(".");e=this.createStateHashArgs(e,this.getState(i).hash,n)}return e},createStateHashArgs:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{params:{},query:{}};return null===t?t:"function"==typeof e?e(n):void 0===t?e:t},splitSlashes:function(t){return t.replace(/[/]+/g,"/")},getPatternContent:function(t,e){"object"!==tr(t)&&(t=this.getState(t));var n=[],r={};e=(e=e.split("?")[0]).split("#")[0];var o=t.fullPattern.replace(this.__paramRegex,(function(t,e,r){return n.push(r),"/?([^/]*)"}));o=o.replace(/([^^/]+)[/]+$/,"$1");var i=new RegExp(o,"g");return e.match(i)?(e.replace(i,(function(t){for(var e=arguments.length,o=new Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];for(var a=0,s=(o=o.slice(0,o.length-2)).length;a<s;a++){var u=o[a];u&&(r[n[a]]=u)}})),{params:r}):null},isActiveState:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"object"!==tr(t)&&(t=this.getState(t));var n=sr.transition&&!sr.transition.__finished?sr.transition.url:this.getUrl();n=this.splitSlashes("/"+n.split("?")[0]+"/");var r=t.fullPattern.replace(this.__paramRegex,"/?([^/]*)");r=r.replace(/^\^/,"").replace(/\$$/,"");var o=e?r:this.splitSlashes("^/"+r+"/$"),i=new RegExp(o);return i.test(n)},inActiveState:function(t){return sr.isActiveState(t,!0)},getRoute:function(t){var e=this,n=0;return function r(o){var i=o.child(e.__routeSelector);return i?n==t?i:(n++,r(i)):null}(Ir.root)},getArrayPatternContent:function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n],i=this.getPatternContent(o,e);if(i)return nr({state:o},i)}return null},getStatesByLevel:function(t){for(var e=[],n=0,r=this.states.length;n<r;n++){var o=this.states[n];if(!(o.level<t)){if(o.level>t)break;e.push(o)}}return e},reload:function(){var t;if(!this.transition)throw new Error("Not found an active transition to reload the state");return(t=this.transition).reload.apply(t,arguments)},isolate:function(t){var e;this.__isolated=!0;try{e=t()}catch(t){throw this.__isolated=!1,t}return this.__isolated=!1,e},changeState:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.__isolated)return Promise.resolve();var n=this.getUrl(),r=new ar(n);return this.__queue.push(r),new Promise((function(e){var n=setInterval((function(){t.__queue[0]===r&&(clearInterval(n),e())}))})).then((function(){r.previous=sr.transition||null,sr.transition=r,window.dispatchEvent(new CustomEvent("state-change",{detail:r}));var o=e.emptyHash;if(!t.__redirects){var i=getComputedStyle(document.documentElement);t.__info.scrollPos={left:window.scrollX,top:window.scrollY},t.__info.docMinHeight=i.minHeight,t.__info.docMinWidth=i.minWidth,document.documentElement.style.minHeight=document.documentElement.offsetHeight+"px",document.documentElement.style.minWidth=document.documentElement.offsetWidth+"px"}var a={},s=t.getUrlQuery(),u=t.hashMode?"":window.location.hash.replace("#",""),c=0;return function i(l){if(!l.length)return Promise.resolve();var f=t.getArrayPatternContent(l,n);if(!f)return Promise.resolve();var h=f.state;r.setPath({state:h,component:y}),a=nr(nr({},a),f.params),u=u||o;var p=t.prepareStateArgs(h,a,s,u,e);a=p.params,s=p.query,u=p.hash,(e=p.options).init=null===Ir.__init,u=u||"";var _=t.createStateUrl(h,a,s,u,e,!1);t.isolate((function(){return t.replaceUrl(_)}));var y=h.abstract?null:t.getRoute(c);if(!y&&!h.abstract)throw new Error('Not found route component for state "'.concat(h.name,'"'));r.path.params=a,r.path.query=s,r.path.hash=u,r.path.url=_,r.path.options=e,!h.abstract&&c++;var v=!0;_!=n&&(v=r.isRouteChanged(r.path));var d=v&&!1!==e.reload,b=r.previous&&r.previous.path?r.previous.path.data:void 0;return Promise.resolve(d?h.handler(r):b).then((function(t){if(r.path.data=t,h.title&&(document.title="function"==typeof h.title?h.title(r):h.title),!r.__cancelled&&!h.abstract){var e=r.previous&&r.previous.getRoute(h);return e&&!e.loaded&&(d=!0),y.setTransition(r,d).then((function(){return r.path.loaded=!0}))}})).then((function(){return i(h.children)}))}(t.getStatesByLevel(0)).then((function(){if(!r.routes.length){if(t.__redirects)throw new Error('Wrong router default url "'.concat(t.defaultUrl,'"'));if(t.defaultUrl){if(t.defaultUrl==t.getUrl())throw new Error("Not found any routes");return t.isolate((function(){return t.replaceUrl(t.defaultUrl)})),t.__redirects++,r.finish(),t.changeState(e)}Ir.options.debug&&console.warn('Not found a default route. You can pass it in "router.init(defaultUrl)" function')}return!t.hashMode&&r.path&&r.path.hash||window.scrollTo(nr({},e.saveScrollPosition?t.__info.scrollPos:{top:0,left:0})),document.documentElement.style.minHeight=t.__info.docMinHeight,document.documentElement.style.minWidth=t.__info.docMinWidth,t.__redirects=0,t.__info={},window.dispatchEvent(new CustomEvent("state-changed",{detail:r})),r.finish(),r}))})).catch((function(t){throw r&&r.finish(),t}))},deinit:function(){window.removeEventListener("popstate",this.__onStateChangeHandler),this.__init=!1}};sr.Transition=ar;const ur=sr;function cr(t){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hr(t,e){return(hr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yr(t);if(e){var o=yr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _r(this,n)}}function _r(t,e){return!e||"object"!==cr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yr(t){return(yr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hr(t,e)}(i,t);var e,n,r,o=pr(i);function i(){var t;lr(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).state=null,t.params={},t.query={},t.options={},t.isUrl=t.el.hasAttribute("url"),t}return e=i,r=[{key:"define",value:function(){Ir.component("a",this)}}],(n=[{key:"compiled",value:function(){var t=this;this.el.addEventListener("click",(function(e){e.preventDefault(),t.isUrl?ur.location(t.attrs.url,t.options):ur.state(t.state.name,t.params,t.query,t.hash,t.options)})),this.onStateChanged=function(){return t.state&&t.setActivity()},window.addEventListener("state-changed",this.onStateChanged),this.attr("state",this.setState),this.attr("params",this.setParams),this.attr("query",this.setQuery),this.attr("hash",this.setHash),this.attr("options",this.setOptions),this.attr("url",this.setUrl),this.attr("state",this.resetHref,{callOnStart:!1}),this.attr("params",this.resetHref,{callOnStart:!1}),this.attr("query",this.resetHref,{callOnStart:!1}),this.attr("hash",this.resetHref,{callOnStart:!1}),this.attr("url",this.resetHref,{callOnStart:!1}),this.resetHref()}},{key:"removed",value:function(){window.removeEventListener("state-changed",this.onStateChanged)}},{key:"setUrl",value:function(t){this.url=t}},{key:"setState",value:function(t){this.state=this.getState(t),this.setActivity()}},{key:"setActivity",value:function(){this.scope.isActiveState=ur.isActiveState(this.state),this.scope.inActiveState=ur.inActiveState(this.state)}},{key:"setParams",value:function(t){if("object"!=cr(t)||!t)throw new Error("Router state params must be an object");this.params=t}},{key:"setQuery",value:function(t){if("object"!=cr(t)||!t)throw new Error("Router state query must be an object");this.query=t}},{key:"setHash",value:function(t){if("string"!=typeof t&&null!=t)throw new Error("Router state hash must be a string|null");this.hash=t}},{key:"setOptions",value:function(t){if("object"!=cr(t)||!t)throw new Error("Router state options must be an object");this.options=t}},{key:"getState",value:function(t){var e=ur.getState(t);if(!e)throw new Error('Not found router state with name "'.concat(t,'"'));return e}},{key:"resetHref",value:function(){this.url?this.attrs.href=this.url:this.attrs.href=ur.createStateUrl(this.state,this.params,this.query,this.hash,this.options)}}])&&fr(e.prototype,n),r&&fr(e,r),i}($);function dr(t){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gr(t,e){return(gr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Or(this,n)}}function Or(t,e){return!e||"object"!==dr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kr(t){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}vr.matches="[state]:not([url]),[url]:not([state])",vr.controlAttributes=!0;var Sr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gr(t,e)}(i,t);var e,n,r,o=wr(i);function i(){var t;br(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).prevent(),t}return e=i,r=[{key:"define",value:function(){Ir.component("script",this)}}],(n=null)&&mr(e.prototype,n),r&&mr(e,r),i}($);function Pr(t){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Er(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ar(t,e){return(Ar=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Tr(t);if(e){var o=Tr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Cr(this,n)}}function Cr(t,e){return!e||"object"!==Pr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tr(t){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ar(t,e)}(i,t);var e,n,r,o=Rr(i);function i(){var t;jr(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).prevent(),t}return e=i,r=[{key:"define",value:function(){Ir.component("style",this)}}],(n=null)&&Er(e.prototype,n),r&&Er(e,r),i}($);function Lr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Br(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lr(Object(n),!0).forEach((function(e){Kr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Kr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nr(t){return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Hr={options:{debug:!0},__init:null,__root:null,__components:{},__aliases:{},__scopes:{},__storeLinks:{},__window:{},__tags:{},__isolation:null,__evaluation:null,__wrapping:!1,__disableStoreProxy:!1,__rootOuterHTML:"",__onError:function(){return Hr.triggerInit(!1)},htmlBooleanAttributes:["disabled","contenteditable","hidden"],components:{},services:{}};Hr.Component=$,Hr.EventEmitter=a,Hr.Scope=_,Hr.utils=h,Hr.globals=T,Hr.components.A=vr,Hr.components.Audio=pn,Hr.components.Content=be,Hr.components.For=_t,Hr.components.Embed=on,Hr.components.If=et,Hr.components.Include=je,Hr.components.Input=Ft,Hr.components.Iframe=Ve,Hr.components.Image=Ye,Hr.components.Object=zn,Hr.components.Radio=ee,Hr.components.Route=Zn,Hr.components.Select=jt,Hr.components.Source=Hn,Hr.components.Text=Kt,Hr.components.Textarea=le,Hr.components.Track=Rn,Hr.components.Url=Be,Hr.components.Video=wn,Hr.components.Script=Sr,Hr.components.Style=xr,Hr.services.request=O,Hr.services.router=ur,Hr.services.store=R,Hr.define=function(){vr.define(),pn.define(),be.define(),$.define(),on.define(),_t.define(),je.define(),Ve.define(),Ye.define(),Ft.define(),et.define(),zn.define(),ee.define(),Zn.define(),jt.define(),Hn.define(),le.define(),Rn.define(),wn.define(),Sr.define(),xr.define()},Hr.clearGlobals=function(){for(var t in T)delete T[t];for(var e in this.__window.Element.prototype)Element.prototype[e]=this.__window.Element.prototype[e];for(var n in this.__window.Array.prototype)Array.prototype[n]=this.__window.Array.prototype[n];for(var r in this.options.globals)this.options.globals[r]=this.unwrap(this.options.globals[r]);window.setTimeout=this.__window.setTimeout,window.setInterval=this.__window.setInterval,window.Promise=this.__window.Promise,window.removeEventListener("error",this.__onError)},Hr.joinBindingKeys=function(t){return t.map((function(t){return t.toString()})).join(".")},Hr.addScope=function(t){if(this.__scopes[t.__name])throw new Error("Scope name ".concat(t.__name," already exists"));this.__scopes[t.__name]=t},Hr.getScope=function(t){return this.__scopes[t]},Hr.removeScope=function(t){delete this.__scopes[t]},Hr.getAkiliParents=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[];function r(t){t.parentNode&&(t.parentNode.__akili&&(n.push(t.parentNode),!e)||r(t.parentNode))}return r(t),e?n:n[0]},Hr.setTemplate=function(t,e){return e=e.replace(/\${(((?!\${)\s*this\.__content\s*)*)}/,t.innerHTML),t.innerHTML=e,t.innerHTML},Hr.createScopeName=function(){var t=this;return h.createRandomString(16,(function(e){return!!t.__scopes[e]}))},Hr.isolate=function(t){var e,n=this.__isolation;!n&&(this.__isolation={});try{if(e=t(),n)return e}catch(t){throw this.__isolation=null,t}var r=[];for(var o in this.__isolation)r.push(this.__isolation[o]);this.__isolation=null;for(var i=0,a=r.length;i<a;i++){var s=r[i];if(s.component)s.component.__isRemoved||(s.component.scope[s.rootKey]=h.getPropertyByKeys(s.rootKeys,s.component.__scope));else{var u=h.copy(h.getPropertyByKeys(s.rootKeys,R.__target),{plain:!0});this.root&&this.root.__storeTriggerByName(s.rootKey,u)}}return e},Hr.unevaluate=function(t){var e,n=this.__evaluation;this.__evaluation=null;try{e=t()}catch(t){throw this.__evaluation=n,t}return this.__evaluation=n,e},Hr.wrapping=function(t){var e,n=this.__wrapping;!n&&(this.__wrapping=!0);try{if(e=this.isolate(t),n)return e}catch(t){throw this.__wrapping=!1,t}return this.__wrapping=!1,e},Hr.unisolate=function(t){var e,n=this.__isolation;this.__isolation=null;try{e=t()}catch(t){throw this.__isolation=n,t}return this.__isolation=n,e},Hr.initialize=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.recompile,r=t.__akili;if(r)return n?(r.__recompile(!0===n?{}:n),r):void 0;var o=t===this.__root,i=h.toDashCase(t.getAttribute("component")||t.tagName.toLowerCase()),a=this.__components[i];t:if(!a){var s=Object.keys(this.__aliases);if(!s.length)break t;var u=s.join(",");if(!t.matches(u))break t;for(var c=0,l=s.length;c<l;c++){var f=s[c];if(t.matches(f)){a=this.__components[this.__aliases[f]];break}}}return!a&&!o||(a||(a=this.Component),a.matches&&!t.matches(a.matches)||(r=new a(t,{})).__cancelled||Hr.getAkiliParents(t).find((function(t){return t.__akili.__prevent})))?void 0:(r.__create(),r)},Hr.compile=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recompile:!1},r=[];if(window.AKILI_SSR)for(var o=t.querySelectorAll("[no-ssr]"),i=0,a=o.length;i<a;i++)o[i].remove();var s=function t(o){var i=e.initialize(o,n),a=o.children;i&&r.push(i);for(var s=0,u=a.length;s<u;s++){t(a[s])}};s(t);for(var u=[],c=0,l=r.length;c<l;c++){var f=r[c];u.push(f.__compile())}return Promise.all(u).then((function(){for(var t=[],e=r.length-1;e>=0;e--){var n=r[e];t.push(n.__resolve())}return Promise.all(t)}))},Hr.component=function(t,e){if(t=t.toLowerCase(),!e)return this.__components[t]||null;this.__components[t]&&Hr.options.debug&&console.warn("Component ".concat(t," already was added")),this.__components[t]=e},Hr.removeComponent=function(t){delete this.__components[t]},Hr.alias=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!(e=e.toLowerCase()))return this.__aliases[t]||null;this.__aliases[t]&&Hr.options.debug&&console.warn("Alias with selector ".concat(t," already was added")),this.__aliases[t]=e},Hr.removeAlias=function(t){delete this.__aliases[t]},Hr.isolateArrayPrototype=function(){var t=this;this.__window.Array={prototype:{}};for(var e=Object.getOwnPropertyNames(Array.prototype),n=function(n,r){var o=e[n],i=Array.prototype[o];if("function"!=typeof i||"constructor"==o)return"continue";t.__window.Array.prototype[o]=i,Array.prototype[o]=function(){var t=arguments,e=this;return Hr.unevaluate((function(){return e.__isProxy?Hr.isolate((function(){return i.apply(e,t)})):i.apply(e,t)}))}},r=0,o=e.length;r<o;r++)n(r)},Hr.isolateWindowFunctions=function(){this.__window.setTimeout=setTimeout,this.__window.setInterval=setInterval,this.__window.Promise=window.Promise,window.setTimeout=this.createCallbackIsolation(window.setTimeout,0),window.setInterval=this.createCallbackIsolation(window.setInterval,0),window.AKILI_SSR||(window.Promise.constructor=this.createCallbackIsolation(window.Promise.constructor),window.Promise.prototype.then=this.createCallbackIsolation(window.Promise.prototype.then,[0,"last"]),window.Promise.prototype.catch=this.createCallbackIsolation(window.Promise.prototype.catch))},Hr.isolateGlobals=function(){T.__target.utils=this.wrap(h),this.isolateEvents(),this.isolateArrayPrototype(),this.isolateWindowFunctions()},Hr.isolateEvents=function(){this.__window.Element={prototype:{}},window.AKILI_SSR||(this.__window.Element.prototype.addEventListener=Element.prototype.addEventListener,this.__window.Element.prototype.removeEventListener=Element.prototype.removeEventListener,this.__window.Element.prototype.remove=Element.prototype.remove,Element.prototype.remove=function(){return delete this.__akiliListeners,Hr.__window.Element.prototype.remove.apply(this,arguments)},Element.prototype.addEventListener=function(t,e){var n=[].slice.call(arguments);return this.__akiliListeners||(this.__akiliListeners={}),this.__akiliListeners[t]||(this.__akiliListeners[t]=[]),"function"==typeof e&&(n[1]=function(){var t=arguments,n=this;return Hr.isolate((function(){return e.apply(n,t)}))}),this.__akiliListeners[t].push({link:e,fn:n[1]}),Hr.__window.Element.prototype.addEventListener.apply(this,n)},Element.prototype.removeEventListener=function(t,e){var n=[].slice.call(arguments);this.__akiliListeners||(this.__akiliListeners={}),this.__akiliListeners[t]||(this.__akiliListeners[t]=[]);for(var r=0,o=this.__akiliListeners[t].length;r<o;r++){var i=this.__akiliListeners[t][r];if(i.link===e){this.__akiliListeners[t].splice(r,1),n[1]=i.fn,r--,o--;break}}return this.__akiliListeners[t].length||delete this.__akiliListeners[t],Hr.__window.Element.prototype.removeEventListener.apply(this,n)})},Hr.createCallbackIsolation=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"last";return function(){var n=[].slice.call(arguments);!Array.isArray(e)&&(e=[e]);for(var r=function(t,r){var o=e[t],i=o,a=n[o];if("last"==o&&(i=n.length-1,a=n[i]),"function"!=typeof a)return"continue";a.__isolated||(n[i]=function(){var t=arguments;return Hr.isolate((function(){return a.apply(a,t)}))},Object.defineProperty(n[i],"__isolated",{enumerable:!1,value:a}))},o=0,i=e.length;o<i;o++)r(o,i);return t.apply(this,n)}},Hr.wrap=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if("function"==typeof t){if((t=this.wrapFunction(t,e))===n)return t}else if(!t||"object"!=Nr(t)||Array.isArray(t))return t;for(var r=Object.getOwnPropertyNames(t),o=0,i=r.length;o<i;o++){var a=r[o],s=Object.getOwnPropertyDescriptor(t,a);s.configurable&&s.writable&&(e.reverse?Object.defineProperty(t,a,Br(Br({},s),{},{value:t[a].__akili||t[a]})):Object.defineProperty(t,a,Br(Br({},s),{},{value:this.wrap(t[a],e)})))}return t},Hr.unwrap=function(t){return this.wrap(t,{reverse:!0})},Hr.wrapFunction=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.__akili)return t;var n=function(){var n=arguments,r=this;return e.tag&&Hr.__evaluation&&Hr.addTag(e.tag,Hr.__evaluation.node),Hr.wrapping((function(){return t.apply(r,n)}))},r=Object.keys(t);n.prototype=t.prototype;for(var o=0,i=r.length;o<i;o++){var a=r[o];n[a]=t[a]}return Object.defineProperty(n,"__akili",{enumerable:!1,value:t}),n},Hr.addTag=function(t,e){this.hasTag(t,e)||(this.__tags[e.__name]||(this.__tags[e.__name]={}),this.__tags[e.__name][t]||(this.__tags[e.__name][t]=[]),this.__tags[e.__name][t].push({node:e}))},Hr.getTag=function(t,e){if(!e){for(var n in this.__tags)for(var r in this.__tags[n])if(r==t)return this.__tags[n][r];return null}return this.__tags[e.__name]&&this.__tags[e.__name][t]?this.__tags[e.__name][t]:null},Hr.hasTag=function(t,e){return!!this.getTag(t,e)},Hr.removeTag=function(t,e){if("object"==Nr(t)&&(e=t,t=void 0),t)if(e){for(var n in this.__tags[e.__name])n==t&&delete this.__tags[e.__name][n];Object.keys(this.__tags[e.__name]).length||delete this.__tags[e.__name]}else for(var r in this.__tags){for(var o in this.__tags[r])o==t&&delete this.__tags[r][o];Object.keys(this.__tags[r]).length||delete this.__tags[r]}else delete this.__tags[e.__name]},Hr.triggerTag=function(t){for(var e in this.__tags)for(var n in this.__tags[e])if(n==t)for(var r=this.__tags[e][n],o=0,i=r.length;o<i;o++){var a=r[o];a.node.__component.__evaluateNode(a.node,!1)}},Hr.handleErrors=function(){window.addEventListener("error",this.__onError)},Hr.triggerInit=function(t){Hr.__init=t,window.dispatchEvent(new CustomEvent("akili-init",{detail:t}))},Hr.init=function(t){var e=this;if(t=t||document.body,this.__rootOuterHTML=t.outerHTML,!(t instanceof Element))throw new Error("Root element must be an html element");if(t===document.documentElement)throw new Error('"html" can\'t be the root element');return this.__root=t,window.AKILI_SERVER?(Hr.initServerSideHtml(window.AKILI_SERVER.html),Hr.initServerSideRequestCache(window.AKILI_SERVER.requestCache)):window.AKILI_CLIENT={html:this.prepareServerSideHtml()},this.compile(this.__root).then((function(){if(ur.__init)return ur.changeState()})).then((function(){window.AKILI_CLIENT&&(window.AKILI_CLIENT.requestCache=e.prepareServerSideRequestCache()),e.triggerInit(!0)})).catch((function(t){throw e.triggerInit(!1),t}))},Hr.deinit=function(){for(var t in this.__root&&(this.__root.outerHTML=this.__rootOuterHTML),this.__scopes){var e=this.__scopes[t].__component;e&&e.remove()}this.__rootOuterHTML="",this.__init=null,this.__root=null,this.__scopes={},this.__storeLinks={},this.__tags={}},Hr.destroy=function(){this.deinit(),this.clearGlobals();for(var t=Object.keys(R.__target),e=0,n=t.length;e<n;e++)delete R.__target[t[e]];for(var r in ur.__init&&ur.deinit(),delete window.AKILI_SERVER,delete window.AKILI_CLIENT,delete window.AKILI_SSR,Hr)delete Hr[r];delete window.Akili},Hr.initServerSideHtml=function(t){for(var e=this.__root.attributes.length-1;e>=0;e--)this.__root.removeAttribute(this.__root.attributes[e].name);var n=(new DOMParser).parseFromString(t,"text/html").querySelector(this.__root===document.body?"body":"body > *");this.__root.innerHTML=n.innerHTML;for(var r=n.attributes.length-1;r>=0;r--){var o=n.attributes[r];this.__root.setAttribute(o.name,o.value)}},Hr.initServerSideRequestCache=function(t){var e=function(t,e){for(var n in e)t.__cache[n]=e[n]};for(var n in t){e("__main"===n?O:O.__instances[n],t[n])}},Hr.prepareServerSideHtml=function(){return this.__root.outerHTML},Hr.prepareServerSideRequestCache=function(){var t={__main:O.__cache};for(var e in O.__instances)t[e]=O.__instances[e].__cache;return t};const Ir=Hr;return window.Akili=Hr,Hr.define(),Hr.handleErrors(),Hr.isolateGlobals(),e=e.default})()}));