/*!
 * Akili is a javascript framework
 * 
 * const Akili = makeItEasy(js + html);
 * 
 * @version 0.7.14
 * @author Alexandr Balasyan <mywebstreet@gmail.com>
 * {@link http://akilijs.com}
 * {@link https://github.com/ortexx/akili}
 */!function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(n(2)),i=r(n(13)),a=r(n(6)),s=r(n(14)),c=r(n(15)),f=r(n(16)),h=r(n(5)),_=r(n(17)),p=r(n(18)),d=r(n(19)),v=r(n(20)),y=r(n(21)),b=r(n(22)),m=r(n(23)),g=r(n(24)),w=r(n(25)),k=r(n(26)),O=r(n(27)),P=r(n(11)),j=r(n(1)),S=r(n(28)),A=r(n(7)),E=r(n(8)),T=r(n(4)),C=r(n(12)),L=r(n(9)),x=r(n(3)),B=r(n(10));function r(e){return e&&e.__esModule?e:{default:e}}var M={__defaults:[],setDefaults:function(){var e=this;for(var t in this.options={debug:!0},this.__init=null,this.__cleared=!1,this.__components={},this.__aliases={},this.__scopes={},this.__storeLinks={},this.__window={},this.__isolation=null,this.__evaluation=null,this.__wrapping=!1,this.__onError=function(){return e.triggerInit(!1)},this.htmlBooleanAttributes=["disabled","contenteditable","hidden"],B.default)delete B.default[t];B.default.utils=x.default,this.components={},this.services={},this.Component=o.default,this.EventEmitter=E.default,this.Scope=A.default,this.utils=x.default,this.globals=B.default,this.components.A=S.default,this.components.Audio=m.default,this.components.Content=p.default,this.components.For=a.default,this.components.Embed=b.default,this.components.If=i.default,this.components.Include=d.default,this.components.Input=c.default,this.components.Iframe=v.default,this.components.Image=y.default,this.components.Object=O.default,this.components.Radio=f.default,this.components.Route=P.default,this.components.Select=s.default,this.components.Source=k.default,this.components.Text=h.default,this.components.Textarea=_.default,this.components.Track=w.default,this.components.Url=j.default,this.components.Video=g.default,this.services.request=T.default,this.services.router=C.default,this.services.store=L.default,this.define(),this.errorHandling(),this.isolateEvents(),this.isolateArrayPrototype(),this.isolateWindowFunctions();for(var n=0,r=this.__defaults.length;n<r;n++)this.__defaults[n]()},define:function(){S.default.define(),m.default.define(),p.default.define(),o.default.define(),b.default.define(),a.default.define(),d.default.define(),v.default.define(),y.default.define(),c.default.define(),i.default.define(),O.default.define(),f.default.define(),P.default.define(),s.default.define(),k.default.define(),_.default.define(),w.default.define(),g.default.define()},defaults:function(e){this.__defaults.push(e),e()},clearGlobals:function(){if(!this.__cleared){for(var e in this.__window.Element.prototype)Element.prototype[e]=this.__window.Element.prototype[e];for(var t in this.__window.Array.prototype)Array.prototype[t]=this.__window.Array.prototype[t];for(var n in this.options.globals)this.options.globals[n]=this.unwrap(this.options.globals[n]);window.setTimeout=this.__window.setTimeout,window.setInterval=this.__window.setInterval,window.Promise=this.__window.Promise,window.removeEventListener("error",this.__onError),this.__cleared=!0}},joinBindingKeys:function(e){return e.map(function(e){return e.toString()}).join(".")},addScope:function(e){if(this.__scopes[e.__name])throw new Error("Scope name "+e.__name+" already exists");this.__scopes[e.__name]=e},getScope:function(e){return this.__scopes[e]},removeScope:function(e){var t=this.__scopes[e];t.__el=null,t.__component=null,t.__parent=null,this.__scopes[e]=null,delete this.__scopes[e]},getAkiliParents:function(e){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=[];return function e(t){t.parentNode&&(t.parentNode.__akili&&(r.push(t.parentNode),!n)||e(t.parentNode))}(e),n?r:r[0]},setTemplate:function(e,t){return t=t.replace(/\${(((?!\${)\s*this\.__content\s*)*)}/,e.innerHTML),e.innerHTML=t,e.innerHTML},createScopeName:function(){var t=this;return x.default.createRandomString(16,function(e){return!!t.__scopes[e]})},isolate:function(e){if(this.__isolation)return e();this.__isolation={};var t=e(),n=[];for(var r in this.__isolation)this.__isolation.hasOwnProperty(r)&&n.push(this.__isolation[r]);this.__isolation=null;for(var o=0,i=n.length;o<i;o++){var a=n[o],s=x.default.getPropertyByKeys(a.keys,a.component.__scope);a.component.__isResolved&&a.component.__triggerStoreAndAttr(a.keys),a.component.__evaluateByKeys(a.keys,s,a.isDeleted)}return n=null,t},unevaluate:function(e){var t,n=this.__evaluation;return this.__evaluation=null,t=e(),this.__evaluation=n,t},wrapping:function(e){if(this.__wrapping)return e();this.__wrapping=!0;var t=e();return this.__wrapping=!1,t},unisolate:function(e){var t,n=this.__isolation;return this.__isolation=null,t=e(),this.__isolation=n,t},nextTick:function(t){return new Promise(function(e){return setTimeout(function(){return Promise.resolve(t()).then(e)})})},initialize:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).recompile,n=e.__akili;if(n)return t?(n.__recompile(!0===t?{}:t),n):void 0;var r=e===this.__root,o=x.default.toDashCase(e.getAttribute("component")||e.tagName.toLowerCase()),i=this.__components[o];e:if(!i){var a=Object.keys(this.__aliases);if(!a.length)break e;var s=a.join(",");if(!e.matches(s))break e;for(var u=0,l=a.length;u<l;u++){var c=a[u];if(e.matches(c)){i=this.__components[this.__aliases[c]];break}}}return!i&&!r||(i||(i=this.Component),i.matches&&!e.matches(i.matches)||(n=new i(e,{})).__cancelled||M.getAkiliParents(e).find(function(e){return e.__akili.__prevent}))?void 0:(n.__create(),n)},compile:function(e){var a=this,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{recompile:!1},u=[];!function e(t){var n=a.initialize(t,s),r=t.children;n&&u.push(n);for(var o=0,i=r.length;o<i;o++)e(r[o])}(e);for(var t=[],n=0,r=u.length;n<r;n++){var o=u[n];t.push(o.__compile())}return Promise.all(t).then(function(){for(var e=[],t=u.length-1;0<=t;t--){var n=u[t];e.push(n.__resolve())}return Promise.all(e)})},component:function(e,t){if(e=e.toLowerCase(),!t)return this.__components[e]||null;this.__components[e]&&M.options.debug&&console.warn("Component "+e+" already was added"),this.__components[e]=t},removeComponent:function(e){delete this.__components[e]},alias:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if(!(t=t.toLowerCase()))return this.__aliases[e]||null;this.__aliases[e]&&M.options.debug&&console.warn("Alias with selector "+e+" already was added"),this.__aliases[e]=t},removeAlias:function(e){delete this.__aliases[e]},isolateArrayPrototype:function(){var o=this;this.__window.Array={prototype:{}};for(var i=Object.getOwnPropertyNames(Array.prototype),e=function(e,t){var n=i[e],r=Array.prototype[n];if("function"!=typeof r||"constructor"==n)return"continue";o.__window.Array.prototype[n]=r,Array.prototype[n]=function(){var e=this,t=arguments;return M.unevaluate(function(){return e.__isProxy?M.isolate(function(){return r.apply(e,t)}):r.apply(e,t)})}},t=0,n=i.length;t<n;t++)e(t)},isolateWindowFunctions:function(){this.__window.setTimeout=setTimeout,this.__window.setInterval=setInterval,this.__window.Promise=window.Promise,window.setTimeout=this.createCallbackIsolation(window.setTimeout,0),window.setInterval=this.createCallbackIsolation(window.setInterval,0),window.AKILI_SSR||(window.Promise.constructor=this.createCallbackIsolation(window.Promise.constructor),window.Promise.prototype.then=this.createCallbackIsolation(window.Promise.prototype.then,[0,"last"]),window.Promise.prototype.catch=this.createCallbackIsolation(window.Promise.prototype.catch))},isolateEvents:function(){this.__window.Element={prototype:{}},this.__window.Element.prototype.addEventListener=Element.prototype.addEventListener,this.__window.Element.prototype.removeEventListener=Element.prototype.removeEventListener,this.__window.Element.prototype.remove=Element.prototype.remove,Element.prototype.remove=function(){return delete this.__akiliListeners,M.__window.Element.prototype.remove.apply(this,arguments)},Element.prototype.addEventListener=function(e,n){var t=[].slice.call(arguments);return this.__akiliListeners||(this.__akiliListeners={}),this.__akiliListeners[e]||(this.__akiliListeners[e]=[]),"function"==typeof n&&(t[1]=function(){var e=this,t=arguments;return M.isolate(function(){return n.apply(e,t)})}),this.__akiliListeners[e].push({link:n,fn:t[1]}),M.__window.Element.prototype.addEventListener.apply(this,t)},Element.prototype.removeEventListener=function(e,t){var n=[].slice.call(arguments);this.__akiliListeners||(this.__akiliListeners={}),this.__akiliListeners[e]||(this.__akiliListeners[e]=[]);for(var r=0,o=this.__akiliListeners[e].length;r<o;r++){var i=this.__akiliListeners[e][r];if(i.link===t){this.__akiliListeners[e].splice(r,1),n[1]=i.fn,r--,o--;break}}return this.__akiliListeners[e].length||delete this.__akiliListeners[e],M.__window.Element.prototype.removeEventListener.apply(this,n)}},createCallbackIsolation:function(r){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"last";return function(){var i=[].slice.call(arguments);!Array.isArray(a)&&(a=[a]);for(var e=function(e,t){var n=a[e],r=n,o=i[n];if("last"==n&&(r=i.length-1,o=i[r]),"function"!=typeof o)return"continue";o.__isolated||(i[r]=function(){var e=arguments;return M.isolate(function(){return o.apply(o,e)})},Object.defineProperty(i[r],"__isolated",{enumerable:!1,value:o}))},t=0,n=a.length;t<n;t++)e(t);return r.apply(this,i)}},wrap:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e;if("function"==typeof e){if((e=this.wrapFunction(e))===n)return e}else if(!e||"object"!=(void 0===e?"undefined":l(e))||Array.isArray(e))return e;for(var r=Object.getOwnPropertyNames(e),o=0,i=r.length;o<i;o++){var a=r[o],s=Object.getOwnPropertyDescriptor(e,a);s.configurable&&s.writable&&(t.reverse?Object.defineProperty(e,a,u({},s,{value:e[a].__akili||e[a]})):Object.defineProperty(e,a,u({},s,{value:this.wrap(e[a],t)})))}return e},unwrap:function(e){return this.wrap(e,{reverse:!0})},wrapFunction:function(n){if(n.__akili)return n;var e=function(){var e=this,t=arguments;return M.wrapping(function(){return n.apply(e,t)})},t=Object.keys(n);e.prototype=n.prototype;for(var r=0,o=t.length;r<o;r++){var i=t[r];e[i]=n[i]}return Object.defineProperty(e,"__akili",{enumerable:!1,value:n}),e},evaluateTag:function(e){if(this.root){Array.isArray(e)||(e=[e]);for(var t=this.root.children(),n=0,r=t.length;n<r;n++)for(var o=t[n],i=o.__tags,a=0,s=e.length;a<s;a++){var u=e[a];if(i[u])for(var l=0,c=i[u].length;l<c;l++){var f=i[u][l];o.__evaluateNode(f.node,!1)}}}},removeTag:function(e){if(this.root){Array.isArray(e)||(e=[e]);for(var t=this.root.children(),n=0,r=t.length;n<r;n++)for(var o=t[n],i=0,a=e.length;i<a;i++)o.__removeTag(e[i])}},errorHandling:function(){window.addEventListener("error",this.__onError)},triggerInit:function(e){M.__init=e,window.dispatchEvent(new CustomEvent("akili-init",{detail:e}))},init:function(e){var t=this;if(!((e=e||document.body)instanceof Element))throw new Error("Root element must be an html element");if(e===document.documentElement)throw new Error('"html" can\'t be the root element');for(var n in this.__root=e,window.AKILI_SERVER?(M.initServerSideHtml(window.AKILI_SERVER.html),M.initServerSideRequestCache(window.AKILI_SERVER.requestCache)):window.AKILI_CLIENT={html:this.prepareServerSideHtml()},this.options.globals)this.options.globals[n]=this.wrap(this.options.globals[n],{tag:"globals."+n});return this.compile(this.__root).then(function(){if(C.default.__init)return C.default.changeState({init:!0})}).then(function(){window.AKILI_CLIENT&&(window.AKILI_CLIENT.requestCache=t.prepareServerSideRequestCache()),t.triggerInit(!0)}).catch(function(e){throw t.triggerInit(!1),e})},initServerSideHtml:function(e){for(var t=this.__root.attributes.length-1;0<=t;t--)this.__root.removeAttribute(this.__root.attributes[t].name);var n=(new DOMParser).parseFromString(e,"text/html").querySelector(this.__root===document.body?"body":"body > *");this.__root.innerHTML=n.innerHTML;for(var r=n.attributes.length-1;0<=r;r--){var o=n.attributes[r];this.__root.setAttribute(o.name,o.value)}},initServerSideRequestCache:function(e){var t=function(e,t){for(var n in t)e.__cache[n]=t[n]};for(var n in e){t("__main"===n?T.default:T.default.__instances[n],e[n])}},prepareServerSideHtml:function(){return this.__root.outerHTML},prepareServerSideRequestCache:function(){var e={__main:T.default.__cache};for(var t in T.default.__instances)e[t]=T.default.__instances[t].__cache;return e},deinit:function(){this.clearGlobals(),C.default.deinit(),T.default.deinit();for(var e=Object.keys(L.default.__target),t=0,n=e.length;t<n;t++)delete L.default.__target[e[t]];this.setDefaults()}};window.Akili=M,(t.default=M).setDefaults()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=n(2),a=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return o.urlAttribute="src",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.default),o(i,[{key:"compiled",value:function(){this.attr("url",this.setUrl)}},{key:"setUrl",value:function(e){this.attrs[this.urlAttribute]=e}}]),i}();s.matches="[url]",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.systemAttributes=t.evaluationRegexGlobal=t.evaluationRegex=void 0;var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),m=i(n(0)),g=i(n(7)),o=i(n(4)),_=i(n(9)),s=i(n(10)),w=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var u=t.evaluationRegex=/\${(((?!\${).)*)}/,a=t.evaluationRegexGlobal=new RegExp(u.source,"g"),c=t.systemAttributes=["component","scope"],h=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),!(e instanceof Element))throw new Error("You must pass an html element to the component constructor");this.__isMounted=!1,this.__isCompiled=!1,this.__isResolved=!1,this.__cancelled=!1,this.__prevent=!1,this.__bindings={},this.__tags={},this.__evaluatingEvent=null,this.__recompiling=null,this.__compiling=null,this.__disableProxy={},this.__disableStoreKeys={},this.__disableAttrKeys={},this.__children=[],this.__parent=null,this.__parents=[],this.__attrs={},this.__attrLinks={},this.__storeLinks={},this.__attributeOf=null,(this.__evaluationComponent=this).scope=t,this.el=e}return r(n,null,[{key:"define",value:function(){m.default.component("component",n)}},{key:"parse",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};n=f({},s.default,n);var r=[],o=[],i=w.default.split(t,";",['"',"'","`"]);for(var a in i[i.length-1]="return "+i[i.length-1],n)r.push(a),o.push(n[a]);return(new(Function.prototype.bind.apply(Function,[null].concat(r,[""+i.join("; ")])))).apply(e,o)}}]),r(n,[{key:"__createCompilationOptions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return f({checkChanges:!1,setEvents:!0,setParents:!0,setBooleanAttributes:!0,defineAttributes:!0},e)}},{key:"__createRecompilationOptions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return f({},this.__createCompilationOptions(),{setEvents:!1,setParents:!1,setBooleanAttributes:!1,defineAttributes:!1},e)}},{key:"__recompile",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.__isMounted=!1,this.__recompiling=!0,this.__evaluationComponent.__disableProxy={},this.__compiling=this.__createRecompilationOptions(e),this.__compiling.setEvents&&this.__setEvents(),this.__compiling.setParents&&this.__setParents(),this.__compiling.setBooleanAttributes&&this.__setBooleanAttributes(),this.__compiling.defineAttributes&&this.__defineAttributes()}},{key:"__create",value:function(){var e=this;this.__compiling=this.__createCompilationOptions(),this.__initialize(),this.__setEvents(),this.__setParents(),this.__setBooleanAttributes(),this.__defineAttributes(),m.default.isolate(function(){return e.created(e.attrs)})}},{key:"__compile",value:function(){var a=this,e=this.__controlAttributes||!this.__evaluateParent,t=Promise.resolve();this.__attributeOf=e?this:this.__evaluateParent.__akili,(!this.__recompiling||this.__compiling.newParent||this.__controlAttributes)&&this.__interpolateAttributes(this.el,this.__attributeOf);!function e(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];3==i.nodeType&&a.__initializeNode(i,n)?a.__evaluateNode(i,!!a.__compiling&&a.__compiling.checkChanges):1!=i.nodeType||i.__akili||(a.__interpolateAttributes(i),e(i.childNodes,i))}}(this.el.childNodes,this.el),this.__isMounted=!0;var n=void 0;return this.__recompiling?n=m.default.isolate(function(){a.attrs.onRecompiled&&a.attrs.onRecompiled.trigger(void 0,{bubbles:!1}),a.recompiled()}):(n=m.default.isolate(function(){return a.attrs.onCompiled&&a.attrs.onCompiled.trigger(void 0,{bubbles:!1}),a.compiled()}),this.constructor.templateUrl&&(t=o.default.get(this.constructor.templateUrl,{cache:this.constructor.templateCache}).then(function(e){return a.el.innerHTML=a.__content,m.default.setTemplate(a.el,e.data),delete a.__content,m.default.compile(a.el,{recompile:!0})}))),this.__recompiling=null,this.__compiling=null,t.then(function(){return a.__isCompiled=!0,n})}},{key:"__resolve",value:function(){var t=this;return this.__isResolved?Promise.resolve():(this.attrs.onResolved&&this.attrs.onResolved.trigger(void 0,{bubbles:!1}),Promise.resolve(m.default.isolate(function(){return t.resolved()})).then(function(e){return t.__isResolved=!0,e}))}},{key:"__initialize",value:function(){var e=m.default.getAkiliParents(this.el,!1),t=this.constructor.scope||m.default.Scope,n=void 0,r=m.default.__root===this.el;this.el.__akili=this,e?n=new t(this.el.getAttribute("scope")||m.default.createScopeName(),this.el,this):(n=new t(r?"root":m.default.createScopeName(),this.el,this),r&&(m.default.root=this));var o=n,i=Object.assign(n,this.scope),a=this.constructor.controlAttributes,s=this.constructor.events;return this.constructor.template&&m.default.setTemplate(this.el,this.constructor.template),this.constructor.templateUrl&&(this.__content=this.el.innerHTML,this.el.innerHTML=""),this.__scope=o,this.__events=s,this.__controlAttributes=a,m.default.addScope(n),this.scope=this.__nestedObserve(i,[]),!0}},{key:"__setBooleanAttributes",value:function(){var l=this;this.booleanAttributes=[].concat(m.default.htmlBooleanAttributes,this.constructor.booleanAttributes);!function e(t){for(var n=0,r=t.attributes,o=r.length;n<o;n++){var i=r[n];if(-1!=l.booleanAttributes.indexOf(i.nodeName)){if(t.hasAttribute("boolean-"+i.nodeName))continue;t.setAttribute("boolean-"+i.nodeName,t.getAttribute(i.nodeName)||i.nodeName),t.removeAttribute(i.nodeName)}}for(var a=0,s=t.children.length;a<s;a++){var u=t.children[a];u.__akili||e(u)}}(this.el)}},{key:"__setEvents",value:function(){for(var e=0,t=this.__events.length;e<t;e++){var n=this.__events[e];!/^on-/i.test(n)&&(n="on-"+n),this.el.hasAttribute(n)||this.el.setAttribute(n,"")}}},{key:"__setParents",value:function(){var e=m.default.getAkiliParents(this.el);if(e.length){for(var t=this.__parent!==e[0],n=null,r=0,o=e.length;r<o;r++){var i=e[r];if(!i.__akili.constructor.transparent){n=i;break}}(this.__compiling.newParent=t)&&this.__detach(),this.constructor.transparent&&(this.__evaluationComponent=n.__akili),this.__evaluateParent=n,this.__parent=e[0],this.__parents=e,this.scope.__parent=this.__evaluateParent.__akili.scope,!this.__recompiling&&this.__parent.__akili.__addChild(this.el),Object.setPrototypeOf(this.scope,this.__parent.__akili.__scope)}}},{key:"__addChild",value:function(e){this.__children.push(e)}},{key:"__spliceChild",value:function(e){for(var t=0,n=this.__children.length;t<n;t++){this.__children[t]===e&&(this.__children.splice(t,1),t--,n--)}}},{key:"__getParsedExpression",value:function(e){return e}},{key:"__checkEvaluation",value:function(e){if(!Object.keys(e.__properties).length)return!0;for(var t in e.__properties)if(e.__properties.hasOwnProperty(t)){var n=e.__properties[t],r=w.default.getPropertyByKeys(n.keys,n.component.__scope);if(!e.__component.__compareNodePropertyValue(n,r))return!0}return!1}},{key:"__checkNodePropertyChange",value:function(e,t,n){var r=this.__getNodeProperty(e,t);return!r||!e.__component.__compareNodePropertyValue(r,n)}},{key:"__compareNodePropertyValue",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return"object"==(void 0===t?"undefined":b(t))&&(t={hash:w.default.createObjectHash(t)}),w.default.compare(t,e.copy,n)}},{key:"__createExceptionMessage",value:function(e,t){var n=e.__component.el.tagName,r=(e.__component.el.getAttribute("component")||n).toLowerCase(),o=e.__element.tagName.toLowerCase(),i=e instanceof window.Attr?e.name.toLowerCase():"",a=[t.message,e.__expression.trim()];return i&&a.push("[attribute "+i+"]"),"Expression error: "+(a=a.concat(["[element "+o+"]","[component "+r+"]"])).join("\n\tat ")}},{key:"__evaluate",value:function(h){var _=this,p=0,d=void 0,v=void 0,y=h.__attributeOf||h.__component;return h.__component.parents(function(e){return e.__prevent}).length?{res:h.__expression}:h instanceof window.Attr||!h.__component.__prevent?{res:h.__expression.replace(a,function(e,t){p++;var n=void 0,r=[],o={},i={},a=h.__component.__getParsedExpression(t);m.default.__evaluation={node:h,list:[],component:h.__component};try{n=_.constructor.parse(y.__evaluationComponent.scope,a)}catch(e){throw _.__createExceptionMessage(h,e)}m.default.__evaluation&&(r=m.default.__evaluation.list,m.default.__evaluation.list=null,m.default.__evaluation=null);for(var s=r.length-1;0<=s;s--){var u=r[s],l=u.component.__createKeysHash(u.keys),c=u.component.__createKeysHash(u.parents);if(!u.notBinding&&!o[l]){var f=w.default.getPropertyByKeys(u.parents,u.component.__scope);f&&"object"==(void 0===f?"undefined":b(f))&&(m.default.options.debug&&50==i[c]&&console.warn(["For higher performance, don't loop Proxy arrays/objects inside expression functions, or use Akili.unevaluate() to wrap you code.",""+h.__expression.trim(),'scope property "'+u.parents.join(".")+'"'].join("\n\tat ")),i[c]?i[c]++:i[c]=1),w.default.isScopeProxy(f)&&u.component!==y.__evaluationComponent&&u.component===u.realComponent||(u.component.__bindAndSetProperty(h,u.keys,u.evaluated),o[l]=!0)}}if(r=o=null,h instanceof window.Attr)return v=e,d=n,w.default.makeAttributeValue(n);if("object"==(void 0===n?"undefined":b(n)))try{return JSON.stringify(n)}catch(e){return n}return n}),counter:p,expression:v,attributeValue:d}:{res:h.__expression}}},{key:"__bindAndSetProperty",value:function(e,t,n){var r=this.__getBoundNode(t,e),o=w.default.getPropertyByKeys(t,this.__scope);r||this.__bind(t,{node:e}),this.__setNodeProperty(e,t,o,n)}},{key:"__evaluateNested",value:function(e){var _=this,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.__scope,p=[];if(t)p.push({keys:e,value:w.default.getPropertyByKeys(e,n)});else for(var r=[],o=0,i=e.length;o<i;o++){var a,s=e[o];r=[].concat(l(r),[s]),a=w.default.getPropertyByKeys(r,n),p.push({keys:r,value:a})}var d=p.length,u=function(e){for(var t=e.__akili,n=0;n<d;n++){var r=p[n],o=void 0;if(t===_){var i=t.__getBind(r.keys);o=i&&i.__data||[]}else o=t.__getAllBinds(r.keys);if(o&&o.length)for(var a=0,s=o.length;a<s;a++){var u=o[a];if(u.node.__initialized&&t.__checkNodePropertyChange(u.node,r.keys,r.value)){t.__disableKeys(r.keys);var l=t.__getNodeProperty(u.node,r.keys);for(var c in l&&l.evaluated&&t.scope.__set(r.keys,r.value,!1,!0),t.__evaluateNode(u.node,!1),u.node.__properties)if(u.node.__properties.hasOwnProperty(c)){var f=u.node.__properties[c],h=w.default.getPropertyByKeys(f.keys,f.component.__scope);f.component.__setNodeProperty(u.node,f.keys,h)}t.__enableKeys(r.keys)}}}return t};u(this.el),function e(t){for(var n=0,r=t.length;n<r;n++)e(u(t[n]).__children)}(this.__children)}},{key:"__evaluateByKeys",value:function(e,l){var c=this,t=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=this.__getBind(e);n&&function e(t,n){for(var r in t)if(t.hasOwnProperty(r)&&!c.__isSystemBindingKey(r)){var o,i=[].concat(n,[r]),a=i.slice(),s=!1,u=t[r];a.shift(),o=w.default.hasPropertyByKeys(a,l),l&&"object"==(void 0===l?"undefined":b(l))&&!o&&(s=!0),u&&"object"==(void 0===u?"undefined":b(u))&&e(u,i),c.__evaluateNested(i,!0),null!==l&&"object"==(void 0===l?"undefined":b(l))&&o||(c.__unbind(i),s&&w.default.deletePropertyByKeys(a,l))}}(n,[].concat(e)),this.__evaluateNested(e,!1),t&&(this.__unbind(e),t&&w.default.deletePropertyByKeys(e,this.__scope))}},{key:"__evaluateEvent",value:function(t,e,n){var r=u.exec(t.__expression),o=void 0;if(r){this.__evaluatingEvent={el:e,component:this,event:n,node:t},this.__disableProxy={};try{o=this.constructor.parse(this.__evaluationComponent.scope,r[1],{event:n})}catch(e){throw this.__createExceptionMessage(t,e)}return this.__evaluatingEvent=null,o}}},{key:"__evaluateNode",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=e instanceof window.Attr?"value":"nodeValue";if(!t||this.__checkEvaluation(e)){var r=this.__evaluate(e),o=r.res,i=r.attributeValue,a=r.expression,s=r.counter;if(e[n]!=o&&(e[n]=o),e instanceof window.Attr){var u=o,l=!1;1==s&&a&&e.__expression==a&&(u=i);var c=e.nodeName.replace(/^boolean-(.+)/i,"$1"),f=w.default.toCamelCase(c);if(c!=e.nodeName&&(l=!0,u=!!u),e.__attributeOn){var h=e.__attributeOn;u=h.__prepareAttributeIn(e,u),h.__disableAttributeSetter=!0,h.attrs[f]=u,h.__disableAttributeSetter=!1,h.__isMounted&&h.__attrTriggerByName(f,u)}else if(l){var _=e.__element;u?_.setAttribute(f,"true"):_.removeAttribute(f)}}}return e[n]}},{key:"__prepareAttributeIn",value:function(e,t){return w.default.copy(t,{plain:!0})}},{key:"__prepareAttributeOut",value:function(e,t){return w.default.copy(t,{plain:!0})}},{key:"__initializeAttribute",value:function(t,n,e){if(t&&-1==c.indexOf(t.nodeName)&&this.__initializeNode(t,n)){var r=t.nodeName.replace(/^on-(.+)/i,"$1"),o=e||this;if(t.__isEvent){if(t.__event)return;var i=new m.default.EventEmitter(r,t,n,o);return t.__hasBindings&&i.bind(function(e){return o.__evaluateEvent(t,n,e)}),t.__event=i,n.setAttribute(t.nodeName,w.default.makeAttributeValue(i)),void(e&&(this.__disableAttributeSetter=!0,this.attrs[w.default.toCamelCase(t.nodeName)]=i,this.__disableAttributeSetter=!1))}e&&(t.__attributeOn=this,t.__attributeOf=o);var a=!!this.__compiling&&this.__compiling.checkChanges;o.__evaluateNode(t,a)}}},{key:"__initializeNode",value:function(e,t){if(e.__initialized)return!0;var n=e instanceof window.Attr,r=e[n?"value":"nodeValue"],o=u.test(r.trim()),i=!!n&&/^boolean-/i.test(e.nodeName),a=!!n&&/^on-(.+)/i.test(e.nodeName);return!!(t.__akili||o||i||a)&&(e.__isEvent=a,e.__hasBindings=o,e.__isBoolean=i,e.__expression=r,e.__properties={},e.__attributeOf=null,e.__attributeOn=null,e.__event=null,e.__initialized=!0,e.__component=this,e.__element=t,!0)}},{key:"__deinitializeNode",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.__event&&e.__event.unbind(),e.__hasBindings&&!t.saveBindings&&this.__unbindParentsByNodes(e),delete e.__hasBindings,delete e.__isBoolean,delete e.__isEvent,delete e.__expression,delete e.__properties,delete e.__attributeOf,delete e.__attributeOn,delete e.__event,delete e.__initialized,delete e.__component,delete e.__element}},{key:"__interpolateAttributes",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=0,r=e.attributes,o=r.length;n<o;n++)this.__initializeAttribute(r[n],e,t)}},{key:"__defineAttributes",value:function(){var o=this,i=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(!o.__disableAttributeSetter){var r=o.el.getAttributeNode(e);if(n)return r&&o.__deinitializeNode(r),void o.el.removeAttribute(e);r?(r.value=t,o.__deinitializeNode(r)):(o.el.setAttribute(e,t),r=o.el.getAttributeNode(e)),o.__initializeAttribute(r,o.el,o.__attributeOf)}};this.attrs=new Proxy(this.__attrs,{get:function(e,t){return"__isProxy"==t||e[t]},set:function(e,t,n){var r=w.default.toDashCase(t);return-1!=o.booleanAttributes.indexOf(r)&&(r="boolean-"+r,n?o.el.setAttribute(t,n):o.el.removeAttribute(t)),e[t]=n,i(r,w.default.makeAttributeValue(n)),!0},deleteProperty:function(e,t,n){var r=w.default.toDashCase(t);return i(r,w.default.makeAttributeValue(n),!0),delete e[t],!0}})}},{key:"__observe",value:function(d,v){var y=this;return new Proxy(d,{get:function(e,t){if("__isProxy"==t)return!0;if("__target"==t)return d;if("__component"==t)return y;if("__keys"==t)return v;if(y.__isSystemKey(t))return e[t];if(m.default.__evaluation){var n=[].concat(v,[t]),r=!1,o=!w.default.hasPropertyByKeys(n,y.__scope),i=y,a=n.slice();if(e instanceof g.default){var s=w.default.getOwnPropertyTarget(e,t);s&&s instanceof g.default&&(i=s.__component)}if(m.default.__wrapping&&1<n.length)return e[t];for(var u=m.default.__evaluation.component.parents(function(e){return e instanceof m.default.components.For}),l=0,c=u.length;l<c;l++)for(var f=0,h=n.length;f<h;f++){var _=u[l].data,p=w.default.getPropertyByKeys(a,i.__scope);if(p&&"object"==(void 0===p?"undefined":b(p))&&_===p)return e[t];a.pop()}return t in e?w.default.getEnumerablePropertyTarget(e,t)||(r=!0):e[t]=void 0,y.__bindNode(m.default.__evaluation.list,i,n,v,e[t],r,o),e[t]}return e[t]},set:function(e,t,n){if(y.__isSystemKey(t))return e[t]=n,!0;"function"==typeof e[t]&&(n=m.default.wrapFunction(n));var r=[].concat(v,[t]);if(y.__checkDisablement(r))return e[t]=n,!0;e:if(0<v.length){var o=1<v.length?w.default.getPropertyByKeys(v.slice(0,-1),y.__scope):y.__scope;for(var i in o)if(o.hasOwnProperty(i)&&o[i]&&o[i].__target===e)break e;return e[t]=n,!0}return e[t]=y.__nestedObserve(n,r),y.__isResolved||y.__triggerStoreAndAttr(r),m.default.__isolation?y.__createIsolationObject(v,t,!1):(y.__isResolved&&y.__triggerStoreAndAttr(r),y.__isMounted&&y.__evaluateByKeys(r,n)),!0},deleteProperty:function(e,t){var n=[].concat(v,[t]);return y.__checkDisablement(n)?(delete e[t],!0):y.__isSystemKey(t)?(delete e[t],!0):(delete e[t],y.__isResolved||y.__triggerStoreAndAttr(n),m.default.__isolation?y.__createIsolationObject(v,t,!0):(y.__isResolved&&y.__triggerStoreAndAttr(n),y.__evaluateByKeys(n,void 0,!0)),!0)}})}},{key:"__triggerStoreAndAttr",value:function(e){for(var t=0,n=e.length;t<n;t++){var r=e.slice(0,n-t),o=m.default.joinBindingKeys(r),i=w.default.getPropertyByKeys(r,this.__scope);this.__storeLinks[o]&&this.__storeTriggerByKeys(r,i),this.__attrLinks[o]&&this.__attrTriggerByKeys(r,i)}}},{key:"__createKeysHash",value:function(e){return this.__scope.__name+"."+m.default.joinBindingKeys(e)}},{key:"__getDisablementTypeStore",value:function(e){return{proxy:"__disableProxy",store:"__disableStoreKeys",attr:"__disableAttrKeys"}[e]}},{key:"__disableKeys",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"proxy";this[this.__getDisablementTypeStore(t)][e?this.__createKeysHash(e):"__all"]=!0}},{key:"__enableKeys",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"proxy";delete this[this.__getDisablementTypeStore(t)][e?this.__createKeysHash(e):"__all"]}},{key:"__checkDisablement",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"proxy",n=this.__getDisablementTypeStore(t);return!!this[n].__all||this[n][this.__createKeysHash(e)]}},{key:"__storeTriggerByKeys",value:function(e,t){if(!this.__checkDisablement(e,"store")){var n=this.__storeLinks[m.default.joinBindingKeys(e)];if(n&&n.length){t=w.default.copy(t,{plain:!0});for(var r=[],o=0,i=n.length;o<i;o++){var a=n[o];a.set&&r.push(this.__storeTriggerByName(a.name,t))}return Promise.all(r)}}}},{key:"__storeTriggerByName",value:function(i,a){var s=this;_.default.__target[i]=a;var u=(m.default.__storeLinks[i]||[]).concat(m.default.__storeLinks["*"]||[]);if(u&&u.length)return u=w.default.sort(u,["date"],!0),m.default.nextTick(function(){for(var e=function(e,t){var n=u[e],r=n.component;if(r===s)return"continue";if(n.fn)return m.default.unisolate(function(){return n.fn.call(r,a,i)}),"continue";if(!n.get)return"continue";r.__disableKeys(n.keys,"store");var o=w.default.getPropertyByKeys(n.keys,r.__scope);!w.default.compare(o,a)&&r.scope.__set(n.keys,a),r.__enableKeys(n.keys,"store")},t=0,n=u.length;t<n;t++)e(t)})}},{key:"__storeByKeys",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(n=f({get:!0,set:!0},n),!t)throw new Error('Store link "'+e+'" must have the scope property name');if(!n.get&&!n.set)throw new Error('Store link "'+e+'" must have at least "get" or "set" option as true');Array.isArray(t)||(t=[t]),this.__disableKeys(t,"store"),(_.default.hasOwnProperty(e)||!w.default.hasPropertyByKeys(t,this.__scope))&&this.scope.__set(t,_.default[e]),this.__enableKeys(t,"store");var r,o=m.default.joinBindingKeys(t);this.__storeLinks[o]||(this.__storeLinks[o]=[]);for(var i=this.__storeLinks[o],a=i.length-1;0<=a;a--){var s=i[a];if(s.component===this&&s.name==e&&s.keyString==o)return s.set=n.set,s.get=n.get,void(s.date=Date.now())}m.default.__storeLinks[e]||(m.default.__storeLinks[e]=[]),r={component:this,name:e,keys:t,keyString:o,date:Date.now(),set:n.set,get:n.get},this.__storeLinks[o].push(r),m.default.__storeLinks[e].push(r)}},{key:"__storeByFunction",value:function(e,o){var i=this,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=void 0===t.callOnStart?_.default.__target.hasOwnProperty(e):t.callOnStart;m.default.__storeLinks[e]||(m.default.__storeLinks[e]=[]);for(var r=m.default.__storeLinks[e],a=r.length-1;0<=a;a--){var s=r[a];if(s.component===this&&s.name==e&&s.fn===o)return void(s.date=Date.now())}if(m.default.__storeLinks[e].push({component:this,name:e,fn:o,date:Date.now()}),"*"==e&&!1!==t.callOnStart){for(var u=Object.keys(_.default.__target),l=[],c=function(e,t){var n=u[t],r=_.default.__target[n];l.push(m.default.unisolate(function(){return o.call(i,r,n)}))},f=0,h=u.length;f<h;f++)c(0,f);return Promise.all(l)}if(n)return m.default.unisolate(function(){return o.call(i,_.default[e])})}},{key:"__unstoreByKeys",value:function(e,t){if(!t)throw new Error('You have to pass the scope property name for store link "'+e+'"');Array.isArray(t)||(t=[t]);var n=m.default.joinBindingKeys(t),r=this.__storeLinks[n];if(r.length){for(var o=r.length-1;0<=o;o--){var i=r[o],a=m.default.__storeLinks[i.name];if(i.component===this&&i.name==e&&i.keyString==n&&(r.splice(o,1),a&&a.length)){for(var s=a.length-1;0<=s;s--){var u=a[s];u.component===this&&u.keyString==n&&a.splice(s,1)}a.length||delete m.default.__storeLinks[e]}}r.length||delete this.__storeLinks[n]}}},{key:"__unstoreByFunction",value:function(e,t){if(m.default.__storeLinks[e]){for(var n=m.default.__storeLinks[e],r=n.length-1;0<=r;r--){var o=n[r];if(o.component===this&&o.name==e&&o.fn===t){n.splice(r,1);break}}n.length||delete m.default.__storeLinks[e]}}},{key:"__attrTriggerByKeys",value:function(e,o){var i=this;if(!this.__checkDisablement(e,"attr")){var a=this.__attrLinks[m.default.joinBindingKeys(e)];if(a&&a.length)return m.default.nextTick(function(){for(var e=0,t=a.length;e<t;e++){var n=a[e];if(!n.fn&&n.set){var r="on"+w.default.capitalize(n.name);i.attrs[r]&&i.attrs[r].trigger(o,{bubbles:!0})}}})}}},{key:"__attrTriggerByName",value:function(o,i){var a=this,s=(this.__attrLinks[o]||[]).concat(this.__attrLinks["*"]||[]);if(s&&s.length)for(var e=function(e,t){var n=s[e];if(n.fn)return m.default.unisolate(function(){return n.fn.call(a,i,w.default.toDashCase(o))}),"continue";if(!n.get)return"continue";a.__disableKeys(n.keys,"attr");var r=w.default.getPropertyByKeys(n.keys,a.__scope);!w.default.compare(r,i)&&a.scope.__set(n.keys,i),a.__enableKeys(n.keys,"attr")},t=0,n=(s=w.default.sort(s,["date"],!0)).length;t<n;t++)e(t)}},{key:"__attrByKeys",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(n=f({get:!0,set:!0},n),e=w.default.toCamelCase(e),!t)throw new Error('Attribute link "'+e+'" must have the scope property name');Array.isArray(t)||(t=[t]),this.__disableKeys(t,"attr"),(this.attrs.hasOwnProperty(e)||!w.default.hasPropertyByKeys(t,this.__scope))&&this.scope.__set(t,this.attrs[e]),this.__enableKeys(t,"attr");var r=m.default.joinBindingKeys(t);this.__attrLinks[r]||(this.__attrLinks[r]=[]);for(var o=this.__attrLinks[r],i=o.length-1;0<=i;i--){var a=o[i];if(a.name==e&&a.keyString==r)return a.get=n.get,a.set=n.set,void(a.date=Date.now())}this.__attrLinks[r].push({name:e,keys:t,keyString:r,date:Date.now(),set:n.set,get:n.get})}},{key:"__attrByFunction",value:function(e,o){var i=this,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};e=w.default.toCamelCase(e);var n=void 0===t.callOnStart?this.attrs.hasOwnProperty(e):t.callOnStart;this.__attrLinks[e]||(this.__attrLinks[e]=[]);for(var r=this.__attrLinks[e],a=r.length-1;0<=a;a--){var s=r[a];if(s.name==e&&s.fn===o)return void(s.date=Date.now())}if(this.__attrLinks[e].push({name:e,fn:o,date:Date.now()}),"*"==e&&!1!==t.callOnStart){for(var u=Object.keys(this.__attrs).filter(function(e){return!(i.__attrs[e]instanceof m.default.EventEmitter)}),l=[],c=function(e,t){var n=u[t],r=i.__attrs[n];l.push(m.default.unisolate(function(){return o.call(i,r,w.default.toDashCase(n))}))},f=0,h=u.length;f<h;f++)c(0,f);return Promise.all(l)}if(n)return m.default.unisolate(function(){return o.call(i,i.attrs[e])})}},{key:"__unattrByKeys",value:function(e,t){if(!t)throw new Error('You have to pass the scope property name for attribute link "'+e+'"');Array.isArray(t)||(t=[t]);var n=m.default.joinBindingKeys(t),r=this.__attrLinks[n];if(r.length){for(var o=r.length-1;0<=o;o--){var i=r[o];i.name==e&&i.keyString==n&&r.splice(o,1)}r.length||delete this.__attrLinks[n]}}},{key:"__unattrByFunction",value:function(e,t){if(this.__attrLinks[e]){for(var n=this.__attrLinks[e],r=n.length-1;0<=r;r--){var o=n[r];if(o.name==e&&o.fn===t){n.splice(r,1);break}}n.length||delete this.__attrLinks[e]}}},{key:"__isSystemKey",value:function(e){return"__"==e||"_"==e[0]&&"_"==e[1]||-1!=["constructor"].indexOf(e)}},{key:"__nestedObserve",value:function(e,t){var c=this;return function e(t,n){if("object"!=(void 0===t?"undefined":b(t))||null===t)return t;if(!(w.default.isPlainObject(t)||w.default.isScopeProxy(t)||t instanceof g.default))return t;var r=t;e:if(t.__isProxy){if(r=t.__target,c.__disableProxyRedefining)break e;t.__component===c&&m.default.joinBindingKeys(n)==m.default.joinBindingKeys(t.__keys)||(t=r=w.default.copy(r,{nested:!1}))}else c.__disableProxyRedefining||t instanceof g.default||(t=r=w.default.copy(r,{nested:!1}));for(var o=Object.keys(r),i=0,a=o.length;i<a;i++){var s=o[i],u=r[s],l=[].concat(n,[s]);r[s]=e(u,l)}return t.__isProxy?t:c.__observe(t,n)}(e,t||[])}},{key:"__createIsolationObject",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=e.length?[e[0]]:[t],o=this.__createKeysHash(r);return e.length&&(n=!1),m.default.__isolation[o]||(m.default.__isolation[o]={updatedAt:(new Date).getTime(),component:this,keys:r}),void 0!==n&&(m.default.__isolation[o].isDeleted=n),m.default.__isolation[o]}},{key:"__bindNode",value:function(e,t,n,r,o){var i=5<arguments.length&&void 0!==arguments[5]&&arguments[5],a=6<arguments.length&&void 0!==arguments[6]&&arguments[6],s=m.default.joinBindingKeys(r),u=this;if(e.length&&!i){var l=e.length-1,c=e[l];c.realComponent===this&&c.keysString==s&&(u=c.component),c.keysString==s&&c.component===u&&e.splice(l,1)}e.push({component:u,realComponent:t,keysString:m.default.joinBindingKeys(n),parents:r,keys:n,value:o,evaluated:a,notBinding:i})}},{key:"__isSystemBindingKey",value:function(e){return"__data"==e}},{key:"__getBind",value:function(e){return w.default.getPropertyByKeys(e,this.__bindings)||null}},{key:"__getAllBinds",value:function(e){var t=this.__getBind(e);if(!t)return[];var r=[];return function e(t){for(var n in r=r.concat(t.__data||[]),t)t.hasOwnProperty(n)&&"__data"!=n&&e(t[n])}(t),r}},{key:"__getBoundNode",value:function(e,t){var n=w.default.getPropertyByKeys(e,this.__bindings);if(!n||!n.__data||!n.__data.length)return null;for(var r=0,o=n.__data.length;r<o;r++){var i=n.__data[r];if(i.node===t)return i}return null}},{key:"__setNodeProperty",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=this.__getNodeProperty(e,t),i="object"==(void 0===n?"undefined":b(n))?{hash:w.default.createObjectHash(n)}:w.default.copy(n);if(o){var a=e.__component.__compareNodePropertyValue(o,n);return o.value=n,o.copy=i,!a}return e.__properties[this.__createKeysHash(t)]={component:this,value:n,copy:i,node:e,keys:t,evaluated:r},!0}},{key:"__getNodeProperty",value:function(e,t){return e.__properties[this.__createKeysHash(t)]||null}},{key:"__deleteNodeProperty",value:function(e,t){var n=this.__scope.__name+"."+m.default.joinBindingKeys(t);delete e.__properties[n]}},{key:"__mapNodes",value:function(u){var l=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};c=f({rootAttrs:!0,attrs:!0,node:!0},c);!function e(t){if(t){if(c.attrs&&(t!==l.el||c.rootAttrs))for(var n=0,r=t.attributes,o=r.length;n<o;n++)u(r[n]);for(var i=0,a=t.childNodes.length;i<a;i++){var s=t.childNodes[i];3==s.nodeType?c.node&&u(s):1!=s.nodeType||s.__akili||e(s)}}}(this.el)}},{key:"__getAllNodes",value:function(){var t=[];return this.__mapNodes(function(e){return t.push(e)}),t}},{key:"__addTag",value:function(e,t){this.__tags[e]||(this.__tags[e]=[]),this.__hasTag(e)||this.__tags[e].push({node:t})}},{key:"__hasTag",value:function(e,t){if(!this.__tags[e])return!1;for(var n=0,r=this.__tags[e].length;n<r;n++)if(this.__tags[e][n].node===t)return!0;return!1}},{key:"__removeTag",value:function(e,t){if(t){for(var n=0,r=this.__tags[e].length;n<r;n++)if(this.__tags[e][n].node===t){this.__tags[e].splice(n,1);break}this.__tags[e].length||delete this.__tags[e]}else delete this.__tags[e]}},{key:"__bind",value:function(e,r){w.default.setPropertyByKeys(e,this.__bindings,function(e,t){var n={__data:[]};return e?("object"==(void 0===t?"undefined":b(t))&&(n=t),n.__data||(n.__data=[]),n.__data.push(r),n):t||n})}},{key:"__unbind",value:function(e){var t=w.default.getPropertyByKeys(e,this.__bindings);if(t&&t.__data){for(var n=0,r=t.__data.length;n<r;n++){var o=t.__data[n].node;this.__deleteNodeProperty(o,e)}w.default.deletePropertyByKeys(e,this.__bindings,function(e){return!(1<Object.keys(e).length)||!(e.__data=[])})}}},{key:"__unbindByNodes",value:function(c){var f=this;!Array.isArray(c)&&(c=[c]);!function e(t){for(var n=Object.keys(t),r=0,o=n.length;r<o;r++){var i=n[r];if("__data"==i){for(var a=t[i]||[],s=a.length,u=0;u<s;u++){var l=a[u];-1!=c.indexOf(l.node)&&(a.splice(u,1),u--,s--)}s||delete t[i]}else f.__isSystemBindingKey(i)||e(t[i])}}(this.__bindings),this.__clearEmptyBindings()}},{key:"__unbindParentsByNodes",value:function(e){for(var t=0,n=this.__parents.length;t<n;t++){var r=this.__parents[t];r&&r.__akili&&r.__akili.__unbindByNodes(e)}}},{key:"__clearEmptyBindings",value:function(e){var a=this;!function e(t,n,r){for(var o in t)if(t.hasOwnProperty(o)){var i=t[o];"__data"!=o||i&&i.length?a.__isSystemBindingKey(o)||(Object.keys(t[o]).length?e(t[o],t,o):delete t[o]):delete t[o]}!Object.keys(t).length&&n&&delete n[r]}(e||this.__bindings)}},{key:"__clearStoreLinks",value:function(){var e=m.default.__storeLinks;for(var t in e){for(var n=e[t],r=n.length-1;0<=r;r--){n[r].component===this&&n.splice(r,1)}n.length||delete e[t]}}},{key:"__removeChildren",value:function(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=[];return function e(t){for(var n=0;n<t.length;n++){var r=t[n];e(r.__akili.__children),i=i.concat(r.__akili.__remove(o)),n--}}(this.__children),i}},{key:"__remove",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=[];return this.attrs.onRemoved&&this.attrs.onRemoved.trigger(void 0,{bubbles:!1}),n=(n=n.concat(this.__detach({saveBindings:!0}))).concat(this.__empty({saveBindings:!0})),this.__clearStoreLinks(),this.removed(),m.default.removeScope(this.__scope.__name),this.el.remove(),t.saveBindings||this.__unbindParentsByNodes(n),m.default.nextTick(function(){delete e.el.__akili,e.__bindings=null,e.__tags=null,e.__evaluatingEvent=null,e.__recompiling=null,e.__compiling=null,e.__disableProxy=null,e.__disableStoreKeys=null,e.__disableAttrKeys=null,e.__children=null,e.__parent=null,e.__parents=null,e.__attrs=null,e.__attrLinks=null,e.__storeLinks=null,e.__attributeOf=null,e.__evaluationComponent=null,e.scope=null,e.el=null}),n}},{key:"__detach",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.__parent&&this.__parent.__akili.__spliceChild(this.el);for(var t=[],n=0,r=this.el.attributes.length;n<r;n++){var o=this.el.attributes[n];o.__initialized&&t.push(o)}return e.saveBindings||this.__unbindParentsByNodes(t),t}},{key:"__empty",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=this.__removeChildren({saveBindings:!0});return this.__mapNodes(function(e){e.__initialized&&(t.__deinitializeNode(e,{saveBindings:!0}),n.push(e))},{rootAttrs:!1}),e.saveBindings||(this.__unbindByNodes(n),this.__unbindParentsByNodes(n)),this.el.innerHTML="",n}},{key:"__getParent",value:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=[],a=0;"object"!=(void 0===o?"undefined":b(o))&&(o=[o]);return function e(t){if(t){if((!o||-1!=o.indexOf(a))&&(!n||t.__akili.matches(n))){if(!r)return void i.push(t.__akili);i.push(t.__akili)}a++,e(t.__akili.__parent)}}(this.__parent),r?i:i[0]||null}},{key:"__getChildren",value:function(){var s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",u=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,c=[],f=0;"object"!=(void 0===l?"undefined":b(l))&&(l=[l]);return function e(t){for(var n=0,r=t.length;n<r;n++){var o=t[n];if((!l||-1!=l.indexOf(f))&&(!s||o.__akili.matches(s))){if(!u)return void c.push(o.__akili);c.push(o.__akili)}}f++;for(var i=0,a=t.length;i<a;i++)e(t[i].__akili.__children)}(this.__children),u?c:c[0]||null}},{key:"__getNear",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(!this.__parent)return null;var r=this.__parent.__akili.__children.slice(),o=[];n&&r.reverse();for(var i=0,a=r.length;i<a;i++){var s=r[i];if(s===this.el)break;e&&!s.__akili.matches(e)||o.push(s.__akili)}return o.reverse(),t?o:o.length?o[0]:null}},{key:"store",value:function(e,t){if(!this.__isMounted)throw new Error('Method "store" must be called after the compilation. For example, in "compiled" method.');var n=[].slice.call(arguments);return"function"==typeof e&&(n.unshift("*"),t=e),"function"==typeof t?this.__storeByFunction.apply(this,l(n)):this.__storeByKeys.apply(this,l(n))}},{key:"attr",value:function(e,t){if(!this.__isMounted)throw new Error('Method "attr" must be called after the compilation. For example, in "compiled" method.');var n=[].slice.call(arguments);return"function"==typeof e&&(n.unshift("*"),t=e),"function"==typeof t?this.__attrByFunction.apply(this,l(n)):this.__attrByKeys.apply(this,l(n))}},{key:"unstore",value:function(e,t){if(!this.__isMounted)throw new Error('Method "unstore" must be called after the compilation. For example, in "compiled" method.');var n=[].slice.call(arguments);return"function"==typeof e&&(n.unshift("*"),t=e),"function"==typeof t?this.__unstoreByFunction.apply(this,arguments):this.__unstoreByKeys.apply(this,arguments)}},{key:"unattr",value:function(e,t){if(!this.__isMounted)throw new Error('Method "unattr" must be called after the compilation. For example, in "compiled" method.');var n=[].slice.call(arguments);return"function"==typeof e&&(n.unshift("*"),t=e),"function"==typeof t?this.__unattrByFunction.apply(this,arguments):this.__unattrByKeys.apply(this,arguments)}},{key:"matches",value:function(e){return"function"==typeof e?e(this):this.el.matches(e)}},{key:"parent",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return this.__getParent(e,!1,t)}},{key:"parents",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return this.__getParent(e,!0,t)}},{key:"child",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return this.__getChildren(e,!1,t)}},{key:"children",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return this.__getChildren(e,!0,t)}},{key:"before",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return this.__getNear(e,!0,!1)}},{key:"after",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return this.__getNear(e,!0,!0)}},{key:"prev",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return this.__getNear(e,!1,!1)}},{key:"next",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return this.__getNear(e,!1,!0)}},{key:"appendTo",value:function(e){return e.appendChild(this.el),m.default.compile(this.el,{recompile:{setParents:!0,checkChanges:!1}})}},{key:"cancel",value:function(){this.__cancelled=!0}},{key:"prevent",value:function(){this.__prevent=!0}},{key:"empty",value:function(){return this.__empty.apply(this,arguments)}},{key:"remove",value:function(){return this.__remove.apply(this,arguments)}},{key:"created",value:function(){}},{key:"compiled",value:function(){}},{key:"recompiled",value:function(){}},{key:"resolved",value:function(){}},{key:"removed",value:function(){}}]),n}();h.matches="",h.booleanAttributes=[],h.events=[],h.controlAttributes=!1,h.transparent=!1,h.template="",h.templateUrl="",h.scope=null,t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(8),i=(r=o)&&r.__esModule?r:{default:r};var a={class:function(e){if(!e||"object"!==(void 0===e?"undefined":f(e)))return"";for(var t=[],n=Object.keys(e),r=0,o=n.length;r<o;r++){var i=n[r];e[i]&&t.push(i)}return t.join(" ")},style:function(e){if(!e||"object"!==(void 0===e?"undefined":f(e)))return"";for(var t=[],n=Object.keys(e),r=0,o=n.length;r<o;r++){var i=n[r],a=e[i];a&&t.push(this.toDashCase(i)+":"+a)}return t.join(";")},split:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],r=[],o="";if(!t)return e.split("");if(t instanceof RegExp)return e.split(t);if(-1==e.indexOf(t))o=e;else for(var i=e.split(""),a="",s=0,u=i.length;s<u;s++){var l=i[s],c=n.indexOf(l);-1<c&&(!a||a==l)&&(a=a?"":n[c]),l!=t||a?o+=l:(r.push(o),o="")}return o&&r.push(o),r},filter:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=[];if(n&&!Array.isArray(n)&&(n=[n]),"function"!=typeof t){var o=t?(t+"").toLowerCase():"";t=function(e){return(e?(e+"").toLowerCase():"").match(o)}}for(var i=0,a=e.length;i<a;i++){var s=e[i],u=!1;if(!n&&t(s))u=!0;else if(n)for(var l=0,c=n.length;l<c;l++){var f=n[l];t((f=Array.isArray(f)?f:[f])?this.getPropertyByKeys(f,s):s)&&(u=!0)}u&&r.push(s)}return r},sort:function(e){var l=this,c=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];e=e.slice(),!0===c?(c=[],f=[!0]):!1===c&&(f=[!(c=[])]),Array.isArray(c)||(c=[c]),Array.isArray(f)||(f=[f]);var h=c.length;return e.sort(function(i,a){var s=0,u=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return e instanceof Date&&(e=e.getTime()),t instanceof Date&&(t=t.getTime()),t<e?n?-1:1:e<t?n?1:-1:0};return h?function e(){if(h<=s)return 0;var t=c[s];Array.isArray(t)||(t=[t]);var n=l.getPropertyByKeys(t,i),r=l.getPropertyByKeys(t,a),o=u(n,r,!1===f[s]);return 0!==o?o:(s++,e())}():u(i,a,!1===f[s])}),e},includeKeys:function(e,t){for(var n={},r=Object.keys(e),o=0,i=r.length;o<i;o++){var a=r[o];-1!=t.indexOf(a)&&(n[a]=e[a])}return n},excludeKeys:function(e,t){for(var n={},r=Object.keys(e),o=0,i=r.length;o<i;o++){var a=r[o];-1==t.indexOf(a)&&(n[a]=e[a])}return n},isScopeProxy:function(e){return!(!e||"object"!=(void 0===e?"undefined":f(e))||!e.__isProxy)},isPlainObject:function(e){return!(!e||"object"!=(void 0===e?"undefined":f(e))||e.constructor!=Object&&e.constructor!=Array)},copy:function(e){var u=this,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("object"!=(void 0===e?"undefined":f(e))||!e)return e;l=c({nested:!0,enumerable:!0,plain:!1},l);return function e(t){if(l.plain&&!u.isPlainObject(t))return t;t=u.isScopeProxy(t)?t.__target:t;for(var n=l.enumerable?Object.keys(t):Object.getOwnPropertyNames(t),r=Array.isArray(t)?[]:{},o=0,i=n.length;o<i;o++){var a=n[o],s=t[a];s=s&&"object"==(void 0===s?"undefined":f(s))&&l.nested?e(s):s,t.propertyIsEnumerable(a)?r[a]=s:Object.defineProperty(r,a,c({},Object.getOwnPropertyDescriptor(t,a),{value:s}))}return r}(e)},makeAttributeValue:function(e){return!1===e||null==e?"":e instanceof i.default?"[object Event]":"function"==typeof e?"[object Function]":"object"==(void 0===e?"undefined":f(e))?Object.prototype.toString.call(e):e+""},compare:function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if("function"==typeof e&&"function"==typeof t)return e.toString()===t.toString();if("object"!=(void 0===e?"undefined":f(e))||"object"!=(void 0===t?"undefined":f(t)))return e===t;if(null===e||null===t)return e===t;var n=function(e){for(var t=Array.isArray(e)?[]:{},n=a.enumerable?Object.keys(e):Object.getOwnPropertyNames(),r=0,o=n.length;r<o;r++){var i=n[r];void 0!==e[i]&&(t[i]=e[i])}return t};(a=c({enumerable:!0,ignoreUndefined:!0},a)).ignoreUndefined&&(e=n(e),t=n(t));var r=a.enumerable?Object.keys(e):Object.getOwnPropertyNames(),o=a.enumerable?Object.keys(t):Object.getOwnPropertyNames();if(r.length!=o.length)return!1;e=this.isScopeProxy(e)?e.__target:e,t=this.isScopeProxy(t)?t.__target:t;for(var i=0,s=r.length;i<s;i++){var u=r[i];if(!this.compare(e[u],t[u]))return!1}return!0},createObjectHash:function(e){for(var t=0,n=JSON.stringify(e),r=0;r<n.length;r++){t=(t<<5)-t+n.charCodeAt(r),t&=t}return t+""},encodeHtmlEntities:function(e){var t,n=document.createElement("div");return n.textContent=e,t=n.innerHTML,n.remove(),n=null,t},decodeHtmlEntities:function(e){var t,n=document.createElement("textarea");return n.innerHTML=e,t=n.value,n.remove(),n=null,t},toCamelCase:function(e){return e.replace(/\W+(.)/g,function(e,t){return t.toUpperCase()})},capitalize:function(e){return e[0].toUpperCase()+e.slice(1)},toDashCase:function(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})},getPropertyByKeys:function(e,t){var n=void 0,r=e.length,o=0;return e.reduce(function(e,t){return o++,"object"!=(void 0===e?"undefined":f(e))?e:void 0===e[t]?{}:(o==r&&(n=e[t]),e[t])},t),n},hasPropertyByKeys:function(e,t){var n=!1,r=e.length,o=0;return e.reduce(function(e,t){return o++,"object"!=(void 0===e?"undefined":f(e))?!!e:e.hasOwnProperty(t)?(o==r&&(n=e.hasOwnProperty(t)),e[t]):{}},t),n},setPropertyByKeys:function(e,t,n){var r=void 0,o=e.length,i=0;return e.reduce(function(e,t){if(i++,"object"==(void 0===e?"undefined":f(e)))return e.hasOwnProperty(t)||(e[t]=void 0),e[t]=n(i==o,e[t]),(r=e)[t]},t),r},deletePropertyByKeys:function(e,t,n){var r=e.length,o=void 0,i=0;return e.reduce(function(e,t){if(i++,"object"==(void 0===e?"undefined":f(e)))return e.hasOwnProperty(t)?i==r?(o=e[t],(!n||n(o))&&delete e[t],o):e[t]:{}},t),o},getEnumerablePropertyTarget:function(e,r){return function e(t){if(t.propertyIsEnumerable(r))return t;var n=Object.getPrototypeOf(t);return n?e(n):null}(e)},getOwnPropertyTarget:function(e,r){return function e(t){if(t.hasOwnProperty(r))return t;var n=Object.getPrototypeOf(t);return n?e(n):null}(e)},createRandomString:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:16,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=Math.random().toString(36).substring(2,e+2),r=Date.now(),o="",i=0,a=n.length;i<a;i++)o+=r%i?n[i]:n[i].toUpperCase();return t&&t(o)?this.createRandomString(e,t):o}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=o(n(3)),v=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var s=t.Request=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.__cache={},this.getHeaders=function(e){for(var t={},n=e.getAllResponseHeaders().split("\r\n"),r=0,o=n.length;r<o;r++){var i=n[r],a=i.indexOf(": ");if(0<a){var s=i.substring(0,a),u=i.substring(a+2);t[s]=u}}return t},this.baseUrl=e?e.replace(/\/$/,"")+"/":"",this.defaults=d({statusErrorPattern:/^[^23]/,cache:!1},t||{})}return r(n,[{key:"query",value:function(_){var p=this;return new Promise(function(r,o){(_=d({},p.defaults,_||{})).url=p.baseUrl?""+p.baseUrl+_.url.replace(/^\//,""):_.url,_.method=_.method||"GET";var i=new XMLHttpRequest,e=p.transformBefore(i,_);if(i=e.xhr,"function"==typeof(_=e.options).onStart&&_.onStart(i),_.headers=_.headers||{},_.json?(!0!==_.json&&(_.body=JSON.stringify(_.json)),_.headers["content-type"]="application/json",_.responseType=_.responseType||"json"):_.form&&(_.body=p.createFormData(_.form),_.headers["content-type"]="multipart/form-data"),_.params){var t=p.paramsToQuery(_.params);t&&(_.url+="?"+t)}var a=null,s="function"==typeof _.cache?_.cache(_):_.cache;if(!window.AKILI_SSR&&!v.default.__init&&(s=!0),"GET"!=_.method.toUpperCase()||_.body&&"string"!=typeof _.body||(a=p.createCacheHash({url:_.url,method:_.method,user:_.user,password:_.password,body:_.body})),s&&a){var n=p.getCache(a),u=(new Date).getTime();if(n&&(!0===s||u-n.createdAt<=s))return r(p.transformAfter(n.result))}i.open(_.method,_.url,!0,_.user,_.password),_.hasOwnProperty("timeout")&&(i.timeout=_.timeout),_.responseType&&(i.responseType=_.responseType),_.withCredentials&&(i.withCredentials=_.withCredentials);for(var l=Object.keys(_.headers),c=0,f=l.length;c<f;c++){var h=l[c];i.setRequestHeader(h,_.headers[h])}"function"==typeof _.onProgress&&(i.onprogress=function(){return _.onProgress(i)}),i.onload=function(){var e={response:i.response,status:i.status,readyState:i.readyState,statusText:i.statusText,withCredentials:i.withCredentials,responseType:i.responseType,responseText:"text"==i.responseType?i.responseText:"",responseXML:"document"==i.responseType?i.responseXML:"",responseURL:i.responseURL,timeout:i.timeout,headers:p.getHeaders(i)},t=p.transformAfter(e);if(_.statusErrorPattern&&(i.status+"").match(_.statusErrorPattern)){var n=new Error('Request to "'+_.url+'" returns failure status code '+i.status);return n.response=t,o(n)}(s||window.AKILI_SSR)&&a&&p.createCache(a,e),r(t)},i.ontimeout=function(){o(new Error('Request to "'+_.url+'" timed out'))},i.onerror=o,i.send(_.body)})}},{key:"getCache",value:function(e){return this.__cache[e]||null}},{key:"createCache",value:function(e,t){this.__cache[e]={result:t,createdAt:(new Date).getTime()}}},{key:"removeCache",value:function(e){delete this.__cache[e]}},{key:"createCacheHash",value:function(e){return a.default.createObjectHash(e)}},{key:"paramsToQuery",value:function(o){return o&&"object"===(void 0===o?"undefined":i(o))?Object.keys(o).map(function(t){var n=encodeURIComponent(t);if(Array.isArray(o[t]))return n=encodeURIComponent(t),o[t].map(function(e,t){return n+"["+t+"]="+encodeURIComponent(e)}).join("&");if(o[t]&&"object"===i(o[t])){var r=[];return Object.keys(o[t]).map(function(e){return r.push(n+"["+e+"]="+encodeURIComponent(o[t][e]))}),r.join("&")}return n+"="+encodeURIComponent(o[t])}).join("&"):""}},{key:"paramsFromQuery",value:function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("="),a=decodeURIComponent(i[0]),s=decodeURIComponent(i[1]);a&&(Array.isArray(t[a])?t[a].push(s):t[a]?t[a]=[t[a],s]:t[a]=s)}return t}},{key:"createFormData",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=t||new FormData;for(var o in e)if(e.hasOwnProperty(o)&&e[o]){var i=n?n+"["+o+"]":o;e[o]instanceof Date?r.append(i,e[o].toISOString()):a.default.isPlainObject(e[o])?this.createFormData(e[o],r,i):r.append(i,e[o])}return r}},{key:"transformBefore",value:function(e,t){return{xhr:e,options:t}}},{key:"transformAfter",value:function(e){return d({},e,{data:e.response})}},{key:"get",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.url=e,t.method="GET",this.query(t)}},{key:"delete",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.url=e,t.method="DELETE",this.query(t)}},{key:"post",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.url=e,t.method="POST",this.query(t)}},{key:"put",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.url=e,t.method="PUT",this.query(t)}},{key:"patch",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.url=e,t.method="PATCH",this.query(t)}},{key:"head",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.url=e,t.method="HEAD",this.query(t)}}]),n}(),u=new s;u.setDefaults=function(){this.__instances={},this.__cache={}},u.addInstance=function(e,t){this.__instances[e]=t},u.removeInstance=function(e){delete this.__instances[e]},u.deinit=function(){this.setDefaults()},Object.defineProperty(u,"use",{get:function(){return u.__instances}}),u.Request=s,(t.default=u).setDefaults()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=n(2),a=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return o.valueKey="value",o.debounceInterval=500,o.debounceTimeout=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.default),o(i,[{key:"compiled",value:function(){var e=this;this.el.hasAttribute("on-debounce")&&this.el.addEventListener("input",function(){e.debounceTimeout&&clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout(function(){e.attrs.onDebounce.trigger(void 0,{bubbles:!0})},e.debounceInterval)}),this.attr("focus",this.setFocus),this.attr("value",this.setValue),this.attr("debounce",this.setDebounce)}},{key:"removed",value:function(){this.debounceTimeout&&clearTimeout(this.debounceTimeout)}},{key:"setDebounce",value:function(e){this.debounceInterval=+e}},{key:"setFocus",value:function(e){e?this.setElementFocus():this.setElementBlur()}},{key:"setValue",value:function(e){this.el[this.valueKey]!==e&&(this.el[this.valueKey]=0===e?"0":e||"")}},{key:"setElementFocus",value:function(){this.el.focus()}},{key:"setElementBlur",value:function(){this.el.blur()}}]),i}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Loop=void 0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=s(n(2)),h=s(n(0)),a=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function s(){var e;u(this,s);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=l(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(n)));return o.iterators=[],o.iteratorRef=null,o.iteratorEl=null,o.iteratorOuterHTML=null,o.reset(),o}return c(s,i.default),o(s,null,[{key:"define",value:function(){h.default.component("for",this),h.default.component("ol",this),h.default.component("ul",this),h.default.component("thead",this),h.default.component("tbody",this),h.default.component("tfoot",this),h.default.component("tr",this.Loop),h.default.component("loop",this.Loop)}}]),o(s,[{key:"__prepareAttributeIn",value:function(e,t){return e instanceof window.Attr&&"in"==e.name?t:r(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"__prepareAttributeIn",this).apply(this,arguments)}},{key:"__compareNodePropertyValue",value:function(e,t){var n=e.node;return!(n instanceof window.Attr&&"in"==n.name&&e.value!==t)&&r(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"__compareNodePropertyValue",this).apply(this,arguments)}},{key:"created",value:function(){this.createIterator()}},{key:"compiled",value:function(){this.attr("in",this.draw)}},{key:"createIterator",value:function(){for(var e=void 0,t=0,n=this.el.children.length;t<n;t++){var r=this.el.children[t];if("loop"==r.getAttribute("component")){e=r;break}e=r}e||((e=document.createElement("loop")).innerHTML=this.el.innerHTML,this.el.innerHTML="",this.el.appendChild(e));var o=e.getAttribute("component");if("loop"!=o){var i=h.default.component(o||e.tagName);if(i){if(!(i.prototype instanceof s)){var a=document.createElement("loop");a.appendChild(e),e=a}}else e.setAttribute("component","loop")}this.html=e.innerHTML,this.iteratorRef=e.nextSibling,this.iteratorOuterHTML=e.outerHTML,this.iteratorEl=this.createIteratorElement(),e.remove()}},{key:"createIteratorElement",value:function(){var e=document.createElement("template");return e.innerHTML=this.iteratorOuterHTML,e.content.firstChild}},{key:"loop",value:function(e,t,n){if(this.__index=n,this.__key=e,this.__value=t,this.__comparisonValue="object"==(void 0===t?"undefined":f(t))?{hash:a.default.createObjectHash(t)}:a.default.copy(t),this.iterators.length>n){var r=this.iterators[n];return this.__index!==r.index?r.setIndex():r.setIndex(!0),this.__key!==r.key?r.setKey():r.setKey(!0),a.default.compare(this.__comparisonValue,r.comparisonValue)?r.setValue(!0):r.setValue(),this.__promises.push(h.default.compile(r.el,{recompile:{checkChanges:!0}})),r}var o=this.iteratorEl.cloneNode();return o.innerHTML=this.html,this.el.insertBefore(o,this.iteratorRef),this.__promises.push(h.default.compile(o)),this.iterators.push(o.__akili),o.__akili}},{key:"draw",value:function(e){var r=this;"object"==(void 0===e?"undefined":f(e))&&null!==e||(h.default.options.debug&&console.warn('"For" component "in" attribute value type must be an object/array'),e=[]),this.data=e;var t=0,n=[].slice.call(this.el.children);this.iterators.sort(function(e,t){return n.indexOf(e.el)-n.indexOf(t.el)});var o=function(e,t,n){return r.loop(e,t,n).iterate(n)};if(Array.isArray(e))for(var i=e.length;t<i;t++)o(t,e[t],t);else for(var a=Object.keys(e),s=a.length;t<s;t++){var u=a[t];o(u,e[u],t)}for(var l=t,c=this.iterators.length;l<c;l++){this.iterators[l].__remove(),this.iterators.splice(l,1),c--,l--}return Promise.all(this.__promises).then(function(){r.reset(),r.attrs.onOut.trigger(e,{bubbles:!0})})}},{key:"reset",value:function(){this.__iterator=null,this.__index=0,this.__key="",this.__value=null,this.__comparisonValue=null,this.__promises=[]}}]),s}();_.matches="[in]",_.events=["out"],t.default=_;var p=t.Loop=function(e){function i(){var e;u(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=l(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return o.for=null,o.html=o.el.innerHTML,o.isFor=o.el.hasAttribute("in"),o.isFor||o.el.parentNode.__akili instanceof _||o.cancel(),o}return c(i,_),o(i,[{key:"created",value:function(){if((this.__parent.__akili.__iterator=this).for=this.__parent.__akili,this.setIndex(!0),this.setKey(!0),this.setValue(!0),this.isFor)return r(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"created",this).apply(this,arguments)}},{key:"compiled",value:function(){if(this.isFor)return r(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"compiled",this).apply(this,arguments)}},{key:"setIndex",value:function(e){this.index=this.for.__index,this.scope.__set("loopIndex",this.index,!1,e)}},{key:"setKey",value:function(e){this.key=this.for.__key,this.scope.__set("loopKey",this.key,!1,e)}},{key:"setValue",value:function(e){this.value=this.for.__value,this.scope.__set("loopValue",this.value,!0,e),this.comparisonValue=this.for.__comparisonValue}},{key:"iterate",value:function(){}}]),i}();p.matches="",p.controlAttributes=!0,_.Loop=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=r(n(0)),a=r(n(3));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(){function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.__name=e,this.__el=t,this.__component=n,t.setAttribute("scope",e)}return o(r,[{key:"__set",value:function(e,n){var t=this,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=3<arguments.length&&void 0!==arguments[3]&&arguments[3];Array.isArray(e)||(e=[e]),i.default.unisolate(function(){r&&(t.__component.__disableProxyRedefining=!0),a.default.setPropertyByKeys(e,o?t.__target:t,function(e,t){return e?n:t||{}}),r&&(t.__component.__disableProxyRedefining=!1)})}}]),r}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=function(){function o(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.name=e,this.node=t,this.el=n,this.component=r}return i(o,[{key:"trigger",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!(2<arguments.length&&void 0!==arguments[2]&&arguments[2])&&this.inEvaluating()||this.el.dispatchEvent(new CustomEvent(this.name,this.prepareOptions(r({detail:e},t))))}},{key:"dispatch",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!(2<arguments.length&&void 0!==arguments[2]&&arguments[2])&&this.inEvaluating()||this.el.dispatchEvent(new e(this.name,this.prepareOptions(t)))}},{key:"prepareOptions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e=r({bubbles:!0},e),this.node.__component.__prepareAttributeOut(this.node,e.detail),e}},{key:"inEvaluating",value:function(){var e=this.component.__evaluatingEvent;return!!e&&(e.el===this.el&&e.event.type===this.name&&e.component===this.component)}},{key:"bind",value:function(e){this.el.addEventListener(this.name,this.fn=e)}},{key:"unbind",value:function(){this.fn&&this.el.removeEventListener(this.name,this.fn)}}]),o}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),o=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var a=new Proxy({},{get:function(e,t){return"__target"==t?e:e[t]},set:function(e,t,n){return o.default.compare(e[t],n)||(n=o.default.copy(n,{plain:!0}),e[t]=n,r.default.root&&r.default.root.__storeTriggerByName(t,n)),!0},deleteProperty:function(e,t){return r.default.root&&r.default.root.__storeTriggerByName(t,void 0),delete e[t],!0}});t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r};var a=new Proxy({},{get:function(e,t){var n="globals."+t;if(i.default.__evaluation)return i.default.__evaluation.component.__addTag(n,i.default.__evaluation.node),e[t]},set:function(e,t,n){var r="globals."+t,o=e[t];return e[t]=i.default.wrap(n),o!==n&&i.default.evaluateTag(r),!0},deleteProperty:function(e,t){var n="globals."+t;return i.default.removeTag(n),delete e[t],i.default.evaluateTag(n),!0}});t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=i(n(2)),a=i(n(0)),s=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return o.el.innerHTML="",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o.default),r(i,null,[{key:"define",value:function(){a.default.component("route",this)}}]),r(i,[{key:"setTransition",value:function(e){var o=this,t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=e.path.state;return this.__scope.__transition={parent:function e(t){return t.parent?t.parent.component?t.parent.component.__scope.__transition.path:e(t.parent):null}(e.path),state:e.path.state,data:e.path.data,url:e.path.url,params:e.path.params,query:e.path.query,hash:e.path.hash},t?Promise.resolve().then(function(){return i.template?i.template:i.templateUrl?s.default.get(i.templateUrl).then(function(e){return e.data}):void 0}).then(function(e){return function(e){o.empty();var t="component";if(i.component){var n=!1;for(var r in a.default.__components)if(a.default.__components[r]===i.component){t=r,n=!0;break}if(!n)throw new Error('Router state "'+i.name+'" has no defined component')}return o.el.innerHTML="<"+t+">"+e+"</"+t+">",a.default.compile(o.el,{recompile:!0})}(e)}):a.default.compile(this.el,{recompile:{checkChanges:!0}})}}]),i}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transition=void 0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=i(n(0)),f=i(n(3)),u=i(n(4)),o=i(n(11));function i(e){return e&&e.__esModule?e:{default:e}}var s=t.Transition=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.url=e,this.previous=t,this.path=null,this.routes=[],this.states={},this.__cancelled=!1,this.__finised=!1}return r(n,[{key:"redirect",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};return o=y({},b.transition.path.options,o),this.cancel(),b.state.call(b,e,t,n,r,o)}},{key:"reload",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return e=y({},this.path.params,e),t=y({},this.path.query,t),n=void 0===n?this.path.hash:n,this.redirect(this.path.state.name,e,t,n,r)}},{key:"setPath",value:function(e){e.parent=this.path||null,this.path=y({params:{},query:{}},e),this.routes.push(this.path),this.states[this.path.state.name]=this.path}},{key:"getRoute",value:function(e){for(var t=0,n=this.routes.length;t<n;t++){var r=this.routes[t];if(r.state===e)return r}return null}},{key:"hasState",value:function(e){return!!this.states[e.name]}},{key:"isRouteChanged",value:function(e){if(!this.previous)return!0;var t=e.state;if(!this.previous.hasState(t))return!0;var r=[];for(var n in t.fullPattern.replace(b.__paramRegex,function(e,t,n){return r.push(n)}),t.params)-1==r.indexOf(n)&&r.push(n);var o=Object.keys(t.query),i=void 0!==t.hash,a=this.previous.getRoute(t),s={params:f.default.includeKeys(a.params,r),query:f.default.includeKeys(a.query,o)},u={params:f.default.includeKeys(e.params,r),query:f.default.includeKeys(e.query,o)};return i&&(s.hash=a.hash,u.hash=e.hash),!f.default.compare(s,u)}},{key:"cancel",value:function(){this.__cancelled=!0,this.finish()}},{key:"finish",value:function(){this.__finised=!0}}]),n}(),b={setDefaults:function(){this.baseUrl="/",this.states=[],this.hashMode=!0,this.__redirects=0,this.__init=!1,this.__paramRegex=/(\/?:([\w\d-]+))/g,this.__routeSelector=function(e){return e instanceof o.default}},add:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if("object"==(void 0===e?"undefined":l(e))&&(t=(n=e).pattern,e=n.state,delete n.pattern,delete n.state),!e)throw new Error("Router state must have a name");if(a.default.options.debug&&n.component&&(n.template||n.templateUrl)&&console.warn('Router state "'+e+'" must only have a component or template option'),n.template||n.templateUrl||n.component||(n.abstract=!0),this.has(e))throw new Error('Router state "'+e+'" is already exists');return this.setState(e,t,y({},{template:"",templateUrl:"",abstract:!1,component:null,params:{},query:{},handler:function(){}},n)),this},remove:function(e){for(var t=0,n=this.states.length;t<n;t++)if(this.states[t].name==e)return void this.states.splice(t,1)},has:function(e){for(var t=0,n=this.states.length;t<n;t++)if(this.states[t].name==e)return!0;return!1},state:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=this,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};if("object"!==(void 0===e?"undefined":l(e))&&(e=this.getState(e)),!e)throw new Error("Not found route state with name "+e);(i=y({},i)).manual=!0;var a=this.prepareStateArgs(e,t,n,o,i,!1);t=a.params,n=a.query,o=a.hash,i=a.options;var s=this.createStateUrl(e,t,n,o,i);return this.isolate(function(){return r.setUrl(s)}),this.changeState(i)},back:function(){return window.history.back.apply(window.history,arguments)},go:function(){return window.history.go.apply(window.history,arguments)},forward:function(){return window.history.forward.apply(window.history,arguments)},location:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(n=y({},n)).manual=!0,this.isolate(function(){return t.setUrl(e)}),this.changeState(n)},init:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=window.history.pushState;window.history.pushState=function(){var e=r.apply(this,arguments);return b.changeState().catch(function(e){return console.error(e)}),e},this.__onStateChangeHandler=function(){e.changeState().catch(function(e){return console.error(e)})},this.defaultUrl=t,this.hashMode=n,this.states.sort(function(e,t){return(e=e.name.split(".").length)-(t=t.name.split(".").length)});for(var o=0,i=this.states.length;o<i;o++)this.initState(this.states[o]);!this.states.length&&a.default.options.debug&&console.warn("You didn't add any routes to the router"),window.addEventListener("popstate",this.__onStateChangeHandler),this.__init=!0},initState:function(e){var t=[];if(e.children=[],(t=e.name.split(".")).pop(),e.level=e.abstract?null:t.length,t.length){var n=t.join("."),r=this.getState(n);if(!r)throw new Error('Not found parent route state "'+n+'" for "'+e.name+'"');null!==e.level&&r.abstract&&e.level--,e.fullPattern=this.splitSlashes(r.fullPattern+"/"+e.pattern),r.children.push(e)}else e.fullPattern=e.pattern},getState:function(e){for(var t=0,n=this.states.length;t<n;t++){var r=this.states[t];if(r.name==e)return r}return null},setState:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=y({},n,{name:e,pattern:t});return this.states.push(r),this.__init&&this.initState(r),r},removeState:function(e){for(var t=0,n=this.states.length;t<n;t++){if(this.states[t].name==e)return void this.states.splice(t,1)}},setUrl:function(e){this.hashMode?this.setHashUrl(e):this.setHistoryUrl(e)},setHistoryUrl:function(e){window.history.pushState(void 0,void 0,e)},setHashUrl:function(e){window.location.hash="#"+(e||"/")},replaceUrl:function(e){this.hashMode?this.replaceHashUrl(e):this.replaceHistoryUrl(e)},replaceHistoryUrl:function(e){window.history.replaceState(void 0,void 0,e)},replaceHashUrl:function(e){window.history.replaceState(void 0,void 0,"#"+(e||"/"))},getUrl:function(){return this.hashMode?this.getHashUrl():this.getHistoryUrl()},getHistoryUrl:function(){return window.location.pathname+window.location.search+window.location.hash},getHashUrl:function(){return window.location.hash.replace(/^#/,"")},getUrlQuery:function(){return this.hashMode?this.getHashUrlQuery():this.getHistoryUrlQuery()},getHistoryUrlQuery:function(){return u.default.paramsFromQuery(window.location.search.replace(/^\?/,""))},getHashUrlQuery:function(){return u.default.paramsFromQuery(window.location.hash.split("?")[1]||"")},createStateUrl:function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},i=!(5<arguments.length&&void 0!==arguments[5])||arguments[5];if("object"!==(void 0===e?"undefined":l(e))&&(e=this.getState(e)),o=y({},o),i){var a=this.prepareStateArgs(e,r,t,n,o);r=a.params,t=a.query,n=a.hash,o=a.options}var s=e.fullPattern.replace(this.__paramRegex,function(e,t,n){return"/"+(r[n]||"")});return s=s.replace(/^\^/,""),s=this.splitSlashes(s),Object.keys(t).length&&(s+="?"+u.default.paramsToQuery(t)),!this.hashMode&&n&&(s+="#"+n.replace("#","")),s},prepareStateArgs:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},i={params:t,query:n,hash:r,options:o},a=0;a<999;a++){var s=this.prepareStateParams(e,t,i),u=this.prepareStateQuery(e,n,i),l=this.prepareStateHash(e,r,i);null===l?o.emptyHash=null:""===l&&(o.emptyHash="");var c={params:s,query:u,hash:l,options:o};if(f.default.compare(c,i))break;i=c}return i},prepareStateParams:function(e,t,n){"object"!==(void 0===e?"undefined":l(e))&&(e=this.getState(e));for(var r=[t],o=e.name.split("."),i=0,a=o.length;i<a;i++){var s=o.slice(0,o.length-i).join(".");r.push(this.getState(s).params)}return this.createStateArgs(r,n)},prepareStateQuery:function(e,t,n){"object"!==(void 0===e?"undefined":l(e))&&(e=this.getState(e));for(var r=[t],o=e.name.split("."),i=0,a=o.length;i<a;i++){var s=o.slice(0,o.length-i).join(".");r.push(this.getState(s).query)}return this.createStateArgs(r,n)},createStateArgs:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{params:{},query:{}},n={},r={},o=0,i=e.length;o<i;o++)for(var a=e[o],s=Object.keys(a),u=0,l=s.length;u<l;u++){var c=s[u],f=a[c];r[c]||void 0!==(f="function"==typeof f?f(t):f)&&(null!==f?n[c]=f:(delete n[c],r[c]=!0))}return n},prepareStateHash:function(e,t,n){if(null===t)return t;"object"!==(void 0===e?"undefined":l(e))&&(e=this.getState(e));for(var r=e.name.split("."),o=0,i=r.length;o<i;o++){var a=r.slice(0,r.length-o).join("."),s=this.getState(a).hash;if(void 0!==(s="function"==typeof s?s(n):s)){if(null===s)return null;t=s}}return t},splitSlashes:function(e){return e.replace(/[/]+/g,"/")},getPatternContent:function(e,t){"object"!==(void 0===e?"undefined":l(e))&&(e=this.getState(e));var s=[],u={};t=(t=t.split("?")[0]).split("#")[0];var n=e.fullPattern.replace(this.__paramRegex,function(e,t,n){return s.push(n),"/?([^/]*)"});n=n.replace(/([^^/]+)[/]+$/,"$1");var r=new RegExp(n,"g");return t.match(r)?(t.replace(r,function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var o=0,i=(n=n.slice(0,n.length-2)).length;o<i;o++){var a=n[o];a&&(u[s[o]]=a)}}),{params:u}):null},isActiveState:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];"object"!==(void 0===e?"undefined":l(e))&&(e=this.getState(e));var n=b.transition&&!b.transition.__finished?b.transition.url:this.getUrl();n=this.splitSlashes("/"+n.split("?")[0]+"/");var r=e.fullPattern.replace(this.__paramRegex,"/?([^/]*)");r=r.replace(/^\^/,"").replace(/\$$/,"");var o=t?r:this.splitSlashes("^/"+r+"/$");return new RegExp(o).test(n)},inActiveState:function(e){return b.isActiveState(e,!0)},getRoute:function(r){var o=this,i=0;return function e(t){var n=t.child(o.__routeSelector);return n?i==r?n:(i++,e(n)):null}(a.default.root)},getArrayPatternContent:function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n],i=this.getPatternContent(o,t);if(i)return y({state:o},i)}return null},getStatesByLevel:function(e){for(var t=[],n=0,r=this.states.length;n<r;n++){var o=this.states[n];if(!(o.level<e)){if(o.level>e)break;t.push(o)}}return t},reload:function(){var e;if(!this.transition)throw new Error("Not found an active transition to reload the state");return(e=this.transition).reload.apply(e,arguments)},isolate:function(e){this.__isolated=!0;var t=e();return this.__isolated=!1,t},changeState:function(){var l=this,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(this.__isolated)return Promise.resolve();var f=this.getUrl(),h={},_=this.getUrlQuery(),p=this.hashMode?"":window.location.hash.replace("#",""),e=b.transition||null,d=b.transition=new s(f,e),v=0;window.dispatchEvent(new CustomEvent("state-change",{detail:d}));return function e(t){if(!t.length)return Promise.resolve();var n=l.getArrayPatternContent(t,f);if(!n)return Promise.resolve();var r=n.state;d.setPath({state:r,component:a}),h=y({},h,n.params),p=p||c.emptyHash;var o=l.prepareStateArgs(r,h,_,p,c);h=o.params,_=o.query,p=o.hash,c=o.options,p=p||"";var i=l.createStateUrl(r,h,_,p,c,!1);l.isolate(function(){return l.replaceUrl(i)});var a=r.abstract?null:l.getRoute(v);if(!a&&!r.abstract)throw new Error('Not found route component for state "'+r.name+'"');d.path.params=h,d.path.query=_,d.path.hash=p,d.path.url=i,d.path.options=c,!r.abstract&&v++;var s=!0;i!=f&&(s=d.isRouteChanged(d.path));var u=s&&!1!==c.reload;return Promise.resolve(u?r.handler(d):d.path.data).then(function(e){if(d.path.data=e,r.title&&(document.title="function"==typeof r.title?r.title(d):r.title),!d.__cancelled&&!r.abstract){var t=d.previous&&d.previous.getRoute(r);return t&&!t.loaded&&(u=!0),a.setTransition(d,u).then(function(){return d.path.loaded=!0})}}).then(function(){return e(r.children)})}(this.getStatesByLevel(0)).then(function(){if(!d.routes.length){if(l.__redirects)throw new Error('Wrong router default url "'+l.defaultUrl+'"');if(l.defaultUrl){if(l.defaultUrl==l.getUrl())throw new Error("Not found any routes");return l.isolate(function(){return l.replaceUrl(l.defaultUrl)}),l.__redirects++,l.changeState()}a.default.options.debug&&console.warn('Not found a default route. You can pass it in "router.init(defaultUrl)" function')}return c.saveScrollPosition||d.path&&d.path.hash||window.scrollTo(0,0),l.__redirects=0,d.finish(),window.dispatchEvent(new CustomEvent("state-changed",{detail:d})),d})},deinit:function(){window.removeEventListener("popstate",this.__onStateChangeHandler),b.setDefaults()}};b.Transition=s,(t.default=b).setDefaults()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Else=t.ElseIf=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=i(n(2)),a=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){function i(){var e;s(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=u(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return o.html=o.el.innerHTML,o.el.innerHTML="",o.state=!1,o.active=!1,o.recreate=!1,o.isCompiled=!1,o.display=getComputedStyle(o.el).display,o}return l(i,o.default),r(i,null,[{key:"define",value:function(){a.default.component("if",this),a.default.component("else-if",this.ElseIf),a.default.component("else",this.Else)}}]),r(i,[{key:"compiled",value:function(){var t=this;return this.attr("recreate",this.setRecreation),this.attr("is",function(e){return t.state=!!e,t.setState()})}},{key:"setActivity",value:function(e){this.active=e}},{key:"setRecreation",value:function(e){this.recreate=e}},{key:"setState",value:function(){var e,t=this.compilation(),n=this.el.nextElementSibling;if(n&&n.matches("else-if,else"))return n.__akili.setActivity(this.active||this.state),n.__akili.setRecreation(this.recreate),e=n.__akili.setState(),Promise.resolve(t).then(function(){return e})}},{key:"compilation",value:function(){var e=void 0;return this.state&&!this.active?(!this.recreate&&this.isCompiled||(e=this.compile()),this.el.style.setProperty("display",this.display,"important")):(this.recreate?this.empty():this.isCompiled||(e=this.compile()),this.el.style.setProperty("display","none","important")),e}},{key:"compile",value:function(){var e;return this.el.innerHTML=this.html,e=a.default.compile(this.el,{recompile:!0}),this.isCompiled=!0,e}}]),i}();c.transparent=!0,c.matches="[is]",c.booleanAttributes=["recreate"],t.default=c;var f=t.ElseIf=function(e){function i(){var e;s(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=u(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return o.active=!0,o}return l(i,c),i}(),h=t.Else=function(e){function i(){var e;s(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=u(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return o.el.setAttribute("is","true"),o}return l(i,f),i}();h.matches="",c.ElseIf=f,c.Else=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Option=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=n(6),s=c(i),u=c(n(3)),l=c(n(0));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function i(){var e;f(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=h(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return o.iteratorTagName="option",o.isMultiple=!1,o}return _(i,s.default),a(i,null,[{key:"define",value:function(){l.default.component("select",this),l.default.component("option",this.Option)}}]),a(i,[{key:"compiled",value:function(){var e=this;this.el.addEventListener("change",function(){return e.el.content=e.getContent()});var t=o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"compiled",this).apply(this,arguments);return this.attr("multiple",this.setMultiple),this.attr("content",this.setContent),this.attr("in",this.drawSelect),t}},{key:"setMultiple",value:function(e){this.isMultiple=e,this.changeValue(this.formatValue(u.default.copy(this.el.content)))}},{key:"setContent",value:function(e){this.changeValue(this.formatValue(e))}},{key:"drawSelect",value:function(){for(var e=[],t=0,n=this.el.options.length;t<n;t++){var r=this.el.options[t].__akili,o=r.attrs.selected;o&&e.push(r.el.value),r.el.selected=o}e.length?this.changeValue(this.formatValue(e)):this.redefine()}},{key:"createIteratorElement",value:function(){var e=o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"createIteratorElement",this).call(this);return e.hasAttribute("value")||e.setAttribute("value",this.html.trim()),e}},{key:"getContent",value:function(){if(!this.isMultiple)return this.el.value;for(var e=[],t=0,n=this.el.options.length;t<n;t++){var r=this.el.options[t];r.selected&&e.push(r.value)}return e}},{key:"formatValue",value:function(e){return this.isMultiple?Array.isArray(e)||(e=null!=e?[e]:[]):Array.isArray(e)?e=e.length?e[0]:"":"object"!=(void 0===e?"undefined":r(e))&&"function"!=typeof e||(e=""),e}},{key:"redefine",value:function(){this.changeValue(this.getContent())}},{key:"changeValue",value:function(e){if(!u.default.compare(this.el.content,e)){if(Array.isArray(e)){this.el.value=e[e.length-1];for(var t=0,n=this.el.options.length;t<n;t++){var r=this.el.options[t];r.selected=-1!=e.indexOf(r.value)}}else{this.el.value=e;for(var o=0,i=this.el.options.length;o<i;o++){var a=this.el.options[o];a.selected=a.value==e}}this.el.content=e,this.attrs.onChange.dispatch(Event,{bubbles:!0})}}}]),i}();p.booleanAttributes=["multiple"].concat(s.default.booleanAttributes),p.events=["change"].concat(s.default.events),t.default=p;var d=t.Option=function(e){function t(){return f(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,i.Loop),a(t,[{key:"__getParsedExpression",value:function(e){return u.default.decodeHtmlEntities(e)}},{key:"changedSelected",value:function(e){this.setSelected(e)}},{key:"setSelected",value:function(e){this.el.selected=e,this.for.redefine()}}]),t}();d.booleanAttributes=["selected"],p.Option=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=i(n(5)),s=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return o.isCheckbox="checkbox"==o.el.type,o.isRadio="radio"==o.el.type,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.default),o(i,null,[{key:"define",value:function(){s.default.component("input",this)}}]),o(i,[{key:"compiled",value:function(){return(this.isCheckbox||this.isRadio)&&this.attr("checked",this.setChecked),r(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"compiled",this).apply(this,arguments)}},{key:"setChecked",value:function(e){e=!!e,this.el.checked!==e&&(this.el.checked=e,this.__isCompiled&&this.attrs.onChange.dispatch(Event,{bubbles:!0}),this.isRadio&&this.changeRadio())}},{key:"setValue",value:function(){r(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"setValue",this).apply(this,arguments),this.isRadio&&this.attrs.onChange.dispatch(Event,{bubbles:!0})}},{key:"changeRadio",value:function(){for(var e="input[type=radio][name='"+this.el.getAttribute("name")+"']:not([scope='"+this.scope.__name+"'])",t=s.default.root.children(e),n=0,r=t.length;n<r;n++){var o=t[n];o.setChecked(o.el.checked)}}}]),i}();u.booleanAttributes=["checked","multiple"].concat(a.default.booleanAttributes),u.events=["change"].concat(a.default.events),t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadioButton=void 0;var r=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=n(6),o=u(i),s=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function i(){var e;l(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=c(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return o.iterable=o.el.hasAttribute("in"),o}return f(i,o.default),a(i,null,[{key:"define",value:function(){s.default.component("radio",this),s.default.component("radio-button",this.RadioButton)}}]),a(i,[{key:"created",value:function(){if(this.iterable)return r(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"created",this).apply(this,arguments)}},{key:"compiled",value:function(){var t=this;if(this.el.addEventListener("change",function(){s.default.nextTick(function(){var e=t.getRadioValue();e!==t.prevValue&&(t.prevValue=e,t.attrs.onRadio.trigger(e,{bubbles:!0}))})}),this.iterable)return r(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"compiled",this).apply(this,arguments)}},{key:"resolved",value:function(){if(this.attr("in",this.setNames,{callOnStart:!1}),this.attr("value",this.setValue),this.attr("name",this.setNames),this.iterable)return r(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"resolved",this).apply(this,arguments)}},{key:"setNames",value:function(e){for(var t=this.children("input[type=radio]"),n=0,r=t.length;n<r;n++)t[n].el.setAttribute("name",e||this.attrs.name)}},{key:"setValue",value:function(e){if(e!==this.prevValue){var t=this.prevValue,n=this.children("input[type=radio]"),r=!1;this.prevValue=e;for(var o=0,i=n.length;o<i;o++){var a=n[o],s=a.el.value===e;s&&(r=!0),a.setChecked(s)}if(!r)if(null===e){if(void 0===t)return}else this.prevValue=void 0,e=null;this.attrs.onRadio.trigger(e,{bubbles:!0})}}},{key:"getRadioValue",value:function(){for(var e=this.children("input[type=radio]"),t=0,n=e.length;t<n;t++){var r=e[t];if(r.el.checked)return r.el.value}return null}}]),i}();h.matches="[name]",h.events=["radio"].concat(o.default.events),t.default=h;var _=t.RadioButton=function(e){function o(){var e;l(this,o);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return c(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(n)))}return f(o,i.Loop),a(o,[{key:"compiled",value:function(){return this.attr("value","value"),r(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"compiled",this).apply(this,arguments)}}]),o}();_.template='<label><input type="radio" value="${this.value}"/>${this.__content}</label>',h.RadioButton=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=a(n(5)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,null,[{key:"define",value:function(){i.default.component("textarea",this)}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=i(n(5)),a=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return o.el.hasAttribute("editable")&&(o.el.setAttribute("contenteditable",o.el.getAttribute("editable")),o.el.removeAttribute("editable")),"inline"==getComputedStyle(o.el).display&&(o.el.style.display="block"),o.valueKey="innerHTML",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o.default),r(i,null,[{key:"define",value:function(){a.default.component("content",this),a.default.alias("[contenteditable]","content")}}]),r(i,[{key:"setElementFocus",value:function(){var e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.el),e.collapse(!1),t.removeAllRanges(),t.addRange(e),this.el.focus()}}]),i}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=i(n(2)),a=i(n(0)),s=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return o.html=o.el.innerHTML,o.el.innerHTML="",o.connection=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o.default),r(i,null,[{key:"define",value:function(){a.default.component("include",this)}}]),r(i,[{key:"compiled",value:function(){return this.attr("cache",this.setCache),this.attr("url",this.setTemplate)}},{key:"setCache",value:function(e){this.cache=e}},{key:"setTemplate",value:function(e){var t=this;return this.connection&&this.connection.abort(),s.default.get(e,{cache:this.cache,onStart:function(e){t.connection=e}}).then(function(e){return t.connection=null,t.empty(),t.el.innerHTML=t.html,a.default.setTemplate(t.el,e.data),a.default.compile(t.el,{recompile:!0}).then(function(){t.attrs.onLoad.trigger(void 0,{bubbles:!1})})}).catch(function(e){throw t.attrs.onError.trigger(e,{bubbles:!1}),e})}}]),i}();u.transparent=!0,u.matches="[url]",u.events=["load","error"],t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=a(n(1)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,null,[{key:"define",value:function(){i.default.component("iframe",this)}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=a(n(1)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,null,[{key:"define",value:function(){i.default.component("img",this)}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=a(n(1)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,null,[{key:"define",value:function(){i.default.component("embed",this)}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=a(n(1)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,null,[{key:"define",value:function(){i.default.component("audio",this)}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=a(n(1)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,null,[{key:"define",value:function(){i.default.component("video",this)}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=a(n(1)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,null,[{key:"define",value:function(){i.default.component("track",this)}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=a(n(1)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,null,[{key:"define",value:function(){i.default.component("source",this)}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=i(n(1)),a=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return o.urlAttribute="data",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o.default),r(i,null,[{key:"define",value:function(){a.default.component("object",this)}}]),i}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=i(n(2)),s=i(n(12)),u=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return o.state=null,o.params={},o.query={},o.options={},o.isUrl=o.el.hasAttribute("url"),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.default),o(i,null,[{key:"define",value:function(){u.default.component("a",this)}}]),o(i,[{key:"compiled",value:function(){var t=this;this.el.addEventListener("click",function(e){e.preventDefault(),t.isUrl?s.default.location(t.attrs.url,t.options):s.default.state(t.state.name,t.params,t.query,t.hash,t.options)}),this.onStateChanged=function(){return t.state&&t.setActivity()},window.addEventListener("state-changed",this.onStateChanged),this.attr("state",this.setState),this.attr("params",this.setParams),this.attr("query",this.setQuery),this.attr("hash",this.setHash),this.attr("options",this.setOptions),this.attr("url",this.setUrl),this.attr("state",this.resetHref,{callOnStart:!1}),this.attr("params",this.resetHref,{callOnStart:!1}),this.attr("query",this.resetHref,{callOnStart:!1}),this.attr("hash",this.resetHref,{callOnStart:!1}),this.attr("url",this.resetHref,{callOnStart:!1}),this.resetHref()}},{key:"removed",value:function(){window.removeEventListener("state-changed",this.onStateChanged)}},{key:"setUrl",value:function(e){this.url=e}},{key:"setState",value:function(e){this.state=this.getState(e),this.setActivity()}},{key:"setActivity",value:function(){this.scope.isActiveState=s.default.isActiveState(this.state),this.scope.inActiveState=s.default.inActiveState(this.state)}},{key:"setParams",value:function(e){if("object"!=(void 0===e?"undefined":r(e))||!e)throw new Error("Router state params must be an object");this.params=e}},{key:"setQuery",value:function(e){if("object"!=(void 0===e?"undefined":r(e))||!e)throw new Error("Router state query must be an object");this.query=e}},{key:"setHash",value:function(e){if("string"!=typeof e&&null!=e)throw new Error("Router state hash must be a string|null");this.hash=e}},{key:"setOptions",value:function(e){if("object"!=(void 0===e?"undefined":r(e))||!e)throw new Error("Router state options must be an object");this.options=e}},{key:"getState",value:function(e){var t=s.default.getState(e);if(!t)throw new Error('Not found router state with name "'+e+'"');return t}},{key:"resetHref",value:function(){this.url?this.attrs.href=this.url:this.attrs.href=s.default.createStateUrl(this.state,this.params,this.query,this.hash,this.options)}}]),i}();l.matches="[state]:not([url]),[url]:not([state])",l.controlAttributes=!0,t.default=l}]);